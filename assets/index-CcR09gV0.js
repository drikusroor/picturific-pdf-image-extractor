var ix=Object.defineProperty;var J0=r=>{throw TypeError(r)};var sx=(r,t,e)=>t in r?ix(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var it=(r,t,e)=>sx(r,typeof t!="symbol"?t+"":t,e),Kg=(r,t,e)=>t.has(r)||J0("Cannot "+e);var u=(r,t,e)=>(Kg(r,t,"read from private field"),e?e.call(r):t.get(r)),k=(r,t,e)=>t.has(r)?J0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),S=(r,t,e,n)=>(Kg(r,t,"write to private field"),n?n.call(r,e):t.set(r,e),e),I=(r,t,e)=>(Kg(r,t,"access private method"),e);var sn=(r,t,e,n)=>({set _(i){S(r,t,i,e)},get _(){return u(r,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();var uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ow(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Lw={exports:{}},Cg={},Nw={exports:{}},_t={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kd=Symbol.for("react.element"),ax=Symbol.for("react.portal"),ox=Symbol.for("react.fragment"),lx=Symbol.for("react.strict_mode"),ux=Symbol.for("react.profiler"),cx=Symbol.for("react.provider"),hx=Symbol.for("react.context"),dx=Symbol.for("react.forward_ref"),fx=Symbol.for("react.suspense"),px=Symbol.for("react.memo"),gx=Symbol.for("react.lazy"),q0=Symbol.iterator;function mx(r){return r===null||typeof r!="object"?null:(r=q0&&r[q0]||r["@@iterator"],typeof r=="function"?r:null)}var Dw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Mw=Object.assign,Fw={};function ic(r,t,e){this.props=r,this.context=t,this.refs=Fw,this.updater=e||Dw}ic.prototype.isReactComponent={};ic.prototype.setState=function(r,t){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,t,"setState")};ic.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function zw(){}zw.prototype=ic.prototype;function Uy(r,t,e){this.props=r,this.context=t,this.refs=Fw,this.updater=e||Dw}var Hy=Uy.prototype=new zw;Hy.constructor=Uy;Mw(Hy,ic.prototype);Hy.isPureReactComponent=!0;var t1=Array.isArray,Bw=Object.prototype.hasOwnProperty,$y={current:null},jw={key:!0,ref:!0,__self:!0,__source:!0};function Uw(r,t,e){var n,i={},s=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)Bw.call(t,n)&&!jw.hasOwnProperty(n)&&(i[n]=t[n]);var o=arguments.length-2;if(o===1)i.children=e;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(r&&r.defaultProps)for(n in o=r.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:Kd,type:r,key:s,ref:a,props:i,_owner:$y.current}}function vx(r,t){return{$$typeof:Kd,type:r.type,key:t,ref:r.ref,props:r.props,_owner:r._owner}}function Wy(r){return typeof r=="object"&&r!==null&&r.$$typeof===Kd}function yx(r){var t={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(e){return t[e]})}var e1=/\/+/g;function Zg(r,t){return typeof r=="object"&&r!==null&&r.key!=null?yx(""+r.key):t.toString(36)}function Mf(r,t,e,n,i){var s=typeof r;(s==="undefined"||s==="boolean")&&(r=null);var a=!1;if(r===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(r.$$typeof){case Kd:case ax:a=!0}}if(a)return a=r,i=i(a),r=n===""?"."+Zg(a,0):n,t1(i)?(e="",r!=null&&(e=r.replace(e1,"$&/")+"/"),Mf(i,t,e,"",function(c){return c})):i!=null&&(Wy(i)&&(i=vx(i,e+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(e1,"$&/")+"/")+r)),t.push(i)),1;if(a=0,n=n===""?".":n+":",t1(r))for(var o=0;o<r.length;o++){s=r[o];var l=n+Zg(s,o);a+=Mf(s,t,e,l,i)}else if(l=mx(r),typeof l=="function")for(r=l.call(r),o=0;!(s=r.next()).done;)s=s.value,l=n+Zg(s,o++),a+=Mf(s,t,e,l,i);else if(s==="object")throw t=String(r),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function cf(r,t,e){if(r==null)return r;var n=[],i=0;return Mf(r,n,"","",function(s){return t.call(e,s,i++)}),n}function wx(r){if(r._status===-1){var t=r._result;t=t(),t.then(function(e){(r._status===0||r._status===-1)&&(r._status=1,r._result=e)},function(e){(r._status===0||r._status===-1)&&(r._status=2,r._result=e)}),r._status===-1&&(r._status=0,r._result=t)}if(r._status===1)return r._result.default;throw r._result}var vn={current:null},Ff={transition:null},Ax={ReactCurrentDispatcher:vn,ReactCurrentBatchConfig:Ff,ReactCurrentOwner:$y};function Hw(){throw Error("act(...) is not supported in production builds of React.")}_t.Children={map:cf,forEach:function(r,t,e){cf(r,function(){t.apply(this,arguments)},e)},count:function(r){var t=0;return cf(r,function(){t++}),t},toArray:function(r){return cf(r,function(t){return t})||[]},only:function(r){if(!Wy(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};_t.Component=ic;_t.Fragment=ox;_t.Profiler=ux;_t.PureComponent=Uy;_t.StrictMode=lx;_t.Suspense=fx;_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ax;_t.act=Hw;_t.cloneElement=function(r,t,e){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var n=Mw({},r.props),i=r.key,s=r.ref,a=r._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=$y.current),t.key!==void 0&&(i=""+t.key),r.type&&r.type.defaultProps)var o=r.type.defaultProps;for(l in t)Bw.call(t,l)&&!jw.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=e;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:Kd,type:r.type,key:i,ref:s,props:n,_owner:a}};_t.createContext=function(r){return r={$$typeof:hx,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:cx,_context:r},r.Consumer=r};_t.createElement=Uw;_t.createFactory=function(r){var t=Uw.bind(null,r);return t.type=r,t};_t.createRef=function(){return{current:null}};_t.forwardRef=function(r){return{$$typeof:dx,render:r}};_t.isValidElement=Wy;_t.lazy=function(r){return{$$typeof:gx,_payload:{_status:-1,_result:r},_init:wx}};_t.memo=function(r,t){return{$$typeof:px,type:r,compare:t===void 0?null:t}};_t.startTransition=function(r){var t=Ff.transition;Ff.transition={};try{r()}finally{Ff.transition=t}};_t.unstable_act=Hw;_t.useCallback=function(r,t){return vn.current.useCallback(r,t)};_t.useContext=function(r){return vn.current.useContext(r)};_t.useDebugValue=function(){};_t.useDeferredValue=function(r){return vn.current.useDeferredValue(r)};_t.useEffect=function(r,t){return vn.current.useEffect(r,t)};_t.useId=function(){return vn.current.useId()};_t.useImperativeHandle=function(r,t,e){return vn.current.useImperativeHandle(r,t,e)};_t.useInsertionEffect=function(r,t){return vn.current.useInsertionEffect(r,t)};_t.useLayoutEffect=function(r,t){return vn.current.useLayoutEffect(r,t)};_t.useMemo=function(r,t){return vn.current.useMemo(r,t)};_t.useReducer=function(r,t,e){return vn.current.useReducer(r,t,e)};_t.useRef=function(r){return vn.current.useRef(r)};_t.useState=function(r){return vn.current.useState(r)};_t.useSyncExternalStore=function(r,t,e){return vn.current.useSyncExternalStore(r,t,e)};_t.useTransition=function(){return vn.current.useTransition()};_t.version="18.3.1";Nw.exports=_t;var Dr=Nw.exports;const bx=Ow(Dr);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sx=Dr,Ex=Symbol.for("react.element"),xx=Symbol.for("react.fragment"),Cx=Object.prototype.hasOwnProperty,Tx=Sx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kx={key:!0,ref:!0,__self:!0,__source:!0};function $w(r,t,e){var n,i={},s=null,a=null;e!==void 0&&(s=""+e),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)Cx.call(t,n)&&!kx.hasOwnProperty(n)&&(i[n]=t[n]);if(r&&r.defaultProps)for(n in t=r.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:Ex,type:r,key:s,ref:a,props:i,_owner:Tx.current}}Cg.Fragment=xx;Cg.jsx=$w;Cg.jsxs=$w;Lw.exports=Cg;var St=Lw.exports,_m={},Ww={exports:{}},tr={},Vw={exports:{}},Gw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function t(W,H){var Z=W.length;W.push(H);t:for(;0<Z;){var j=Z-1>>>1,z=W[j];if(0<i(z,H))W[j]=H,W[Z]=z,Z=j;else break t}}function e(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var H=W[0],Z=W.pop();if(Z!==H){W[0]=Z;t:for(var j=0,z=W.length,st=z>>>1;j<st;){var tt=2*(j+1)-1,et=W[tt],J=tt+1,K=W[J];if(0>i(et,Z))J<z&&0>i(K,et)?(W[j]=K,W[J]=Z,j=J):(W[j]=et,W[tt]=Z,j=tt);else if(J<z&&0>i(K,Z))W[j]=K,W[J]=Z,j=J;else break t}}return H}function i(W,H){var Z=W.sortIndex-H.sortIndex;return Z!==0?Z:W.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();r.unstable_now=function(){return a.now()-o}}var l=[],c=[],h=1,d=null,f=3,p=!1,v=!1,g=!1,A=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(W){for(var H=e(c);H!==null;){if(H.callback===null)n(c);else if(H.startTime<=W)n(c),H.sortIndex=H.expirationTime,t(l,H);else break;H=e(c)}}function b(W){if(g=!1,w(W),!v)if(e(l)!==null)v=!0,X(E);else{var H=e(c);H!==null&&F(b,H.startTime-W)}}function E(W,H){v=!1,g&&(g=!1,m(P),P=-1),p=!0;var Z=f;try{for(w(H),d=e(l);d!==null&&(!(d.expirationTime>H)||W&&!B());){var j=d.callback;if(typeof j=="function"){d.callback=null,f=d.priorityLevel;var z=j(d.expirationTime<=H);H=r.unstable_now(),typeof z=="function"?d.callback=z:d===e(l)&&n(l),w(H)}else n(l);d=e(l)}if(d!==null)var st=!0;else{var tt=e(c);tt!==null&&F(b,tt.startTime-H),st=!1}return st}finally{d=null,f=Z,p=!1}}var T=!1,R=null,P=-1,_=5,N=-1;function B(){return!(r.unstable_now()-N<_)}function O(){if(R!==null){var W=r.unstable_now();N=W;var H=!0;try{H=R(!0,W)}finally{H?M():(T=!1,R=null)}}else T=!1}var M;if(typeof y=="function")M=function(){y(O)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,$=x.port2;x.port1.onmessage=O,M=function(){$.postMessage(null)}}else M=function(){A(O,0)};function X(W){R=W,T||(T=!0,M())}function F(W,H){P=A(function(){W(r.unstable_now())},H)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(W){W.callback=null},r.unstable_continueExecution=function(){v||p||(v=!0,X(E))},r.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<W?Math.floor(1e3/W):5},r.unstable_getCurrentPriorityLevel=function(){return f},r.unstable_getFirstCallbackNode=function(){return e(l)},r.unstable_next=function(W){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var Z=f;f=H;try{return W()}finally{f=Z}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(W,H){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Z=f;f=W;try{return H()}finally{f=Z}},r.unstable_scheduleCallback=function(W,H,Z){var j=r.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?j+Z:j):Z=j,W){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=Z+z,W={id:h++,callback:H,priorityLevel:W,startTime:Z,expirationTime:z,sortIndex:-1},Z>j?(W.sortIndex=Z,t(c,W),e(l)===null&&W===e(c)&&(g?(m(P),P=-1):g=!0,F(b,Z-j))):(W.sortIndex=z,t(l,W),v||p||(v=!0,X(E))),W},r.unstable_shouldYield=B,r.unstable_wrapCallback=function(W){var H=f;return function(){var Z=f;f=H;try{return W.apply(this,arguments)}finally{f=Z}}}})(Gw);Vw.exports=Gw;var Rx=Vw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ix=Dr,qn=Rx;function rt(r){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+r,e=1;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+r+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xw=new Set,th={};function ol(r,t){Qu(r,t),Qu(r+"Capture",t)}function Qu(r,t){for(th[r]=t,r=0;r<t.length;r++)Xw.add(t[r])}var fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pm=Object.prototype.hasOwnProperty,_x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,n1={},r1={};function Px(r){return Pm.call(r1,r)?!0:Pm.call(n1,r)?!1:_x.test(r)?r1[r]=!0:(n1[r]=!0,!1)}function Ox(r,t,e,n){if(e!==null&&e.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:e!==null?!e.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function Lx(r,t,e,n){if(t===null||typeof t>"u"||Ox(r,t,e,n))return!0;if(n)return!1;if(e!==null)switch(e.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function yn(r,t,e,n,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=e,this.propertyName=r,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var Ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){Ye[r]=new yn(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var t=r[0];Ye[t]=new yn(t,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){Ye[r]=new yn(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){Ye[r]=new yn(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){Ye[r]=new yn(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){Ye[r]=new yn(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){Ye[r]=new yn(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){Ye[r]=new yn(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){Ye[r]=new yn(r,5,!1,r.toLowerCase(),null,!1,!1)});var Vy=/[\-:]([a-z])/g;function Gy(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var t=r.replace(Vy,Gy);Ye[t]=new yn(t,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var t=r.replace(Vy,Gy);Ye[t]=new yn(t,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var t=r.replace(Vy,Gy);Ye[t]=new yn(t,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){Ye[r]=new yn(r,1,!1,r.toLowerCase(),null,!1,!1)});Ye.xlinkHref=new yn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){Ye[r]=new yn(r,1,!1,r.toLowerCase(),null,!0,!0)});function Xy(r,t,e,n){var i=Ye.hasOwnProperty(t)?Ye[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Lx(t,e,i,n)&&(e=null),n||i===null?Px(t)&&(e===null?r.removeAttribute(t):r.setAttribute(t,""+e)):i.mustUseProperty?r[i.propertyName]=e===null?i.type===3?!1:"":e:(t=i.attributeName,n=i.attributeNamespace,e===null?r.removeAttribute(t):(i=i.type,e=i===3||i===4&&e===!0?"":""+e,n?r.setAttributeNS(n,t,e):r.setAttribute(t,e))))}var ys=Ix.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hf=Symbol.for("react.element"),Al=Symbol.for("react.portal"),bl=Symbol.for("react.fragment"),Yy=Symbol.for("react.strict_mode"),Om=Symbol.for("react.profiler"),Yw=Symbol.for("react.provider"),Kw=Symbol.for("react.context"),Ky=Symbol.for("react.forward_ref"),Lm=Symbol.for("react.suspense"),Nm=Symbol.for("react.suspense_list"),Zy=Symbol.for("react.memo"),bs=Symbol.for("react.lazy"),Zw=Symbol.for("react.offscreen"),i1=Symbol.iterator;function cc(r){return r===null||typeof r!="object"?null:(r=i1&&r[i1]||r["@@iterator"],typeof r=="function"?r:null)}var ae=Object.assign,Qg;function Sc(r){if(Qg===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Qg=t&&t[1]||""}return`
`+Qg+r}var Jg=!1;function qg(r,t){if(!r||Jg)return"";Jg=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(r,[],t)}else{try{t.call()}catch(c){n=c}r.call(t.prototype)}else{try{throw Error()}catch(c){n=c}r()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return r.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",r.displayName)),l}while(1<=a&&0<=o);break}}}finally{Jg=!1,Error.prepareStackTrace=e}return(r=r?r.displayName||r.name:"")?Sc(r):""}function Nx(r){switch(r.tag){case 5:return Sc(r.type);case 16:return Sc("Lazy");case 13:return Sc("Suspense");case 19:return Sc("SuspenseList");case 0:case 2:case 15:return r=qg(r.type,!1),r;case 11:return r=qg(r.type.render,!1),r;case 1:return r=qg(r.type,!0),r;default:return""}}function Dm(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case bl:return"Fragment";case Al:return"Portal";case Om:return"Profiler";case Yy:return"StrictMode";case Lm:return"Suspense";case Nm:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case Kw:return(r.displayName||"Context")+".Consumer";case Yw:return(r._context.displayName||"Context")+".Provider";case Ky:var t=r.render;return r=r.displayName,r||(r=t.displayName||t.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Zy:return t=r.displayName||null,t!==null?t:Dm(r.type)||"Memo";case bs:t=r._payload,r=r._init;try{return Dm(r(t))}catch{}}return null}function Dx(r){var t=r.type;switch(r.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=t.render,r=r.displayName||r.name||"",t.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dm(t);case 8:return t===Yy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xa(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Qw(r){var t=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Mx(r){var t=Qw(r)?"checked":"value",e=Object.getOwnPropertyDescriptor(r.constructor.prototype,t),n=""+r[t];if(!r.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var i=e.get,s=e.set;return Object.defineProperty(r,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(r,t,{enumerable:e.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){r._valueTracker=null,delete r[t]}}}}function df(r){r._valueTracker||(r._valueTracker=Mx(r))}function Jw(r){if(!r)return!1;var t=r._valueTracker;if(!t)return!0;var e=t.getValue(),n="";return r&&(n=Qw(r)?r.checked?"true":"false":r.value),r=n,r!==e?(t.setValue(r),!0):!1}function Cp(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Mm(r,t){var e=t.checked;return ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??r._wrapperState.initialChecked})}function s1(r,t){var e=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;e=xa(t.value!=null?t.value:e),r._wrapperState={initialChecked:n,initialValue:e,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function qw(r,t){t=t.checked,t!=null&&Xy(r,"checked",t,!1)}function Fm(r,t){qw(r,t);var e=xa(t.value),n=t.type;if(e!=null)n==="number"?(e===0&&r.value===""||r.value!=e)&&(r.value=""+e):r.value!==""+e&&(r.value=""+e);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}t.hasOwnProperty("value")?zm(r,t.type,e):t.hasOwnProperty("defaultValue")&&zm(r,t.type,xa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(r.defaultChecked=!!t.defaultChecked)}function a1(r,t,e){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+r._wrapperState.initialValue,e||t===r.value||(r.value=t),r.defaultValue=t}e=r.name,e!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,e!==""&&(r.name=e)}function zm(r,t,e){(t!=="number"||Cp(r.ownerDocument)!==r)&&(e==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+e&&(r.defaultValue=""+e))}var Ec=Array.isArray;function Dl(r,t,e,n){if(r=r.options,t){t={};for(var i=0;i<e.length;i++)t["$"+e[i]]=!0;for(e=0;e<r.length;e++)i=t.hasOwnProperty("$"+r[e].value),r[e].selected!==i&&(r[e].selected=i),i&&n&&(r[e].defaultSelected=!0)}else{for(e=""+xa(e),t=null,i=0;i<r.length;i++){if(r[i].value===e){r[i].selected=!0,n&&(r[i].defaultSelected=!0);return}t!==null||r[i].disabled||(t=r[i])}t!==null&&(t.selected=!0)}}function Bm(r,t){if(t.dangerouslySetInnerHTML!=null)throw Error(rt(91));return ae({},t,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function o1(r,t){var e=t.value;if(e==null){if(e=t.children,t=t.defaultValue,e!=null){if(t!=null)throw Error(rt(92));if(Ec(e)){if(1<e.length)throw Error(rt(93));e=e[0]}t=e}t==null&&(t=""),e=t}r._wrapperState={initialValue:xa(e)}}function tA(r,t){var e=xa(t.value),n=xa(t.defaultValue);e!=null&&(e=""+e,e!==r.value&&(r.value=e),t.defaultValue==null&&r.defaultValue!==e&&(r.defaultValue=e)),n!=null&&(r.defaultValue=""+n)}function l1(r){var t=r.textContent;t===r._wrapperState.initialValue&&t!==""&&t!==null&&(r.value=t)}function eA(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jm(r,t){return r==null||r==="http://www.w3.org/1999/xhtml"?eA(t):r==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var ff,nA=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction(function(){return r(t,e,n,i)})}:r}(function(r,t){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=t;else{for(ff=ff||document.createElement("div"),ff.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ff.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;t.firstChild;)r.appendChild(t.firstChild)}});function eh(r,t){if(t){var e=r.firstChild;if(e&&e===r.lastChild&&e.nodeType===3){e.nodeValue=t;return}}r.textContent=t}var Vc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fx=["Webkit","ms","Moz","O"];Object.keys(Vc).forEach(function(r){Fx.forEach(function(t){t=t+r.charAt(0).toUpperCase()+r.substring(1),Vc[t]=Vc[r]})});function rA(r,t,e){return t==null||typeof t=="boolean"||t===""?"":e||typeof t!="number"||t===0||Vc.hasOwnProperty(r)&&Vc[r]?(""+t).trim():t+"px"}function iA(r,t){r=r.style;for(var e in t)if(t.hasOwnProperty(e)){var n=e.indexOf("--")===0,i=rA(e,t[e],n);e==="float"&&(e="cssFloat"),n?r.setProperty(e,i):r[e]=i}}var zx=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Um(r,t){if(t){if(zx[r]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(rt(137,r));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(rt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(rt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(rt(62))}}function Hm(r,t){if(r.indexOf("-")===-1)return typeof t.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $m=null;function Qy(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Wm=null,Ml=null,Fl=null;function u1(r){if(r=Jd(r)){if(typeof Wm!="function")throw Error(rt(280));var t=r.stateNode;t&&(t=_g(t),Wm(r.stateNode,r.type,t))}}function sA(r){Ml?Fl?Fl.push(r):Fl=[r]:Ml=r}function aA(){if(Ml){var r=Ml,t=Fl;if(Fl=Ml=null,u1(r),t)for(r=0;r<t.length;r++)u1(t[r])}}function oA(r,t){return r(t)}function lA(){}var tm=!1;function uA(r,t,e){if(tm)return r(t,e);tm=!0;try{return oA(r,t,e)}finally{tm=!1,(Ml!==null||Fl!==null)&&(lA(),aA())}}function nh(r,t){var e=r.stateNode;if(e===null)return null;var n=_g(e);if(n===null)return null;e=n[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break t;default:r=!1}if(r)return null;if(e&&typeof e!="function")throw Error(rt(231,t,typeof e));return e}var Vm=!1;if(fs)try{var hc={};Object.defineProperty(hc,"passive",{get:function(){Vm=!0}}),window.addEventListener("test",hc,hc),window.removeEventListener("test",hc,hc)}catch{Vm=!1}function Bx(r,t,e,n,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(e,c)}catch(h){this.onError(h)}}var Gc=!1,Tp=null,kp=!1,Gm=null,jx={onError:function(r){Gc=!0,Tp=r}};function Ux(r,t,e,n,i,s,a,o,l){Gc=!1,Tp=null,Bx.apply(jx,arguments)}function Hx(r,t,e,n,i,s,a,o,l){if(Ux.apply(this,arguments),Gc){if(Gc){var c=Tp;Gc=!1,Tp=null}else throw Error(rt(198));kp||(kp=!0,Gm=c)}}function ll(r){var t=r,e=r;if(r.alternate)for(;t.return;)t=t.return;else{r=t;do t=r,t.flags&4098&&(e=t.return),r=t.return;while(r)}return t.tag===3?e:null}function cA(r){if(r.tag===13){var t=r.memoizedState;if(t===null&&(r=r.alternate,r!==null&&(t=r.memoizedState)),t!==null)return t.dehydrated}return null}function c1(r){if(ll(r)!==r)throw Error(rt(188))}function $x(r){var t=r.alternate;if(!t){if(t=ll(r),t===null)throw Error(rt(188));return t!==r?null:r}for(var e=r,n=t;;){var i=e.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){e=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===e)return c1(i),r;if(s===n)return c1(i),t;s=s.sibling}throw Error(rt(188))}if(e.return!==n.return)e=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===e){a=!0,e=i,n=s;break}if(o===n){a=!0,n=i,e=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===e){a=!0,e=s,n=i;break}if(o===n){a=!0,n=s,e=i;break}o=o.sibling}if(!a)throw Error(rt(189))}}if(e.alternate!==n)throw Error(rt(190))}if(e.tag!==3)throw Error(rt(188));return e.stateNode.current===e?r:t}function hA(r){return r=$x(r),r!==null?dA(r):null}function dA(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var t=dA(r);if(t!==null)return t;r=r.sibling}return null}var fA=qn.unstable_scheduleCallback,h1=qn.unstable_cancelCallback,Wx=qn.unstable_shouldYield,Vx=qn.unstable_requestPaint,de=qn.unstable_now,Gx=qn.unstable_getCurrentPriorityLevel,Jy=qn.unstable_ImmediatePriority,pA=qn.unstable_UserBlockingPriority,Rp=qn.unstable_NormalPriority,Xx=qn.unstable_LowPriority,gA=qn.unstable_IdlePriority,Tg=null,vi=null;function Yx(r){if(vi&&typeof vi.onCommitFiberRoot=="function")try{vi.onCommitFiberRoot(Tg,r,void 0,(r.current.flags&128)===128)}catch{}}var Br=Math.clz32?Math.clz32:Qx,Kx=Math.log,Zx=Math.LN2;function Qx(r){return r>>>=0,r===0?32:31-(Kx(r)/Zx|0)|0}var pf=64,gf=4194304;function xc(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Ip(r,t){var e=r.pendingLanes;if(e===0)return 0;var n=0,i=r.suspendedLanes,s=r.pingedLanes,a=e&268435455;if(a!==0){var o=a&~i;o!==0?n=xc(o):(s&=a,s!==0&&(n=xc(s)))}else a=e&~i,a!==0?n=xc(a):s!==0&&(n=xc(s));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(n&4&&(n|=e&16),t=r.entangledLanes,t!==0)for(r=r.entanglements,t&=n;0<t;)e=31-Br(t),i=1<<e,n|=r[e],t&=~i;return n}function Jx(r,t){switch(r){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qx(r,t){for(var e=r.suspendedLanes,n=r.pingedLanes,i=r.expirationTimes,s=r.pendingLanes;0<s;){var a=31-Br(s),o=1<<a,l=i[a];l===-1?(!(o&e)||o&n)&&(i[a]=Jx(o,t)):l<=t&&(r.expiredLanes|=o),s&=~o}}function Xm(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function mA(){var r=pf;return pf<<=1,!(pf&4194240)&&(pf=64),r}function em(r){for(var t=[],e=0;31>e;e++)t.push(r);return t}function Zd(r,t,e){r.pendingLanes|=t,t!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,t=31-Br(t),r[t]=e}function t2(r,t){var e=r.pendingLanes&~t;r.pendingLanes=t,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=t,r.mutableReadLanes&=t,r.entangledLanes&=t,t=r.entanglements;var n=r.eventTimes;for(r=r.expirationTimes;0<e;){var i=31-Br(e),s=1<<i;t[i]=0,n[i]=-1,r[i]=-1,e&=~s}}function qy(r,t){var e=r.entangledLanes|=t;for(r=r.entanglements;e;){var n=31-Br(e),i=1<<n;i&t|r[n]&t&&(r[n]|=t),e&=~i}}var Ut=0;function vA(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var yA,t0,wA,AA,bA,Ym=!1,mf=[],ma=null,va=null,ya=null,rh=new Map,ih=new Map,Es=[],e2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function d1(r,t){switch(r){case"focusin":case"focusout":ma=null;break;case"dragenter":case"dragleave":va=null;break;case"mouseover":case"mouseout":ya=null;break;case"pointerover":case"pointerout":rh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ih.delete(t.pointerId)}}function dc(r,t,e,n,i,s){return r===null||r.nativeEvent!==s?(r={blockedOn:t,domEventName:e,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Jd(t),t!==null&&t0(t)),r):(r.eventSystemFlags|=n,t=r.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),r)}function n2(r,t,e,n,i){switch(t){case"focusin":return ma=dc(ma,r,t,e,n,i),!0;case"dragenter":return va=dc(va,r,t,e,n,i),!0;case"mouseover":return ya=dc(ya,r,t,e,n,i),!0;case"pointerover":var s=i.pointerId;return rh.set(s,dc(rh.get(s)||null,r,t,e,n,i)),!0;case"gotpointercapture":return s=i.pointerId,ih.set(s,dc(ih.get(s)||null,r,t,e,n,i)),!0}return!1}function SA(r){var t=Ha(r.target);if(t!==null){var e=ll(t);if(e!==null){if(t=e.tag,t===13){if(t=cA(e),t!==null){r.blockedOn=t,bA(r.priority,function(){wA(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){r.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}r.blockedOn=null}function zf(r){if(r.blockedOn!==null)return!1;for(var t=r.targetContainers;0<t.length;){var e=Km(r.domEventName,r.eventSystemFlags,t[0],r.nativeEvent);if(e===null){e=r.nativeEvent;var n=new e.constructor(e.type,e);$m=n,e.target.dispatchEvent(n),$m=null}else return t=Jd(e),t!==null&&t0(t),r.blockedOn=e,!1;t.shift()}return!0}function f1(r,t,e){zf(r)&&e.delete(t)}function r2(){Ym=!1,ma!==null&&zf(ma)&&(ma=null),va!==null&&zf(va)&&(va=null),ya!==null&&zf(ya)&&(ya=null),rh.forEach(f1),ih.forEach(f1)}function fc(r,t){r.blockedOn===t&&(r.blockedOn=null,Ym||(Ym=!0,qn.unstable_scheduleCallback(qn.unstable_NormalPriority,r2)))}function sh(r){function t(i){return fc(i,r)}if(0<mf.length){fc(mf[0],r);for(var e=1;e<mf.length;e++){var n=mf[e];n.blockedOn===r&&(n.blockedOn=null)}}for(ma!==null&&fc(ma,r),va!==null&&fc(va,r),ya!==null&&fc(ya,r),rh.forEach(t),ih.forEach(t),e=0;e<Es.length;e++)n=Es[e],n.blockedOn===r&&(n.blockedOn=null);for(;0<Es.length&&(e=Es[0],e.blockedOn===null);)SA(e),e.blockedOn===null&&Es.shift()}var zl=ys.ReactCurrentBatchConfig,_p=!0;function i2(r,t,e,n){var i=Ut,s=zl.transition;zl.transition=null;try{Ut=1,e0(r,t,e,n)}finally{Ut=i,zl.transition=s}}function s2(r,t,e,n){var i=Ut,s=zl.transition;zl.transition=null;try{Ut=4,e0(r,t,e,n)}finally{Ut=i,zl.transition=s}}function e0(r,t,e,n){if(_p){var i=Km(r,t,e,n);if(i===null)hm(r,t,n,Pp,e),d1(r,n);else if(n2(i,r,t,e,n))n.stopPropagation();else if(d1(r,n),t&4&&-1<e2.indexOf(r)){for(;i!==null;){var s=Jd(i);if(s!==null&&yA(s),s=Km(r,t,e,n),s===null&&hm(r,t,n,Pp,e),s===i)break;i=s}i!==null&&n.stopPropagation()}else hm(r,t,n,null,e)}}var Pp=null;function Km(r,t,e,n){if(Pp=null,r=Qy(n),r=Ha(r),r!==null)if(t=ll(r),t===null)r=null;else if(e=t.tag,e===13){if(r=cA(t),r!==null)return r;r=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;r=null}else t!==r&&(r=null);return Pp=r,null}function EA(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gx()){case Jy:return 1;case pA:return 4;case Rp:case Xx:return 16;case gA:return 536870912;default:return 16}default:return 16}}var pa=null,n0=null,Bf=null;function xA(){if(Bf)return Bf;var r,t=n0,e=t.length,n,i="value"in pa?pa.value:pa.textContent,s=i.length;for(r=0;r<e&&t[r]===i[r];r++);var a=e-r;for(n=1;n<=a&&t[e-n]===i[s-n];n++);return Bf=i.slice(r,1<n?1-n:void 0)}function jf(r){var t=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&t===13&&(r=13)):r=t,r===10&&(r=13),32<=r||r===13?r:0}function vf(){return!0}function p1(){return!1}function er(r){function t(e,n,i,s,a){this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in r)r.hasOwnProperty(o)&&(e=r[o],this[o]=e?e(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?vf:p1,this.isPropagationStopped=p1,this}return ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=vf)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=vf)},persist:function(){},isPersistent:vf}),t}var sc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},r0=er(sc),Qd=ae({},sc,{view:0,detail:0}),a2=er(Qd),nm,rm,pc,kg=ae({},Qd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:i0,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==pc&&(pc&&r.type==="mousemove"?(nm=r.screenX-pc.screenX,rm=r.screenY-pc.screenY):rm=nm=0,pc=r),nm)},movementY:function(r){return"movementY"in r?r.movementY:rm}}),g1=er(kg),o2=ae({},kg,{dataTransfer:0}),l2=er(o2),u2=ae({},Qd,{relatedTarget:0}),im=er(u2),c2=ae({},sc,{animationName:0,elapsedTime:0,pseudoElement:0}),h2=er(c2),d2=ae({},sc,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),f2=er(d2),p2=ae({},sc,{data:0}),m1=er(p2),g2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},m2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},v2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function y2(r){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(r):(r=v2[r])?!!t[r]:!1}function i0(){return y2}var w2=ae({},Qd,{key:function(r){if(r.key){var t=g2[r.key]||r.key;if(t!=="Unidentified")return t}return r.type==="keypress"?(r=jf(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?m2[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:i0,charCode:function(r){return r.type==="keypress"?jf(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?jf(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),A2=er(w2),b2=ae({},kg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v1=er(b2),S2=ae({},Qd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:i0}),E2=er(S2),x2=ae({},sc,{propertyName:0,elapsedTime:0,pseudoElement:0}),C2=er(x2),T2=ae({},kg,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),k2=er(T2),R2=[9,13,27,32],s0=fs&&"CompositionEvent"in window,Xc=null;fs&&"documentMode"in document&&(Xc=document.documentMode);var I2=fs&&"TextEvent"in window&&!Xc,CA=fs&&(!s0||Xc&&8<Xc&&11>=Xc),y1=" ",w1=!1;function TA(r,t){switch(r){case"keyup":return R2.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kA(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Sl=!1;function _2(r,t){switch(r){case"compositionend":return kA(t);case"keypress":return t.which!==32?null:(w1=!0,y1);case"textInput":return r=t.data,r===y1&&w1?null:r;default:return null}}function P2(r,t){if(Sl)return r==="compositionend"||!s0&&TA(r,t)?(r=xA(),Bf=n0=pa=null,Sl=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return CA&&t.locale!=="ko"?null:t.data;default:return null}}var O2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A1(r){var t=r&&r.nodeName&&r.nodeName.toLowerCase();return t==="input"?!!O2[r.type]:t==="textarea"}function RA(r,t,e,n){sA(n),t=Op(t,"onChange"),0<t.length&&(e=new r0("onChange","change",null,e,n),r.push({event:e,listeners:t}))}var Yc=null,ah=null;function L2(r){BA(r,0)}function Rg(r){var t=Cl(r);if(Jw(t))return r}function N2(r,t){if(r==="change")return t}var IA=!1;if(fs){var sm;if(fs){var am="oninput"in document;if(!am){var b1=document.createElement("div");b1.setAttribute("oninput","return;"),am=typeof b1.oninput=="function"}sm=am}else sm=!1;IA=sm&&(!document.documentMode||9<document.documentMode)}function S1(){Yc&&(Yc.detachEvent("onpropertychange",_A),ah=Yc=null)}function _A(r){if(r.propertyName==="value"&&Rg(ah)){var t=[];RA(t,ah,r,Qy(r)),uA(L2,t)}}function D2(r,t,e){r==="focusin"?(S1(),Yc=t,ah=e,Yc.attachEvent("onpropertychange",_A)):r==="focusout"&&S1()}function M2(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Rg(ah)}function F2(r,t){if(r==="click")return Rg(t)}function z2(r,t){if(r==="input"||r==="change")return Rg(t)}function B2(r,t){return r===t&&(r!==0||1/r===1/t)||r!==r&&t!==t}var Ur=typeof Object.is=="function"?Object.is:B2;function oh(r,t){if(Ur(r,t))return!0;if(typeof r!="object"||r===null||typeof t!="object"||t===null)return!1;var e=Object.keys(r),n=Object.keys(t);if(e.length!==n.length)return!1;for(n=0;n<e.length;n++){var i=e[n];if(!Pm.call(t,i)||!Ur(r[i],t[i]))return!1}return!0}function E1(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function x1(r,t){var e=E1(r);r=0;for(var n;e;){if(e.nodeType===3){if(n=r+e.textContent.length,r<=t&&n>=t)return{node:e,offset:t-r};r=n}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=E1(e)}}function PA(r,t){return r&&t?r===t?!0:r&&r.nodeType===3?!1:t&&t.nodeType===3?PA(r,t.parentNode):"contains"in r?r.contains(t):r.compareDocumentPosition?!!(r.compareDocumentPosition(t)&16):!1:!1}function OA(){for(var r=window,t=Cp();t instanceof r.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)r=t.contentWindow;else break;t=Cp(r.document)}return t}function a0(r){var t=r&&r.nodeName&&r.nodeName.toLowerCase();return t&&(t==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||t==="textarea"||r.contentEditable==="true")}function j2(r){var t=OA(),e=r.focusedElem,n=r.selectionRange;if(t!==e&&e&&e.ownerDocument&&PA(e.ownerDocument.documentElement,e)){if(n!==null&&a0(e)){if(t=n.start,r=n.end,r===void 0&&(r=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(r,e.value.length);else if(r=(t=e.ownerDocument||document)&&t.defaultView||window,r.getSelection){r=r.getSelection();var i=e.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!r.extend&&s>n&&(i=n,n=s,s=i),i=x1(e,s);var a=x1(e,n);i&&a&&(r.rangeCount!==1||r.anchorNode!==i.node||r.anchorOffset!==i.offset||r.focusNode!==a.node||r.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),r.removeAllRanges(),s>n?(r.addRange(t),r.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),r.addRange(t)))}}for(t=[],r=e;r=r.parentNode;)r.nodeType===1&&t.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)r=t[e],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var U2=fs&&"documentMode"in document&&11>=document.documentMode,El=null,Zm=null,Kc=null,Qm=!1;function C1(r,t,e){var n=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;Qm||El==null||El!==Cp(n)||(n=El,"selectionStart"in n&&a0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Kc&&oh(Kc,n)||(Kc=n,n=Op(Zm,"onSelect"),0<n.length&&(t=new r0("onSelect","select",null,t,e),r.push({event:t,listeners:n}),t.target=El)))}function yf(r,t){var e={};return e[r.toLowerCase()]=t.toLowerCase(),e["Webkit"+r]="webkit"+t,e["Moz"+r]="moz"+t,e}var xl={animationend:yf("Animation","AnimationEnd"),animationiteration:yf("Animation","AnimationIteration"),animationstart:yf("Animation","AnimationStart"),transitionend:yf("Transition","TransitionEnd")},om={},LA={};fs&&(LA=document.createElement("div").style,"AnimationEvent"in window||(delete xl.animationend.animation,delete xl.animationiteration.animation,delete xl.animationstart.animation),"TransitionEvent"in window||delete xl.transitionend.transition);function Ig(r){if(om[r])return om[r];if(!xl[r])return r;var t=xl[r],e;for(e in t)if(t.hasOwnProperty(e)&&e in LA)return om[r]=t[e];return r}var NA=Ig("animationend"),DA=Ig("animationiteration"),MA=Ig("animationstart"),FA=Ig("transitionend"),zA=new Map,T1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pa(r,t){zA.set(r,t),ol(t,[r])}for(var lm=0;lm<T1.length;lm++){var um=T1[lm],H2=um.toLowerCase(),$2=um[0].toUpperCase()+um.slice(1);Pa(H2,"on"+$2)}Pa(NA,"onAnimationEnd");Pa(DA,"onAnimationIteration");Pa(MA,"onAnimationStart");Pa("dblclick","onDoubleClick");Pa("focusin","onFocus");Pa("focusout","onBlur");Pa(FA,"onTransitionEnd");Qu("onMouseEnter",["mouseout","mouseover"]);Qu("onMouseLeave",["mouseout","mouseover"]);Qu("onPointerEnter",["pointerout","pointerover"]);Qu("onPointerLeave",["pointerout","pointerover"]);ol("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ol("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ol("onBeforeInput",["compositionend","keypress","textInput","paste"]);ol("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ol("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ol("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cc));function k1(r,t,e){var n=r.type||"unknown-event";r.currentTarget=e,Hx(n,t,void 0,r),r.currentTarget=null}function BA(r,t){t=(t&4)!==0;for(var e=0;e<r.length;e++){var n=r[e],i=n.event;n=n.listeners;t:{var s=void 0;if(t)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break t;k1(i,o,c),s=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break t;k1(i,o,c),s=l}}}if(kp)throw r=Gm,kp=!1,Gm=null,r}function Kt(r,t){var e=t[nv];e===void 0&&(e=t[nv]=new Set);var n=r+"__bubble";e.has(n)||(jA(t,r,2,!1),e.add(n))}function cm(r,t,e){var n=0;t&&(n|=4),jA(e,r,n,t)}var wf="_reactListening"+Math.random().toString(36).slice(2);function lh(r){if(!r[wf]){r[wf]=!0,Xw.forEach(function(e){e!=="selectionchange"&&(W2.has(e)||cm(e,!1,r),cm(e,!0,r))});var t=r.nodeType===9?r:r.ownerDocument;t===null||t[wf]||(t[wf]=!0,cm("selectionchange",!1,t))}}function jA(r,t,e,n){switch(EA(t)){case 1:var i=i2;break;case 4:i=s2;break;default:i=e0}e=i.bind(null,t,e,r),i=void 0,!Vm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?r.addEventListener(t,e,{capture:!0,passive:i}):r.addEventListener(t,e,!0):i!==void 0?r.addEventListener(t,e,{passive:i}):r.addEventListener(t,e,!1)}function hm(r,t,e,n,i){var s=n;if(!(t&1)&&!(t&2)&&n!==null)t:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Ha(o),a===null)return;if(l=a.tag,l===5||l===6){n=s=a;continue t}o=o.parentNode}}n=n.return}uA(function(){var c=s,h=Qy(e),d=[];t:{var f=zA.get(r);if(f!==void 0){var p=r0,v=r;switch(r){case"keypress":if(jf(e)===0)break t;case"keydown":case"keyup":p=A2;break;case"focusin":v="focus",p=im;break;case"focusout":v="blur",p=im;break;case"beforeblur":case"afterblur":p=im;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=g1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=l2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=E2;break;case NA:case DA:case MA:p=h2;break;case FA:p=C2;break;case"scroll":p=a2;break;case"wheel":p=k2;break;case"copy":case"cut":case"paste":p=f2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=v1}var g=(t&4)!==0,A=!g&&r==="scroll",m=g?f!==null?f+"Capture":null:f;g=[];for(var y=c,w;y!==null;){w=y;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,m!==null&&(b=nh(y,m),b!=null&&g.push(uh(y,b,w)))),A)break;y=y.return}0<g.length&&(f=new p(f,v,null,e,h),d.push({event:f,listeners:g}))}}if(!(t&7)){t:{if(f=r==="mouseover"||r==="pointerover",p=r==="mouseout"||r==="pointerout",f&&e!==$m&&(v=e.relatedTarget||e.fromElement)&&(Ha(v)||v[ps]))break t;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(v=e.relatedTarget||e.toElement,p=c,v=v?Ha(v):null,v!==null&&(A=ll(v),v!==A||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=c),p!==v)){if(g=g1,b="onMouseLeave",m="onMouseEnter",y="mouse",(r==="pointerout"||r==="pointerover")&&(g=v1,b="onPointerLeave",m="onPointerEnter",y="pointer"),A=p==null?f:Cl(p),w=v==null?f:Cl(v),f=new g(b,y+"leave",p,e,h),f.target=A,f.relatedTarget=w,b=null,Ha(h)===c&&(g=new g(m,y+"enter",v,e,h),g.target=w,g.relatedTarget=A,b=g),A=b,p&&v)e:{for(g=p,m=v,y=0,w=g;w;w=hl(w))y++;for(w=0,b=m;b;b=hl(b))w++;for(;0<y-w;)g=hl(g),y--;for(;0<w-y;)m=hl(m),w--;for(;y--;){if(g===m||m!==null&&g===m.alternate)break e;g=hl(g),m=hl(m)}g=null}else g=null;p!==null&&R1(d,f,p,g,!1),v!==null&&A!==null&&R1(d,A,v,g,!0)}}t:{if(f=c?Cl(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var E=N2;else if(A1(f))if(IA)E=z2;else{E=M2;var T=D2}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=F2);if(E&&(E=E(r,c))){RA(d,E,e,h);break t}T&&T(r,f,c),r==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&zm(f,"number",f.value)}switch(T=c?Cl(c):window,r){case"focusin":(A1(T)||T.contentEditable==="true")&&(El=T,Zm=c,Kc=null);break;case"focusout":Kc=Zm=El=null;break;case"mousedown":Qm=!0;break;case"contextmenu":case"mouseup":case"dragend":Qm=!1,C1(d,e,h);break;case"selectionchange":if(U2)break;case"keydown":case"keyup":C1(d,e,h)}var R;if(s0)t:{switch(r){case"compositionstart":var P="onCompositionStart";break t;case"compositionend":P="onCompositionEnd";break t;case"compositionupdate":P="onCompositionUpdate";break t}P=void 0}else Sl?TA(r,e)&&(P="onCompositionEnd"):r==="keydown"&&e.keyCode===229&&(P="onCompositionStart");P&&(CA&&e.locale!=="ko"&&(Sl||P!=="onCompositionStart"?P==="onCompositionEnd"&&Sl&&(R=xA()):(pa=h,n0="value"in pa?pa.value:pa.textContent,Sl=!0)),T=Op(c,P),0<T.length&&(P=new m1(P,r,null,e,h),d.push({event:P,listeners:T}),R?P.data=R:(R=kA(e),R!==null&&(P.data=R)))),(R=I2?_2(r,e):P2(r,e))&&(c=Op(c,"onBeforeInput"),0<c.length&&(h=new m1("onBeforeInput","beforeinput",null,e,h),d.push({event:h,listeners:c}),h.data=R))}BA(d,t)})}function uh(r,t,e){return{instance:r,listener:t,currentTarget:e}}function Op(r,t){for(var e=t+"Capture",n=[];r!==null;){var i=r,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=nh(r,e),s!=null&&n.unshift(uh(r,s,i)),s=nh(r,t),s!=null&&n.push(uh(r,s,i))),r=r.return}return n}function hl(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function R1(r,t,e,n,i){for(var s=t._reactName,a=[];e!==null&&e!==n;){var o=e,l=o.alternate,c=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&c!==null&&(o=c,i?(l=nh(e,s),l!=null&&a.unshift(uh(e,l,o))):i||(l=nh(e,s),l!=null&&a.push(uh(e,l,o)))),e=e.return}a.length!==0&&r.push({event:t,listeners:a})}var V2=/\r\n?/g,G2=/\u0000|\uFFFD/g;function I1(r){return(typeof r=="string"?r:""+r).replace(V2,`
`).replace(G2,"")}function Af(r,t,e){if(t=I1(t),I1(r)!==t&&e)throw Error(rt(425))}function Lp(){}var Jm=null,qm=null;function tv(r,t){return r==="textarea"||r==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ev=typeof setTimeout=="function"?setTimeout:void 0,X2=typeof clearTimeout=="function"?clearTimeout:void 0,_1=typeof Promise=="function"?Promise:void 0,Y2=typeof queueMicrotask=="function"?queueMicrotask:typeof _1<"u"?function(r){return _1.resolve(null).then(r).catch(K2)}:ev;function K2(r){setTimeout(function(){throw r})}function dm(r,t){var e=t,n=0;do{var i=e.nextSibling;if(r.removeChild(e),i&&i.nodeType===8)if(e=i.data,e==="/$"){if(n===0){r.removeChild(i),sh(t);return}n--}else e!=="$"&&e!=="$?"&&e!=="$!"||n++;e=i}while(e);sh(t)}function wa(r){for(;r!=null;r=r.nextSibling){var t=r.nodeType;if(t===1||t===3)break;if(t===8){if(t=r.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return r}function P1(r){r=r.previousSibling;for(var t=0;r;){if(r.nodeType===8){var e=r.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return r;t--}else e==="/$"&&t++}r=r.previousSibling}return null}var ac=Math.random().toString(36).slice(2),gi="__reactFiber$"+ac,ch="__reactProps$"+ac,ps="__reactContainer$"+ac,nv="__reactEvents$"+ac,Z2="__reactListeners$"+ac,Q2="__reactHandles$"+ac;function Ha(r){var t=r[gi];if(t)return t;for(var e=r.parentNode;e;){if(t=e[ps]||e[gi]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(r=P1(r);r!==null;){if(e=r[gi])return e;r=P1(r)}return t}r=e,e=r.parentNode}return null}function Jd(r){return r=r[gi]||r[ps],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Cl(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(rt(33))}function _g(r){return r[ch]||null}var rv=[],Tl=-1;function Oa(r){return{current:r}}function Zt(r){0>Tl||(r.current=rv[Tl],rv[Tl]=null,Tl--)}function Xt(r,t){Tl++,rv[Tl]=r.current,r.current=t}var Ca={},rn=Oa(Ca),kn=Oa(!1),qo=Ca;function Ju(r,t){var e=r.type.contextTypes;if(!e)return Ca;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in e)i[s]=t[s];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=t,r.__reactInternalMemoizedMaskedChildContext=i),i}function Rn(r){return r=r.childContextTypes,r!=null}function Np(){Zt(kn),Zt(rn)}function O1(r,t,e){if(rn.current!==Ca)throw Error(rt(168));Xt(rn,t),Xt(kn,e)}function UA(r,t,e){var n=r.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return e;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(rt(108,Dx(r)||"Unknown",i));return ae({},e,n)}function Dp(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Ca,qo=rn.current,Xt(rn,r),Xt(kn,kn.current),!0}function L1(r,t,e){var n=r.stateNode;if(!n)throw Error(rt(169));e?(r=UA(r,t,qo),n.__reactInternalMemoizedMergedChildContext=r,Zt(kn),Zt(rn),Xt(rn,r)):Zt(kn),Xt(kn,e)}var Ri=null,Pg=!1,fm=!1;function HA(r){Ri===null?Ri=[r]:Ri.push(r)}function J2(r){Pg=!0,HA(r)}function La(){if(!fm&&Ri!==null){fm=!0;var r=0,t=Ut;try{var e=Ri;for(Ut=1;r<e.length;r++){var n=e[r];do n=n(!0);while(n!==null)}Ri=null,Pg=!1}catch(i){throw Ri!==null&&(Ri=Ri.slice(r+1)),fA(Jy,La),i}finally{Ut=t,fm=!1}}return null}var kl=[],Rl=0,Mp=null,Fp=0,dr=[],fr=0,tl=null,ls=1,us="";function Na(r,t){kl[Rl++]=Fp,kl[Rl++]=Mp,Mp=r,Fp=t}function $A(r,t,e){dr[fr++]=ls,dr[fr++]=us,dr[fr++]=tl,tl=r;var n=ls;r=us;var i=32-Br(n)-1;n&=~(1<<i),e+=1;var s=32-Br(t)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,ls=1<<32-Br(t)+i|e<<i|n,us=s+r}else ls=1<<s|e<<i|n,us=r}function o0(r){r.return!==null&&(Na(r,1),$A(r,1,0))}function l0(r){for(;r===Mp;)Mp=kl[--Rl],kl[Rl]=null,Fp=kl[--Rl],kl[Rl]=null;for(;r===tl;)tl=dr[--fr],dr[fr]=null,us=dr[--fr],dr[fr]=null,ls=dr[--fr],dr[fr]=null}var Qn=null,Zn=null,ee=!1,Fr=null;function WA(r,t){var e=gr(5,null,null,0);e.elementType="DELETED",e.stateNode=t,e.return=r,t=r.deletions,t===null?(r.deletions=[e],r.flags|=16):t.push(e)}function N1(r,t){switch(r.tag){case 5:var e=r.type;return t=t.nodeType!==1||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(r.stateNode=t,Qn=r,Zn=wa(t.firstChild),!0):!1;case 6:return t=r.pendingProps===""||t.nodeType!==3?null:t,t!==null?(r.stateNode=t,Qn=r,Zn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(e=tl!==null?{id:ls,overflow:us}:null,r.memoizedState={dehydrated:t,treeContext:e,retryLane:1073741824},e=gr(18,null,null,0),e.stateNode=t,e.return=r,r.child=e,Qn=r,Zn=null,!0):!1;default:return!1}}function iv(r){return(r.mode&1)!==0&&(r.flags&128)===0}function sv(r){if(ee){var t=Zn;if(t){var e=t;if(!N1(r,t)){if(iv(r))throw Error(rt(418));t=wa(e.nextSibling);var n=Qn;t&&N1(r,t)?WA(n,e):(r.flags=r.flags&-4097|2,ee=!1,Qn=r)}}else{if(iv(r))throw Error(rt(418));r.flags=r.flags&-4097|2,ee=!1,Qn=r}}}function D1(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Qn=r}function bf(r){if(r!==Qn)return!1;if(!ee)return D1(r),ee=!0,!1;var t;if((t=r.tag!==3)&&!(t=r.tag!==5)&&(t=r.type,t=t!=="head"&&t!=="body"&&!tv(r.type,r.memoizedProps)),t&&(t=Zn)){if(iv(r))throw VA(),Error(rt(418));for(;t;)WA(r,t),t=wa(t.nextSibling)}if(D1(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(rt(317));t:{for(r=r.nextSibling,t=0;r;){if(r.nodeType===8){var e=r.data;if(e==="/$"){if(t===0){Zn=wa(r.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++}r=r.nextSibling}Zn=null}}else Zn=Qn?wa(r.stateNode.nextSibling):null;return!0}function VA(){for(var r=Zn;r;)r=wa(r.nextSibling)}function qu(){Zn=Qn=null,ee=!1}function u0(r){Fr===null?Fr=[r]:Fr.push(r)}var q2=ys.ReactCurrentBatchConfig;function gc(r,t,e){if(r=e.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(rt(309));var n=e.stateNode}if(!n)throw Error(rt(147,r));var i=n,s=""+r;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof r!="string")throw Error(rt(284));if(!e._owner)throw Error(rt(290,r))}return r}function Sf(r,t){throw r=Object.prototype.toString.call(t),Error(rt(31,r==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":r))}function M1(r){var t=r._init;return t(r._payload)}function GA(r){function t(m,y){if(r){var w=m.deletions;w===null?(m.deletions=[y],m.flags|=16):w.push(y)}}function e(m,y){if(!r)return null;for(;y!==null;)t(m,y),y=y.sibling;return null}function n(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=Ea(m,y),m.index=0,m.sibling=null,m}function s(m,y,w){return m.index=w,r?(w=m.alternate,w!==null?(w=w.index,w<y?(m.flags|=2,y):w):(m.flags|=2,y)):(m.flags|=1048576,y)}function a(m){return r&&m.alternate===null&&(m.flags|=2),m}function o(m,y,w,b){return y===null||y.tag!==6?(y=Am(w,m.mode,b),y.return=m,y):(y=i(y,w),y.return=m,y)}function l(m,y,w,b){var E=w.type;return E===bl?h(m,y,w.props.children,b,w.key):y!==null&&(y.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===bs&&M1(E)===y.type)?(b=i(y,w.props),b.ref=gc(m,y,w),b.return=m,b):(b=Xf(w.type,w.key,w.props,null,m.mode,b),b.ref=gc(m,y,w),b.return=m,b)}function c(m,y,w,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=bm(w,m.mode,b),y.return=m,y):(y=i(y,w.children||[]),y.return=m,y)}function h(m,y,w,b,E){return y===null||y.tag!==7?(y=Jo(w,m.mode,b,E),y.return=m,y):(y=i(y,w),y.return=m,y)}function d(m,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Am(""+y,m.mode,w),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case hf:return w=Xf(y.type,y.key,y.props,null,m.mode,w),w.ref=gc(m,null,y),w.return=m,w;case Al:return y=bm(y,m.mode,w),y.return=m,y;case bs:var b=y._init;return d(m,b(y._payload),w)}if(Ec(y)||cc(y))return y=Jo(y,m.mode,w,null),y.return=m,y;Sf(m,y)}return null}function f(m,y,w,b){var E=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return E!==null?null:o(m,y,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case hf:return w.key===E?l(m,y,w,b):null;case Al:return w.key===E?c(m,y,w,b):null;case bs:return E=w._init,f(m,y,E(w._payload),b)}if(Ec(w)||cc(w))return E!==null?null:h(m,y,w,b,null);Sf(m,w)}return null}function p(m,y,w,b,E){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(w)||null,o(y,m,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case hf:return m=m.get(b.key===null?w:b.key)||null,l(y,m,b,E);case Al:return m=m.get(b.key===null?w:b.key)||null,c(y,m,b,E);case bs:var T=b._init;return p(m,y,w,T(b._payload),E)}if(Ec(b)||cc(b))return m=m.get(w)||null,h(y,m,b,E,null);Sf(y,b)}return null}function v(m,y,w,b){for(var E=null,T=null,R=y,P=y=0,_=null;R!==null&&P<w.length;P++){R.index>P?(_=R,R=null):_=R.sibling;var N=f(m,R,w[P],b);if(N===null){R===null&&(R=_);break}r&&R&&N.alternate===null&&t(m,R),y=s(N,y,P),T===null?E=N:T.sibling=N,T=N,R=_}if(P===w.length)return e(m,R),ee&&Na(m,P),E;if(R===null){for(;P<w.length;P++)R=d(m,w[P],b),R!==null&&(y=s(R,y,P),T===null?E=R:T.sibling=R,T=R);return ee&&Na(m,P),E}for(R=n(m,R);P<w.length;P++)_=p(R,m,P,w[P],b),_!==null&&(r&&_.alternate!==null&&R.delete(_.key===null?P:_.key),y=s(_,y,P),T===null?E=_:T.sibling=_,T=_);return r&&R.forEach(function(B){return t(m,B)}),ee&&Na(m,P),E}function g(m,y,w,b){var E=cc(w);if(typeof E!="function")throw Error(rt(150));if(w=E.call(w),w==null)throw Error(rt(151));for(var T=E=null,R=y,P=y=0,_=null,N=w.next();R!==null&&!N.done;P++,N=w.next()){R.index>P?(_=R,R=null):_=R.sibling;var B=f(m,R,N.value,b);if(B===null){R===null&&(R=_);break}r&&R&&B.alternate===null&&t(m,R),y=s(B,y,P),T===null?E=B:T.sibling=B,T=B,R=_}if(N.done)return e(m,R),ee&&Na(m,P),E;if(R===null){for(;!N.done;P++,N=w.next())N=d(m,N.value,b),N!==null&&(y=s(N,y,P),T===null?E=N:T.sibling=N,T=N);return ee&&Na(m,P),E}for(R=n(m,R);!N.done;P++,N=w.next())N=p(R,m,P,N.value,b),N!==null&&(r&&N.alternate!==null&&R.delete(N.key===null?P:N.key),y=s(N,y,P),T===null?E=N:T.sibling=N,T=N);return r&&R.forEach(function(O){return t(m,O)}),ee&&Na(m,P),E}function A(m,y,w,b){if(typeof w=="object"&&w!==null&&w.type===bl&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case hf:t:{for(var E=w.key,T=y;T!==null;){if(T.key===E){if(E=w.type,E===bl){if(T.tag===7){e(m,T.sibling),y=i(T,w.props.children),y.return=m,m=y;break t}}else if(T.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===bs&&M1(E)===T.type){e(m,T.sibling),y=i(T,w.props),y.ref=gc(m,T,w),y.return=m,m=y;break t}e(m,T);break}else t(m,T);T=T.sibling}w.type===bl?(y=Jo(w.props.children,m.mode,b,w.key),y.return=m,m=y):(b=Xf(w.type,w.key,w.props,null,m.mode,b),b.ref=gc(m,y,w),b.return=m,m=b)}return a(m);case Al:t:{for(T=w.key;y!==null;){if(y.key===T)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){e(m,y.sibling),y=i(y,w.children||[]),y.return=m,m=y;break t}else{e(m,y);break}else t(m,y);y=y.sibling}y=bm(w,m.mode,b),y.return=m,m=y}return a(m);case bs:return T=w._init,A(m,y,T(w._payload),b)}if(Ec(w))return v(m,y,w,b);if(cc(w))return g(m,y,w,b);Sf(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(e(m,y.sibling),y=i(y,w),y.return=m,m=y):(e(m,y),y=Am(w,m.mode,b),y.return=m,m=y),a(m)):e(m,y)}return A}var tc=GA(!0),XA=GA(!1),zp=Oa(null),Bp=null,Il=null,c0=null;function h0(){c0=Il=Bp=null}function d0(r){var t=zp.current;Zt(zp),r._currentValue=t}function av(r,t,e){for(;r!==null;){var n=r.alternate;if((r.childLanes&t)!==t?(r.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),r===e)break;r=r.return}}function Bl(r,t){Bp=r,c0=Il=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&t&&(Tn=!0),r.firstContext=null)}function yr(r){var t=r._currentValue;if(c0!==r)if(r={context:r,memoizedValue:t,next:null},Il===null){if(Bp===null)throw Error(rt(308));Il=r,Bp.dependencies={lanes:0,firstContext:r}}else Il=Il.next=r;return t}var $a=null;function f0(r){$a===null?$a=[r]:$a.push(r)}function YA(r,t,e,n){var i=t.interleaved;return i===null?(e.next=e,f0(t)):(e.next=i.next,i.next=e),t.interleaved=e,gs(r,n)}function gs(r,t){r.lanes|=t;var e=r.alternate;for(e!==null&&(e.lanes|=t),e=r,r=r.return;r!==null;)r.childLanes|=t,e=r.alternate,e!==null&&(e.childLanes|=t),e=r,r=r.return;return e.tag===3?e.stateNode:null}var Ss=!1;function p0(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function KA(r,t){r=r.updateQueue,t.updateQueue===r&&(t.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function cs(r,t){return{eventTime:r,lane:t,tag:0,payload:null,callback:null,next:null}}function Aa(r,t,e){var n=r.updateQueue;if(n===null)return null;if(n=n.shared,Nt&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,gs(r,e)}return i=n.interleaved,i===null?(t.next=t,f0(n)):(t.next=i.next,i.next=t),n.interleaved=t,gs(r,e)}function Uf(r,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194240)!==0)){var n=t.lanes;n&=r.pendingLanes,e|=n,t.lanes=e,qy(r,e)}}function F1(r,t){var e=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,e===n)){var i=null,s=null;if(e=e.firstBaseUpdate,e!==null){do{var a={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};s===null?i=s=a:s=s.next=a,e=e.next}while(e!==null);s===null?i=s=t:s=s.next=t}else i=s=t;e={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},r.updateQueue=e;return}r=e.lastBaseUpdate,r===null?e.firstBaseUpdate=t:r.next=t,e.lastBaseUpdate=t}function jp(r,t,e,n){var i=r.updateQueue;Ss=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var h=r.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;a=0,h=c=l=null,o=s;do{var f=o.lane,p=o.eventTime;if((n&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});t:{var v=r,g=o;switch(f=t,p=e,g.tag){case 1:if(v=g.payload,typeof v=="function"){d=v.call(p,d,f);break t}d=v;break t;case 3:v.flags=v.flags&-65537|128;case 0:if(v=g.payload,f=typeof v=="function"?v.call(p,d,f):v,f==null)break t;d=ae({},d,f);break t;case 2:Ss=!0}}o.callback!==null&&o.lane!==0&&(r.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(c=h=p,l=d):h=h.next=p,a|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);nl|=a,r.lanes=a,r.memoizedState=d}}function z1(r,t,e){if(r=t.effects,t.effects=null,r!==null)for(t=0;t<r.length;t++){var n=r[t],i=n.callback;if(i!==null){if(n.callback=null,n=e,typeof i!="function")throw Error(rt(191,i));i.call(n)}}}var qd={},yi=Oa(qd),hh=Oa(qd),dh=Oa(qd);function Wa(r){if(r===qd)throw Error(rt(174));return r}function g0(r,t){switch(Xt(dh,t),Xt(hh,r),Xt(yi,qd),r=t.nodeType,r){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:jm(null,"");break;default:r=r===8?t.parentNode:t,t=r.namespaceURI||null,r=r.tagName,t=jm(t,r)}Zt(yi),Xt(yi,t)}function ec(){Zt(yi),Zt(hh),Zt(dh)}function ZA(r){Wa(dh.current);var t=Wa(yi.current),e=jm(t,r.type);t!==e&&(Xt(hh,r),Xt(yi,e))}function m0(r){hh.current===r&&(Zt(yi),Zt(hh))}var ie=Oa(0);function Up(r){for(var t=r;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pm=[];function v0(){for(var r=0;r<pm.length;r++)pm[r]._workInProgressVersionPrimary=null;pm.length=0}var Hf=ys.ReactCurrentDispatcher,gm=ys.ReactCurrentBatchConfig,el=0,se=null,xe=null,Ne=null,Hp=!1,Zc=!1,fh=0,tC=0;function Ke(){throw Error(rt(321))}function y0(r,t){if(t===null)return!1;for(var e=0;e<t.length&&e<r.length;e++)if(!Ur(r[e],t[e]))return!1;return!0}function w0(r,t,e,n,i,s){if(el=s,se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Hf.current=r===null||r.memoizedState===null?iC:sC,r=e(n,i),Zc){s=0;do{if(Zc=!1,fh=0,25<=s)throw Error(rt(301));s+=1,Ne=xe=null,t.updateQueue=null,Hf.current=aC,r=e(n,i)}while(Zc)}if(Hf.current=$p,t=xe!==null&&xe.next!==null,el=0,Ne=xe=se=null,Hp=!1,t)throw Error(rt(300));return r}function A0(){var r=fh!==0;return fh=0,r}function Yr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?se.memoizedState=Ne=r:Ne=Ne.next=r,Ne}function wr(){if(xe===null){var r=se.alternate;r=r!==null?r.memoizedState:null}else r=xe.next;var t=Ne===null?se.memoizedState:Ne.next;if(t!==null)Ne=t,xe=r;else{if(r===null)throw Error(rt(310));xe=r,r={memoizedState:xe.memoizedState,baseState:xe.baseState,baseQueue:xe.baseQueue,queue:xe.queue,next:null},Ne===null?se.memoizedState=Ne=r:Ne=Ne.next=r}return Ne}function ph(r,t){return typeof t=="function"?t(r):t}function mm(r){var t=wr(),e=t.queue;if(e===null)throw Error(rt(311));e.lastRenderedReducer=r;var n=xe,i=n.baseQueue,s=e.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,e.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,l=null,c=s;do{var h=c.lane;if((el&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:r(n,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=d,a=n):l=l.next=d,se.lanes|=h,nl|=h}c=c.next}while(c!==null&&c!==s);l===null?a=n:l.next=o,Ur(n,t.memoizedState)||(Tn=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=l,e.lastRenderedState=n}if(r=e.interleaved,r!==null){i=r;do s=i.lane,se.lanes|=s,nl|=s,i=i.next;while(i!==r)}else i===null&&(e.lanes=0);return[t.memoizedState,e.dispatch]}function vm(r){var t=wr(),e=t.queue;if(e===null)throw Error(rt(311));e.lastRenderedReducer=r;var n=e.dispatch,i=e.pending,s=t.memoizedState;if(i!==null){e.pending=null;var a=i=i.next;do s=r(s,a.action),a=a.next;while(a!==i);Ur(s,t.memoizedState)||(Tn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),e.lastRenderedState=s}return[s,n]}function QA(){}function JA(r,t){var e=se,n=wr(),i=t(),s=!Ur(n.memoizedState,i);if(s&&(n.memoizedState=i,Tn=!0),n=n.queue,b0(eb.bind(null,e,n,r),[r]),n.getSnapshot!==t||s||Ne!==null&&Ne.memoizedState.tag&1){if(e.flags|=2048,gh(9,tb.bind(null,e,n,i,t),void 0,null),De===null)throw Error(rt(349));el&30||qA(e,t,i)}return i}function qA(r,t,e){r.flags|=16384,r={getSnapshot:t,value:e},t=se.updateQueue,t===null?(t={lastEffect:null,stores:null},se.updateQueue=t,t.stores=[r]):(e=t.stores,e===null?t.stores=[r]:e.push(r))}function tb(r,t,e,n){t.value=e,t.getSnapshot=n,nb(t)&&rb(r)}function eb(r,t,e){return e(function(){nb(t)&&rb(r)})}function nb(r){var t=r.getSnapshot;r=r.value;try{var e=t();return!Ur(r,e)}catch{return!0}}function rb(r){var t=gs(r,1);t!==null&&jr(t,r,1,-1)}function B1(r){var t=Yr();return typeof r=="function"&&(r=r()),t.memoizedState=t.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ph,lastRenderedState:r},t.queue=r,r=r.dispatch=rC.bind(null,se,r),[t.memoizedState,r]}function gh(r,t,e,n){return r={tag:r,create:t,destroy:e,deps:n,next:null},t=se.updateQueue,t===null?(t={lastEffect:null,stores:null},se.updateQueue=t,t.lastEffect=r.next=r):(e=t.lastEffect,e===null?t.lastEffect=r.next=r:(n=e.next,e.next=r,r.next=n,t.lastEffect=r)),r}function ib(){return wr().memoizedState}function $f(r,t,e,n){var i=Yr();se.flags|=r,i.memoizedState=gh(1|t,e,void 0,n===void 0?null:n)}function Og(r,t,e,n){var i=wr();n=n===void 0?null:n;var s=void 0;if(xe!==null){var a=xe.memoizedState;if(s=a.destroy,n!==null&&y0(n,a.deps)){i.memoizedState=gh(t,e,s,n);return}}se.flags|=r,i.memoizedState=gh(1|t,e,s,n)}function j1(r,t){return $f(8390656,8,r,t)}function b0(r,t){return Og(2048,8,r,t)}function sb(r,t){return Og(4,2,r,t)}function ab(r,t){return Og(4,4,r,t)}function ob(r,t){if(typeof t=="function")return r=r(),t(r),function(){t(null)};if(t!=null)return r=r(),t.current=r,function(){t.current=null}}function lb(r,t,e){return e=e!=null?e.concat([r]):null,Og(4,4,ob.bind(null,t,r),e)}function S0(){}function ub(r,t){var e=wr();t=t===void 0?null:t;var n=e.memoizedState;return n!==null&&t!==null&&y0(t,n[1])?n[0]:(e.memoizedState=[r,t],r)}function cb(r,t){var e=wr();t=t===void 0?null:t;var n=e.memoizedState;return n!==null&&t!==null&&y0(t,n[1])?n[0]:(r=r(),e.memoizedState=[r,t],r)}function hb(r,t,e){return el&21?(Ur(e,t)||(e=mA(),se.lanes|=e,nl|=e,r.baseState=!0),t):(r.baseState&&(r.baseState=!1,Tn=!0),r.memoizedState=e)}function eC(r,t){var e=Ut;Ut=e!==0&&4>e?e:4,r(!0);var n=gm.transition;gm.transition={};try{r(!1),t()}finally{Ut=e,gm.transition=n}}function db(){return wr().memoizedState}function nC(r,t,e){var n=Sa(r);if(e={lane:n,action:e,hasEagerState:!1,eagerState:null,next:null},fb(r))pb(t,e);else if(e=YA(r,t,e,n),e!==null){var i=gn();jr(e,r,n,i),gb(e,t,n)}}function rC(r,t,e){var n=Sa(r),i={lane:n,action:e,hasEagerState:!1,eagerState:null,next:null};if(fb(r))pb(t,i);else{var s=r.alternate;if(r.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,e);if(i.hasEagerState=!0,i.eagerState=o,Ur(o,a)){var l=t.interleaved;l===null?(i.next=i,f0(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}e=YA(r,t,i,n),e!==null&&(i=gn(),jr(e,r,n,i),gb(e,t,n))}}function fb(r){var t=r.alternate;return r===se||t!==null&&t===se}function pb(r,t){Zc=Hp=!0;var e=r.pending;e===null?t.next=t:(t.next=e.next,e.next=t),r.pending=t}function gb(r,t,e){if(e&4194240){var n=t.lanes;n&=r.pendingLanes,e|=n,t.lanes=e,qy(r,e)}}var $p={readContext:yr,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useInsertionEffect:Ke,useLayoutEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useMutableSource:Ke,useSyncExternalStore:Ke,useId:Ke,unstable_isNewReconciler:!1},iC={readContext:yr,useCallback:function(r,t){return Yr().memoizedState=[r,t===void 0?null:t],r},useContext:yr,useEffect:j1,useImperativeHandle:function(r,t,e){return e=e!=null?e.concat([r]):null,$f(4194308,4,ob.bind(null,t,r),e)},useLayoutEffect:function(r,t){return $f(4194308,4,r,t)},useInsertionEffect:function(r,t){return $f(4,2,r,t)},useMemo:function(r,t){var e=Yr();return t=t===void 0?null:t,r=r(),e.memoizedState=[r,t],r},useReducer:function(r,t,e){var n=Yr();return t=e!==void 0?e(t):t,n.memoizedState=n.baseState=t,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:t},n.queue=r,r=r.dispatch=nC.bind(null,se,r),[n.memoizedState,r]},useRef:function(r){var t=Yr();return r={current:r},t.memoizedState=r},useState:B1,useDebugValue:S0,useDeferredValue:function(r){return Yr().memoizedState=r},useTransition:function(){var r=B1(!1),t=r[0];return r=eC.bind(null,r[1]),Yr().memoizedState=r,[t,r]},useMutableSource:function(){},useSyncExternalStore:function(r,t,e){var n=se,i=Yr();if(ee){if(e===void 0)throw Error(rt(407));e=e()}else{if(e=t(),De===null)throw Error(rt(349));el&30||qA(n,t,e)}i.memoizedState=e;var s={value:e,getSnapshot:t};return i.queue=s,j1(eb.bind(null,n,s,r),[r]),n.flags|=2048,gh(9,tb.bind(null,n,s,e,t),void 0,null),e},useId:function(){var r=Yr(),t=De.identifierPrefix;if(ee){var e=us,n=ls;e=(n&~(1<<32-Br(n)-1)).toString(32)+e,t=":"+t+"R"+e,e=fh++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=tC++,t=":"+t+"r"+e.toString(32)+":";return r.memoizedState=t},unstable_isNewReconciler:!1},sC={readContext:yr,useCallback:ub,useContext:yr,useEffect:b0,useImperativeHandle:lb,useInsertionEffect:sb,useLayoutEffect:ab,useMemo:cb,useReducer:mm,useRef:ib,useState:function(){return mm(ph)},useDebugValue:S0,useDeferredValue:function(r){var t=wr();return hb(t,xe.memoizedState,r)},useTransition:function(){var r=mm(ph)[0],t=wr().memoizedState;return[r,t]},useMutableSource:QA,useSyncExternalStore:JA,useId:db,unstable_isNewReconciler:!1},aC={readContext:yr,useCallback:ub,useContext:yr,useEffect:b0,useImperativeHandle:lb,useInsertionEffect:sb,useLayoutEffect:ab,useMemo:cb,useReducer:vm,useRef:ib,useState:function(){return vm(ph)},useDebugValue:S0,useDeferredValue:function(r){var t=wr();return xe===null?t.memoizedState=r:hb(t,xe.memoizedState,r)},useTransition:function(){var r=vm(ph)[0],t=wr().memoizedState;return[r,t]},useMutableSource:QA,useSyncExternalStore:JA,useId:db,unstable_isNewReconciler:!1};function Er(r,t){if(r&&r.defaultProps){t=ae({},t),r=r.defaultProps;for(var e in r)t[e]===void 0&&(t[e]=r[e]);return t}return t}function ov(r,t,e,n){t=r.memoizedState,e=e(n,t),e=e==null?t:ae({},t,e),r.memoizedState=e,r.lanes===0&&(r.updateQueue.baseState=e)}var Lg={isMounted:function(r){return(r=r._reactInternals)?ll(r)===r:!1},enqueueSetState:function(r,t,e){r=r._reactInternals;var n=gn(),i=Sa(r),s=cs(n,i);s.payload=t,e!=null&&(s.callback=e),t=Aa(r,s,i),t!==null&&(jr(t,r,i,n),Uf(t,r,i))},enqueueReplaceState:function(r,t,e){r=r._reactInternals;var n=gn(),i=Sa(r),s=cs(n,i);s.tag=1,s.payload=t,e!=null&&(s.callback=e),t=Aa(r,s,i),t!==null&&(jr(t,r,i,n),Uf(t,r,i))},enqueueForceUpdate:function(r,t){r=r._reactInternals;var e=gn(),n=Sa(r),i=cs(e,n);i.tag=2,t!=null&&(i.callback=t),t=Aa(r,i,n),t!==null&&(jr(t,r,n,e),Uf(t,r,n))}};function U1(r,t,e,n,i,s,a){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,s,a):t.prototype&&t.prototype.isPureReactComponent?!oh(e,n)||!oh(i,s):!0}function mb(r,t,e){var n=!1,i=Ca,s=t.contextType;return typeof s=="object"&&s!==null?s=yr(s):(i=Rn(t)?qo:rn.current,n=t.contextTypes,s=(n=n!=null)?Ju(r,i):Ca),t=new t(e,s),r.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Lg,r.stateNode=t,t._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=s),t}function H1(r,t,e,n){r=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,n),t.state!==r&&Lg.enqueueReplaceState(t,t.state,null)}function lv(r,t,e,n){var i=r.stateNode;i.props=e,i.state=r.memoizedState,i.refs={},p0(r);var s=t.contextType;typeof s=="object"&&s!==null?i.context=yr(s):(s=Rn(t)?qo:rn.current,i.context=Ju(r,s)),i.state=r.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(ov(r,t,s,e),i.state=r.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Lg.enqueueReplaceState(i,i.state,null),jp(r,e,i,n),i.state=r.memoizedState),typeof i.componentDidMount=="function"&&(r.flags|=4194308)}function nc(r,t){try{var e="",n=t;do e+=Nx(n),n=n.return;while(n);var i=e}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:r,source:t,stack:i,digest:null}}function ym(r,t,e){return{value:r,source:null,stack:e??null,digest:t??null}}function uv(r,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var oC=typeof WeakMap=="function"?WeakMap:Map;function vb(r,t,e){e=cs(-1,e),e.tag=3,e.payload={element:null};var n=t.value;return e.callback=function(){Vp||(Vp=!0,wv=n),uv(r,t)},e}function yb(r,t,e){e=cs(-1,e),e.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;e.payload=function(){return n(i)},e.callback=function(){uv(r,t)}}var s=r.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(e.callback=function(){uv(r,t),typeof n!="function"&&(ba===null?ba=new Set([this]):ba.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),e}function $1(r,t,e){var n=r.pingCache;if(n===null){n=r.pingCache=new oC;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(e)||(i.add(e),r=bC.bind(null,r,t,e),t.then(r,r))}function W1(r){do{var t;if((t=r.tag===13)&&(t=r.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return r;r=r.return}while(r!==null);return null}function V1(r,t,e,n,i){return r.mode&1?(r.flags|=65536,r.lanes=i,r):(r===t?r.flags|=65536:(r.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(t=cs(-1,1),t.tag=2,Aa(e,t,1))),e.lanes|=1),r)}var lC=ys.ReactCurrentOwner,Tn=!1;function fn(r,t,e,n){t.child=r===null?XA(t,null,e,n):tc(t,r.child,e,n)}function G1(r,t,e,n,i){e=e.render;var s=t.ref;return Bl(t,i),n=w0(r,t,e,n,s,i),e=A0(),r!==null&&!Tn?(t.updateQueue=r.updateQueue,t.flags&=-2053,r.lanes&=~i,ms(r,t,i)):(ee&&e&&o0(t),t.flags|=1,fn(r,t,n,i),t.child)}function X1(r,t,e,n,i){if(r===null){var s=e.type;return typeof s=="function"&&!_0(s)&&s.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(t.tag=15,t.type=s,wb(r,t,s,n,i)):(r=Xf(e.type,null,n,t,t.mode,i),r.ref=t.ref,r.return=t,t.child=r)}if(s=r.child,!(r.lanes&i)){var a=s.memoizedProps;if(e=e.compare,e=e!==null?e:oh,e(a,n)&&r.ref===t.ref)return ms(r,t,i)}return t.flags|=1,r=Ea(s,n),r.ref=t.ref,r.return=t,t.child=r}function wb(r,t,e,n,i){if(r!==null){var s=r.memoizedProps;if(oh(s,n)&&r.ref===t.ref)if(Tn=!1,t.pendingProps=n=s,(r.lanes&i)!==0)r.flags&131072&&(Tn=!0);else return t.lanes=r.lanes,ms(r,t,i)}return cv(r,t,e,n,i)}function Ab(r,t,e){var n=t.pendingProps,i=n.children,s=r!==null?r.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xt(Pl,Xn),Xn|=e;else{if(!(e&1073741824))return r=s!==null?s.baseLanes|e:e,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:r,cachePool:null,transitions:null},t.updateQueue=null,Xt(Pl,Xn),Xn|=r,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:e,Xt(Pl,Xn),Xn|=n}else s!==null?(n=s.baseLanes|e,t.memoizedState=null):n=e,Xt(Pl,Xn),Xn|=n;return fn(r,t,i,e),t.child}function bb(r,t){var e=t.ref;(r===null&&e!==null||r!==null&&r.ref!==e)&&(t.flags|=512,t.flags|=2097152)}function cv(r,t,e,n,i){var s=Rn(e)?qo:rn.current;return s=Ju(t,s),Bl(t,i),e=w0(r,t,e,n,s,i),n=A0(),r!==null&&!Tn?(t.updateQueue=r.updateQueue,t.flags&=-2053,r.lanes&=~i,ms(r,t,i)):(ee&&n&&o0(t),t.flags|=1,fn(r,t,e,i),t.child)}function Y1(r,t,e,n,i){if(Rn(e)){var s=!0;Dp(t)}else s=!1;if(Bl(t,i),t.stateNode===null)Wf(r,t),mb(t,e,n),lv(t,e,n,i),n=!0;else if(r===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=e.contextType;typeof c=="object"&&c!==null?c=yr(c):(c=Rn(e)?qo:rn.current,c=Ju(t,c));var h=e.getDerivedStateFromProps,d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==c)&&H1(t,a,n,c),Ss=!1;var f=t.memoizedState;a.state=f,jp(t,n,a,i),l=t.memoizedState,o!==n||f!==l||kn.current||Ss?(typeof h=="function"&&(ov(t,e,h,n),l=t.memoizedState),(o=Ss||U1(t,e,o,n,f,l,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=c,n=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,KA(r,t),o=t.memoizedProps,c=t.type===t.elementType?o:Er(t.type,o),a.props=c,d=t.pendingProps,f=a.context,l=e.contextType,typeof l=="object"&&l!==null?l=yr(l):(l=Rn(e)?qo:rn.current,l=Ju(t,l));var p=e.getDerivedStateFromProps;(h=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||f!==l)&&H1(t,a,n,l),Ss=!1,f=t.memoizedState,a.state=f,jp(t,n,a,i);var v=t.memoizedState;o!==d||f!==v||kn.current||Ss?(typeof p=="function"&&(ov(t,e,p,n),v=t.memoizedState),(c=Ss||U1(t,e,c,n,f,v,l)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,v,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,v,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===r.memoizedProps&&f===r.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===r.memoizedProps&&f===r.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),a.props=n,a.state=v,a.context=l,n=c):(typeof a.componentDidUpdate!="function"||o===r.memoizedProps&&f===r.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===r.memoizedProps&&f===r.memoizedState||(t.flags|=1024),n=!1)}return hv(r,t,e,n,s,i)}function hv(r,t,e,n,i,s){bb(r,t);var a=(t.flags&128)!==0;if(!n&&!a)return i&&L1(t,e,!1),ms(r,t,s);n=t.stateNode,lC.current=t;var o=a&&typeof e.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,r!==null&&a?(t.child=tc(t,r.child,null,s),t.child=tc(t,null,o,s)):fn(r,t,o,s),t.memoizedState=n.state,i&&L1(t,e,!0),t.child}function Sb(r){var t=r.stateNode;t.pendingContext?O1(r,t.pendingContext,t.pendingContext!==t.context):t.context&&O1(r,t.context,!1),g0(r,t.containerInfo)}function K1(r,t,e,n,i){return qu(),u0(i),t.flags|=256,fn(r,t,e,n),t.child}var dv={dehydrated:null,treeContext:null,retryLane:0};function fv(r){return{baseLanes:r,cachePool:null,transitions:null}}function Eb(r,t,e){var n=t.pendingProps,i=ie.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=r!==null&&r.memoizedState===null?!1:(i&2)!==0),o?(s=!0,t.flags&=-129):(r===null||r.memoizedState!==null)&&(i|=1),Xt(ie,i&1),r===null)return sv(t),r=t.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(t.mode&1?r.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,r=n.fallback,s?(n=t.mode,s=t.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Mg(a,n,0,null),r=Jo(r,n,e,null),s.return=t,r.return=t,s.sibling=r,t.child=s,t.child.memoizedState=fv(e),t.memoizedState=dv,r):E0(t,a));if(i=r.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return uC(r,t,a,n,o,i,e);if(s){s=n.fallback,a=t.mode,i=r.child,o=i.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=Ea(i,l),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Ea(o,s):(s=Jo(s,a,e,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,a=r.child.memoizedState,a=a===null?fv(e):{baseLanes:a.baseLanes|e,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=r.childLanes&~e,t.memoizedState=dv,n}return s=r.child,r=s.sibling,n=Ea(s,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=e),n.return=t,n.sibling=null,r!==null&&(e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)),t.child=n,t.memoizedState=null,n}function E0(r,t){return t=Mg({mode:"visible",children:t},r.mode,0,null),t.return=r,r.child=t}function Ef(r,t,e,n){return n!==null&&u0(n),tc(t,r.child,null,e),r=E0(t,t.pendingProps.children),r.flags|=2,t.memoizedState=null,r}function uC(r,t,e,n,i,s,a){if(e)return t.flags&256?(t.flags&=-257,n=ym(Error(rt(422))),Ef(r,t,a,n)):t.memoizedState!==null?(t.child=r.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=Mg({mode:"visible",children:n.children},i,0,null),s=Jo(s,i,a,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,t.mode&1&&tc(t,r.child,null,a),t.child.memoizedState=fv(a),t.memoizedState=dv,s);if(!(t.mode&1))return Ef(r,t,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(rt(419)),n=ym(s,n,void 0),Ef(r,t,a,n)}if(o=(a&r.childLanes)!==0,Tn||o){if(n=De,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,gs(r,i),jr(n,r,i,-1))}return I0(),n=ym(Error(rt(421))),Ef(r,t,a,n)}return i.data==="$?"?(t.flags|=128,t.child=r.child,t=SC.bind(null,r),i._reactRetry=t,null):(r=s.treeContext,Zn=wa(i.nextSibling),Qn=t,ee=!0,Fr=null,r!==null&&(dr[fr++]=ls,dr[fr++]=us,dr[fr++]=tl,ls=r.id,us=r.overflow,tl=t),t=E0(t,n.children),t.flags|=4096,t)}function Z1(r,t,e){r.lanes|=t;var n=r.alternate;n!==null&&(n.lanes|=t),av(r.return,t,e)}function wm(r,t,e,n,i){var s=r.memoizedState;s===null?r.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:e,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=e,s.tailMode=i)}function xb(r,t,e){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(fn(r,t,n.children,e),n=ie.current,n&2)n=n&1|2,t.flags|=128;else{if(r!==null&&r.flags&128)t:for(r=t.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Z1(r,e,t);else if(r.tag===19)Z1(r,e,t);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break t;for(;r.sibling===null;){if(r.return===null||r.return===t)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(Xt(ie,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(e=t.child,i=null;e!==null;)r=e.alternate,r!==null&&Up(r)===null&&(i=e),e=e.sibling;e=i,e===null?(i=t.child,t.child=null):(i=e.sibling,e.sibling=null),wm(t,!1,i,e,s);break;case"backwards":for(e=null,i=t.child,t.child=null;i!==null;){if(r=i.alternate,r!==null&&Up(r)===null){t.child=i;break}r=i.sibling,i.sibling=e,e=i,i=r}wm(t,!0,e,null,s);break;case"together":wm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wf(r,t){!(t.mode&1)&&r!==null&&(r.alternate=null,t.alternate=null,t.flags|=2)}function ms(r,t,e){if(r!==null&&(t.dependencies=r.dependencies),nl|=t.lanes,!(e&t.childLanes))return null;if(r!==null&&t.child!==r.child)throw Error(rt(153));if(t.child!==null){for(r=t.child,e=Ea(r,r.pendingProps),t.child=e,e.return=t;r.sibling!==null;)r=r.sibling,e=e.sibling=Ea(r,r.pendingProps),e.return=t;e.sibling=null}return t.child}function cC(r,t,e){switch(t.tag){case 3:Sb(t),qu();break;case 5:ZA(t);break;case 1:Rn(t.type)&&Dp(t);break;case 4:g0(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Xt(zp,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Xt(ie,ie.current&1),t.flags|=128,null):e&t.child.childLanes?Eb(r,t,e):(Xt(ie,ie.current&1),r=ms(r,t,e),r!==null?r.sibling:null);Xt(ie,ie.current&1);break;case 19:if(n=(e&t.childLanes)!==0,r.flags&128){if(n)return xb(r,t,e);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Xt(ie,ie.current),n)break;return null;case 22:case 23:return t.lanes=0,Ab(r,t,e)}return ms(r,t,e)}var Cb,pv,Tb,kb;Cb=function(r,t){for(var e=t.child;e!==null;){if(e.tag===5||e.tag===6)r.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};pv=function(){};Tb=function(r,t,e,n){var i=r.memoizedProps;if(i!==n){r=t.stateNode,Wa(yi.current);var s=null;switch(e){case"input":i=Mm(r,i),n=Mm(r,n),s=[];break;case"select":i=ae({},i,{value:void 0}),n=ae({},n,{value:void 0}),s=[];break;case"textarea":i=Bm(r,i),n=Bm(r,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=Lp)}Um(e,n);var a;e=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var o=i[c];for(a in o)o.hasOwnProperty(a)&&(e||(e={}),e[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(th.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(o=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(e||(e={}),e[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(e||(e={}),e[a]=l[a])}else e||(s||(s=[]),s.push(c,e)),e=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(th.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Kt("scroll",r),s||o===l||(s=[])):(s=s||[]).push(c,l))}e&&(s=s||[]).push("style",e);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};kb=function(r,t,e,n){e!==n&&(t.flags|=4)};function mc(r,t){if(!ee)switch(r.tailMode){case"hidden":t=r.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?r.tail=null:e.sibling=null;break;case"collapsed":e=r.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function Ze(r){var t=r.alternate!==null&&r.alternate.child===r.child,e=0,n=0;if(t)for(var i=r.child;i!==null;)e|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=r,i=i.sibling;else for(i=r.child;i!==null;)e|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=r,i=i.sibling;return r.subtreeFlags|=n,r.childLanes=e,t}function hC(r,t,e){var n=t.pendingProps;switch(l0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(t),null;case 1:return Rn(t.type)&&Np(),Ze(t),null;case 3:return n=t.stateNode,ec(),Zt(kn),Zt(rn),v0(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(bf(t)?t.flags|=4:r===null||r.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Fr!==null&&(Sv(Fr),Fr=null))),pv(r,t),Ze(t),null;case 5:m0(t);var i=Wa(dh.current);if(e=t.type,r!==null&&t.stateNode!=null)Tb(r,t,e,n,i),r.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(rt(166));return Ze(t),null}if(r=Wa(yi.current),bf(t)){n=t.stateNode,e=t.type;var s=t.memoizedProps;switch(n[gi]=t,n[ch]=s,r=(t.mode&1)!==0,e){case"dialog":Kt("cancel",n),Kt("close",n);break;case"iframe":case"object":case"embed":Kt("load",n);break;case"video":case"audio":for(i=0;i<Cc.length;i++)Kt(Cc[i],n);break;case"source":Kt("error",n);break;case"img":case"image":case"link":Kt("error",n),Kt("load",n);break;case"details":Kt("toggle",n);break;case"input":s1(n,s),Kt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Kt("invalid",n);break;case"textarea":o1(n,s),Kt("invalid",n)}Um(e,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&Af(n.textContent,o,r),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Af(n.textContent,o,r),i=["children",""+o]):th.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Kt("scroll",n)}switch(e){case"input":df(n),a1(n,s,!0);break;case"textarea":df(n),l1(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Lp)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=eA(e)),r==="http://www.w3.org/1999/xhtml"?e==="script"?(r=a.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=a.createElement(e,{is:n.is}):(r=a.createElement(e),e==="select"&&(a=r,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):r=a.createElementNS(r,e),r[gi]=t,r[ch]=n,Cb(r,t,!1,!1),t.stateNode=r;t:{switch(a=Hm(e,n),e){case"dialog":Kt("cancel",r),Kt("close",r),i=n;break;case"iframe":case"object":case"embed":Kt("load",r),i=n;break;case"video":case"audio":for(i=0;i<Cc.length;i++)Kt(Cc[i],r);i=n;break;case"source":Kt("error",r),i=n;break;case"img":case"image":case"link":Kt("error",r),Kt("load",r),i=n;break;case"details":Kt("toggle",r),i=n;break;case"input":s1(r,n),i=Mm(r,n),Kt("invalid",r);break;case"option":i=n;break;case"select":r._wrapperState={wasMultiple:!!n.multiple},i=ae({},n,{value:void 0}),Kt("invalid",r);break;case"textarea":o1(r,n),i=Bm(r,n),Kt("invalid",r);break;default:i=n}Um(e,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?iA(r,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&nA(r,l)):s==="children"?typeof l=="string"?(e!=="textarea"||l!=="")&&eh(r,l):typeof l=="number"&&eh(r,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(th.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Kt("scroll",r):l!=null&&Xy(r,s,l,a))}switch(e){case"input":df(r),a1(r,n,!1);break;case"textarea":df(r),l1(r);break;case"option":n.value!=null&&r.setAttribute("value",""+xa(n.value));break;case"select":r.multiple=!!n.multiple,s=n.value,s!=null?Dl(r,!!n.multiple,s,!1):n.defaultValue!=null&&Dl(r,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(r.onclick=Lp)}switch(e){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break t;case"img":n=!0;break t;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ze(t),null;case 6:if(r&&t.stateNode!=null)kb(r,t,r.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(rt(166));if(e=Wa(dh.current),Wa(yi.current),bf(t)){if(n=t.stateNode,e=t.memoizedProps,n[gi]=t,(s=n.nodeValue!==e)&&(r=Qn,r!==null))switch(r.tag){case 3:Af(n.nodeValue,e,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Af(n.nodeValue,e,(r.mode&1)!==0)}s&&(t.flags|=4)}else n=(e.nodeType===9?e:e.ownerDocument).createTextNode(n),n[gi]=t,t.stateNode=n}return Ze(t),null;case 13:if(Zt(ie),n=t.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(ee&&Zn!==null&&t.mode&1&&!(t.flags&128))VA(),qu(),t.flags|=98560,s=!1;else if(s=bf(t),n!==null&&n.dehydrated!==null){if(r===null){if(!s)throw Error(rt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(rt(317));s[gi]=t}else qu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ze(t),s=!1}else Fr!==null&&(Sv(Fr),Fr=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=e,t):(n=n!==null,n!==(r!==null&&r.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(r===null||ie.current&1?Ce===0&&(Ce=3):I0())),t.updateQueue!==null&&(t.flags|=4),Ze(t),null);case 4:return ec(),pv(r,t),r===null&&lh(t.stateNode.containerInfo),Ze(t),null;case 10:return d0(t.type._context),Ze(t),null;case 17:return Rn(t.type)&&Np(),Ze(t),null;case 19:if(Zt(ie),s=t.memoizedState,s===null)return Ze(t),null;if(n=(t.flags&128)!==0,a=s.rendering,a===null)if(n)mc(s,!1);else{if(Ce!==0||r!==null&&r.flags&128)for(r=t.child;r!==null;){if(a=Up(r),a!==null){for(t.flags|=128,mc(s,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=e,e=t.child;e!==null;)s=e,r=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,r=a.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),e=e.sibling;return Xt(ie,ie.current&1|2),t.child}r=r.sibling}s.tail!==null&&de()>rc&&(t.flags|=128,n=!0,mc(s,!1),t.lanes=4194304)}else{if(!n)if(r=Up(a),r!==null){if(t.flags|=128,n=!0,e=r.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),mc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!ee)return Ze(t),null}else 2*de()-s.renderingStartTime>rc&&e!==1073741824&&(t.flags|=128,n=!0,mc(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(e=s.last,e!==null?e.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=de(),t.sibling=null,e=ie.current,Xt(ie,n?e&1|2:e&1),t):(Ze(t),null);case 22:case 23:return R0(),n=t.memoizedState!==null,r!==null&&r.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Xn&1073741824&&(Ze(t),t.subtreeFlags&6&&(t.flags|=8192)):Ze(t),null;case 24:return null;case 25:return null}throw Error(rt(156,t.tag))}function dC(r,t){switch(l0(t),t.tag){case 1:return Rn(t.type)&&Np(),r=t.flags,r&65536?(t.flags=r&-65537|128,t):null;case 3:return ec(),Zt(kn),Zt(rn),v0(),r=t.flags,r&65536&&!(r&128)?(t.flags=r&-65537|128,t):null;case 5:return m0(t),null;case 13:if(Zt(ie),r=t.memoizedState,r!==null&&r.dehydrated!==null){if(t.alternate===null)throw Error(rt(340));qu()}return r=t.flags,r&65536?(t.flags=r&-65537|128,t):null;case 19:return Zt(ie),null;case 4:return ec(),null;case 10:return d0(t.type._context),null;case 22:case 23:return R0(),null;case 24:return null;default:return null}}var xf=!1,nn=!1,fC=typeof WeakSet=="function"?WeakSet:Set,pt=null;function _l(r,t){var e=r.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(n){le(r,t,n)}else e.current=null}function gv(r,t,e){try{e()}catch(n){le(r,t,n)}}var Q1=!1;function pC(r,t){if(Jm=_p,r=OA(),a0(r)){if("selectionStart"in r)var e={start:r.selectionStart,end:r.selectionEnd};else t:{e=(e=r.ownerDocument)&&e.defaultView||window;var n=e.getSelection&&e.getSelection();if(n&&n.rangeCount!==0){e=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{e.nodeType,s.nodeType}catch{e=null;break t}var a=0,o=-1,l=-1,c=0,h=0,d=r,f=null;e:for(;;){for(var p;d!==e||i!==0&&d.nodeType!==3||(o=a+i),d!==s||n!==0&&d.nodeType!==3||(l=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===r)break e;if(f===e&&++c===i&&(o=a),f===s&&++h===n&&(l=a),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}e=o===-1||l===-1?null:{start:o,end:l}}else e=null}e=e||{start:0,end:0}}else e=null;for(qm={focusedElem:r,selectionRange:e},_p=!1,pt=t;pt!==null;)if(t=pt,r=t.child,(t.subtreeFlags&1028)!==0&&r!==null)r.return=t,pt=r;else for(;pt!==null;){t=pt;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var g=v.memoizedProps,A=v.memoizedState,m=t.stateNode,y=m.getSnapshotBeforeUpdate(t.elementType===t.type?g:Er(t.type,g),A);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(rt(163))}}catch(b){le(t,t.return,b)}if(r=t.sibling,r!==null){r.return=t.return,pt=r;break}pt=t.return}return v=Q1,Q1=!1,v}function Qc(r,t,e){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&r)===r){var s=i.destroy;i.destroy=void 0,s!==void 0&&gv(t,e,s)}i=i.next}while(i!==n)}}function Ng(r,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var e=t=t.next;do{if((e.tag&r)===r){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}}function mv(r){var t=r.ref;if(t!==null){var e=r.stateNode;switch(r.tag){case 5:r=e;break;default:r=e}typeof t=="function"?t(r):t.current=r}}function Rb(r){var t=r.alternate;t!==null&&(r.alternate=null,Rb(t)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(t=r.stateNode,t!==null&&(delete t[gi],delete t[ch],delete t[nv],delete t[Z2],delete t[Q2])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Ib(r){return r.tag===5||r.tag===3||r.tag===4}function J1(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||Ib(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function vv(r,t,e){var n=r.tag;if(n===5||n===6)r=r.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(r,t):e.insertBefore(r,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(r,e)):(t=e,t.appendChild(r)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=Lp));else if(n!==4&&(r=r.child,r!==null))for(vv(r,t,e),r=r.sibling;r!==null;)vv(r,t,e),r=r.sibling}function yv(r,t,e){var n=r.tag;if(n===5||n===6)r=r.stateNode,t?e.insertBefore(r,t):e.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for(yv(r,t,e),r=r.sibling;r!==null;)yv(r,t,e),r=r.sibling}var He=null,Mr=!1;function ws(r,t,e){for(e=e.child;e!==null;)_b(r,t,e),e=e.sibling}function _b(r,t,e){if(vi&&typeof vi.onCommitFiberUnmount=="function")try{vi.onCommitFiberUnmount(Tg,e)}catch{}switch(e.tag){case 5:nn||_l(e,t);case 6:var n=He,i=Mr;He=null,ws(r,t,e),He=n,Mr=i,He!==null&&(Mr?(r=He,e=e.stateNode,r.nodeType===8?r.parentNode.removeChild(e):r.removeChild(e)):He.removeChild(e.stateNode));break;case 18:He!==null&&(Mr?(r=He,e=e.stateNode,r.nodeType===8?dm(r.parentNode,e):r.nodeType===1&&dm(r,e),sh(r)):dm(He,e.stateNode));break;case 4:n=He,i=Mr,He=e.stateNode.containerInfo,Mr=!0,ws(r,t,e),He=n,Mr=i;break;case 0:case 11:case 14:case 15:if(!nn&&(n=e.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&gv(e,t,a),i=i.next}while(i!==n)}ws(r,t,e);break;case 1:if(!nn&&(_l(e,t),n=e.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=e.memoizedProps,n.state=e.memoizedState,n.componentWillUnmount()}catch(o){le(e,t,o)}ws(r,t,e);break;case 21:ws(r,t,e);break;case 22:e.mode&1?(nn=(n=nn)||e.memoizedState!==null,ws(r,t,e),nn=n):ws(r,t,e);break;default:ws(r,t,e)}}function q1(r){var t=r.updateQueue;if(t!==null){r.updateQueue=null;var e=r.stateNode;e===null&&(e=r.stateNode=new fC),t.forEach(function(n){var i=EC.bind(null,r,n);e.has(n)||(e.add(n),n.then(i,i))})}}function br(r,t){var e=t.deletions;if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];try{var s=r,a=t,o=a;t:for(;o!==null;){switch(o.tag){case 5:He=o.stateNode,Mr=!1;break t;case 3:He=o.stateNode.containerInfo,Mr=!0;break t;case 4:He=o.stateNode.containerInfo,Mr=!0;break t}o=o.return}if(He===null)throw Error(rt(160));_b(s,a,i),He=null,Mr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){le(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Pb(t,r),t=t.sibling}function Pb(r,t){var e=r.alternate,n=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(br(t,r),Wr(r),n&4){try{Qc(3,r,r.return),Ng(3,r)}catch(g){le(r,r.return,g)}try{Qc(5,r,r.return)}catch(g){le(r,r.return,g)}}break;case 1:br(t,r),Wr(r),n&512&&e!==null&&_l(e,e.return);break;case 5:if(br(t,r),Wr(r),n&512&&e!==null&&_l(e,e.return),r.flags&32){var i=r.stateNode;try{eh(i,"")}catch(g){le(r,r.return,g)}}if(n&4&&(i=r.stateNode,i!=null)){var s=r.memoizedProps,a=e!==null?e.memoizedProps:s,o=r.type,l=r.updateQueue;if(r.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&qw(i,s),Hm(o,a);var c=Hm(o,s);for(a=0;a<l.length;a+=2){var h=l[a],d=l[a+1];h==="style"?iA(i,d):h==="dangerouslySetInnerHTML"?nA(i,d):h==="children"?eh(i,d):Xy(i,h,d,c)}switch(o){case"input":Fm(i,s);break;case"textarea":tA(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Dl(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Dl(i,!!s.multiple,s.defaultValue,!0):Dl(i,!!s.multiple,s.multiple?[]:"",!1))}i[ch]=s}catch(g){le(r,r.return,g)}}break;case 6:if(br(t,r),Wr(r),n&4){if(r.stateNode===null)throw Error(rt(162));i=r.stateNode,s=r.memoizedProps;try{i.nodeValue=s}catch(g){le(r,r.return,g)}}break;case 3:if(br(t,r),Wr(r),n&4&&e!==null&&e.memoizedState.isDehydrated)try{sh(t.containerInfo)}catch(g){le(r,r.return,g)}break;case 4:br(t,r),Wr(r);break;case 13:br(t,r),Wr(r),i=r.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(T0=de())),n&4&&q1(r);break;case 22:if(h=e!==null&&e.memoizedState!==null,r.mode&1?(nn=(c=nn)||h,br(t,r),nn=c):br(t,r),Wr(r),n&8192){if(c=r.memoizedState!==null,(r.stateNode.isHidden=c)&&!h&&r.mode&1)for(pt=r,h=r.child;h!==null;){for(d=pt=h;pt!==null;){switch(f=pt,p=f.child,f.tag){case 0:case 11:case 14:case 15:Qc(4,f,f.return);break;case 1:_l(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,e=f.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(g){le(n,e,g)}}break;case 5:_l(f,f.return);break;case 22:if(f.memoizedState!==null){ew(d);continue}}p!==null?(p.return=f,pt=p):ew(d)}h=h.sibling}t:for(h=null,d=r;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=rA("display",a))}catch(g){le(r,r.return,g)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){le(r,r.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===r)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===r)break t;for(;d.sibling===null;){if(d.return===null||d.return===r)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:br(t,r),Wr(r),n&4&&q1(r);break;case 21:break;default:br(t,r),Wr(r)}}function Wr(r){var t=r.flags;if(t&2){try{t:{for(var e=r.return;e!==null;){if(Ib(e)){var n=e;break t}e=e.return}throw Error(rt(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(eh(i,""),n.flags&=-33);var s=J1(r);yv(r,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=J1(r);vv(r,o,a);break;default:throw Error(rt(161))}}catch(l){le(r,r.return,l)}r.flags&=-3}t&4096&&(r.flags&=-4097)}function gC(r,t,e){pt=r,Ob(r)}function Ob(r,t,e){for(var n=(r.mode&1)!==0;pt!==null;){var i=pt,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||xf;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||nn;o=xf;var c=nn;if(xf=a,(nn=l)&&!c)for(pt=i;pt!==null;)a=pt,l=a.child,a.tag===22&&a.memoizedState!==null?nw(i):l!==null?(l.return=a,pt=l):nw(i);for(;s!==null;)pt=s,Ob(s),s=s.sibling;pt=i,xf=o,nn=c}tw(r)}else i.subtreeFlags&8772&&s!==null?(s.return=i,pt=s):tw(r)}}function tw(r){for(;pt!==null;){var t=pt;if(t.flags&8772){var e=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:nn||Ng(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!nn)if(e===null)n.componentDidMount();else{var i=t.elementType===t.type?e.memoizedProps:Er(t.type,e.memoizedProps);n.componentDidUpdate(i,e.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&z1(t,s,n);break;case 3:var a=t.updateQueue;if(a!==null){if(e=null,t.child!==null)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}z1(t,a,e)}break;case 5:var o=t.stateNode;if(e===null&&t.flags&4){e=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&e.focus();break;case"img":l.src&&(e.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&sh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(rt(163))}nn||t.flags&512&&mv(t)}catch(f){le(t,t.return,f)}}if(t===r){pt=null;break}if(e=t.sibling,e!==null){e.return=t.return,pt=e;break}pt=t.return}}function ew(r){for(;pt!==null;){var t=pt;if(t===r){pt=null;break}var e=t.sibling;if(e!==null){e.return=t.return,pt=e;break}pt=t.return}}function nw(r){for(;pt!==null;){var t=pt;try{switch(t.tag){case 0:case 11:case 15:var e=t.return;try{Ng(4,t)}catch(l){le(t,e,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(l){le(t,i,l)}}var s=t.return;try{mv(t)}catch(l){le(t,s,l)}break;case 5:var a=t.return;try{mv(t)}catch(l){le(t,a,l)}}}catch(l){le(t,t.return,l)}if(t===r){pt=null;break}var o=t.sibling;if(o!==null){o.return=t.return,pt=o;break}pt=t.return}}var mC=Math.ceil,Wp=ys.ReactCurrentDispatcher,x0=ys.ReactCurrentOwner,mr=ys.ReactCurrentBatchConfig,Nt=0,De=null,ve=null,Ge=0,Xn=0,Pl=Oa(0),Ce=0,mh=null,nl=0,Dg=0,C0=0,Jc=null,Cn=null,T0=0,rc=1/0,Ci=null,Vp=!1,wv=null,ba=null,Cf=!1,ga=null,Gp=0,qc=0,Av=null,Vf=-1,Gf=0;function gn(){return Nt&6?de():Vf!==-1?Vf:Vf=de()}function Sa(r){return r.mode&1?Nt&2&&Ge!==0?Ge&-Ge:q2.transition!==null?(Gf===0&&(Gf=mA()),Gf):(r=Ut,r!==0||(r=window.event,r=r===void 0?16:EA(r.type)),r):1}function jr(r,t,e,n){if(50<qc)throw qc=0,Av=null,Error(rt(185));Zd(r,e,n),(!(Nt&2)||r!==De)&&(r===De&&(!(Nt&2)&&(Dg|=e),Ce===4&&xs(r,Ge)),In(r,n),e===1&&Nt===0&&!(t.mode&1)&&(rc=de()+500,Pg&&La()))}function In(r,t){var e=r.callbackNode;qx(r,t);var n=Ip(r,r===De?Ge:0);if(n===0)e!==null&&h1(e),r.callbackNode=null,r.callbackPriority=0;else if(t=n&-n,r.callbackPriority!==t){if(e!=null&&h1(e),t===1)r.tag===0?J2(rw.bind(null,r)):HA(rw.bind(null,r)),Y2(function(){!(Nt&6)&&La()}),e=null;else{switch(vA(n)){case 1:e=Jy;break;case 4:e=pA;break;case 16:e=Rp;break;case 536870912:e=gA;break;default:e=Rp}e=jb(e,Lb.bind(null,r))}r.callbackPriority=t,r.callbackNode=e}}function Lb(r,t){if(Vf=-1,Gf=0,Nt&6)throw Error(rt(327));var e=r.callbackNode;if(jl()&&r.callbackNode!==e)return null;var n=Ip(r,r===De?Ge:0);if(n===0)return null;if(n&30||n&r.expiredLanes||t)t=Xp(r,n);else{t=n;var i=Nt;Nt|=2;var s=Db();(De!==r||Ge!==t)&&(Ci=null,rc=de()+500,Qo(r,t));do try{wC();break}catch(o){Nb(r,o)}while(!0);h0(),Wp.current=s,Nt=i,ve!==null?t=0:(De=null,Ge=0,t=Ce)}if(t!==0){if(t===2&&(i=Xm(r),i!==0&&(n=i,t=bv(r,i))),t===1)throw e=mh,Qo(r,0),xs(r,n),In(r,de()),e;if(t===6)xs(r,n);else{if(i=r.current.alternate,!(n&30)&&!vC(i)&&(t=Xp(r,n),t===2&&(s=Xm(r),s!==0&&(n=s,t=bv(r,s))),t===1))throw e=mh,Qo(r,0),xs(r,n),In(r,de()),e;switch(r.finishedWork=i,r.finishedLanes=n,t){case 0:case 1:throw Error(rt(345));case 2:Da(r,Cn,Ci);break;case 3:if(xs(r,n),(n&130023424)===n&&(t=T0+500-de(),10<t)){if(Ip(r,0)!==0)break;if(i=r.suspendedLanes,(i&n)!==n){gn(),r.pingedLanes|=r.suspendedLanes&i;break}r.timeoutHandle=ev(Da.bind(null,r,Cn,Ci),t);break}Da(r,Cn,Ci);break;case 4:if(xs(r,n),(n&4194240)===n)break;for(t=r.eventTimes,i=-1;0<n;){var a=31-Br(n);s=1<<a,a=t[a],a>i&&(i=a),n&=~s}if(n=i,n=de()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*mC(n/1960))-n,10<n){r.timeoutHandle=ev(Da.bind(null,r,Cn,Ci),n);break}Da(r,Cn,Ci);break;case 5:Da(r,Cn,Ci);break;default:throw Error(rt(329))}}}return In(r,de()),r.callbackNode===e?Lb.bind(null,r):null}function bv(r,t){var e=Jc;return r.current.memoizedState.isDehydrated&&(Qo(r,t).flags|=256),r=Xp(r,t),r!==2&&(t=Cn,Cn=e,t!==null&&Sv(t)),r}function Sv(r){Cn===null?Cn=r:Cn.push.apply(Cn,r)}function vC(r){for(var t=r;;){if(t.flags&16384){var e=t.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var n=0;n<e.length;n++){var i=e[n],s=i.getSnapshot;i=i.value;try{if(!Ur(s(),i))return!1}catch{return!1}}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function xs(r,t){for(t&=~C0,t&=~Dg,r.suspendedLanes|=t,r.pingedLanes&=~t,r=r.expirationTimes;0<t;){var e=31-Br(t),n=1<<e;r[e]=-1,t&=~n}}function rw(r){if(Nt&6)throw Error(rt(327));jl();var t=Ip(r,0);if(!(t&1))return In(r,de()),null;var e=Xp(r,t);if(r.tag!==0&&e===2){var n=Xm(r);n!==0&&(t=n,e=bv(r,n))}if(e===1)throw e=mh,Qo(r,0),xs(r,t),In(r,de()),e;if(e===6)throw Error(rt(345));return r.finishedWork=r.current.alternate,r.finishedLanes=t,Da(r,Cn,Ci),In(r,de()),null}function k0(r,t){var e=Nt;Nt|=1;try{return r(t)}finally{Nt=e,Nt===0&&(rc=de()+500,Pg&&La())}}function rl(r){ga!==null&&ga.tag===0&&!(Nt&6)&&jl();var t=Nt;Nt|=1;var e=mr.transition,n=Ut;try{if(mr.transition=null,Ut=1,r)return r()}finally{Ut=n,mr.transition=e,Nt=t,!(Nt&6)&&La()}}function R0(){Xn=Pl.current,Zt(Pl)}function Qo(r,t){r.finishedWork=null,r.finishedLanes=0;var e=r.timeoutHandle;if(e!==-1&&(r.timeoutHandle=-1,X2(e)),ve!==null)for(e=ve.return;e!==null;){var n=e;switch(l0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Np();break;case 3:ec(),Zt(kn),Zt(rn),v0();break;case 5:m0(n);break;case 4:ec();break;case 13:Zt(ie);break;case 19:Zt(ie);break;case 10:d0(n.type._context);break;case 22:case 23:R0()}e=e.return}if(De=r,ve=r=Ea(r.current,null),Ge=Xn=t,Ce=0,mh=null,C0=Dg=nl=0,Cn=Jc=null,$a!==null){for(t=0;t<$a.length;t++)if(e=$a[t],n=e.interleaved,n!==null){e.interleaved=null;var i=n.next,s=e.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}e.pending=n}$a=null}return r}function Nb(r,t){do{var e=ve;try{if(h0(),Hf.current=$p,Hp){for(var n=se.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Hp=!1}if(el=0,Ne=xe=se=null,Zc=!1,fh=0,x0.current=null,e===null||e.return===null){Ce=1,mh=t,ve=null;break}t:{var s=r,a=e.return,o=e,l=t;if(t=Ge,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=o,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=W1(a);if(p!==null){p.flags&=-257,V1(p,a,o,s,t),p.mode&1&&$1(s,c,t),t=p,l=c;var v=t.updateQueue;if(v===null){var g=new Set;g.add(l),t.updateQueue=g}else v.add(l);break t}else{if(!(t&1)){$1(s,c,t),I0();break t}l=Error(rt(426))}}else if(ee&&o.mode&1){var A=W1(a);if(A!==null){!(A.flags&65536)&&(A.flags|=256),V1(A,a,o,s,t),u0(nc(l,o));break t}}s=l=nc(l,o),Ce!==4&&(Ce=2),Jc===null?Jc=[s]:Jc.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var m=vb(s,l,t);F1(s,m);break t;case 1:o=l;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ba===null||!ba.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t;var b=yb(s,o,t);F1(s,b);break t}}s=s.return}while(s!==null)}Fb(e)}catch(E){t=E,ve===e&&e!==null&&(ve=e=e.return);continue}break}while(!0)}function Db(){var r=Wp.current;return Wp.current=$p,r===null?$p:r}function I0(){(Ce===0||Ce===3||Ce===2)&&(Ce=4),De===null||!(nl&268435455)&&!(Dg&268435455)||xs(De,Ge)}function Xp(r,t){var e=Nt;Nt|=2;var n=Db();(De!==r||Ge!==t)&&(Ci=null,Qo(r,t));do try{yC();break}catch(i){Nb(r,i)}while(!0);if(h0(),Nt=e,Wp.current=n,ve!==null)throw Error(rt(261));return De=null,Ge=0,Ce}function yC(){for(;ve!==null;)Mb(ve)}function wC(){for(;ve!==null&&!Wx();)Mb(ve)}function Mb(r){var t=Bb(r.alternate,r,Xn);r.memoizedProps=r.pendingProps,t===null?Fb(r):ve=t,x0.current=null}function Fb(r){var t=r;do{var e=t.alternate;if(r=t.return,t.flags&32768){if(e=dC(e,t),e!==null){e.flags&=32767,ve=e;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Ce=6,ve=null;return}}else if(e=hC(e,t,Xn),e!==null){ve=e;return}if(t=t.sibling,t!==null){ve=t;return}ve=t=r}while(t!==null);Ce===0&&(Ce=5)}function Da(r,t,e){var n=Ut,i=mr.transition;try{mr.transition=null,Ut=1,AC(r,t,e,n)}finally{mr.transition=i,Ut=n}return null}function AC(r,t,e,n){do jl();while(ga!==null);if(Nt&6)throw Error(rt(327));e=r.finishedWork;var i=r.finishedLanes;if(e===null)return null;if(r.finishedWork=null,r.finishedLanes=0,e===r.current)throw Error(rt(177));r.callbackNode=null,r.callbackPriority=0;var s=e.lanes|e.childLanes;if(t2(r,s),r===De&&(ve=De=null,Ge=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||Cf||(Cf=!0,jb(Rp,function(){return jl(),null})),s=(e.flags&15990)!==0,e.subtreeFlags&15990||s){s=mr.transition,mr.transition=null;var a=Ut;Ut=1;var o=Nt;Nt|=4,x0.current=null,pC(r,e),Pb(e,r),j2(qm),_p=!!Jm,qm=Jm=null,r.current=e,gC(e),Vx(),Nt=o,Ut=a,mr.transition=s}else r.current=e;if(Cf&&(Cf=!1,ga=r,Gp=i),s=r.pendingLanes,s===0&&(ba=null),Yx(e.stateNode),In(r,de()),t!==null)for(n=r.onRecoverableError,e=0;e<t.length;e++)i=t[e],n(i.value,{componentStack:i.stack,digest:i.digest});if(Vp)throw Vp=!1,r=wv,wv=null,r;return Gp&1&&r.tag!==0&&jl(),s=r.pendingLanes,s&1?r===Av?qc++:(qc=0,Av=r):qc=0,La(),null}function jl(){if(ga!==null){var r=vA(Gp),t=mr.transition,e=Ut;try{if(mr.transition=null,Ut=16>r?16:r,ga===null)var n=!1;else{if(r=ga,ga=null,Gp=0,Nt&6)throw Error(rt(331));var i=Nt;for(Nt|=4,pt=r.current;pt!==null;){var s=pt,a=s.child;if(pt.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(pt=c;pt!==null;){var h=pt;switch(h.tag){case 0:case 11:case 15:Qc(8,h,s)}var d=h.child;if(d!==null)d.return=h,pt=d;else for(;pt!==null;){h=pt;var f=h.sibling,p=h.return;if(Rb(h),h===c){pt=null;break}if(f!==null){f.return=p,pt=f;break}pt=p}}}var v=s.alternate;if(v!==null){var g=v.child;if(g!==null){v.child=null;do{var A=g.sibling;g.sibling=null,g=A}while(g!==null)}}pt=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,pt=a;else t:for(;pt!==null;){if(s=pt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Qc(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,pt=m;break t}pt=s.return}}var y=r.current;for(pt=y;pt!==null;){a=pt;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,pt=w;else t:for(a=y;pt!==null;){if(o=pt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Ng(9,o)}}catch(E){le(o,o.return,E)}if(o===a){pt=null;break t}var b=o.sibling;if(b!==null){b.return=o.return,pt=b;break t}pt=o.return}}if(Nt=i,La(),vi&&typeof vi.onPostCommitFiberRoot=="function")try{vi.onPostCommitFiberRoot(Tg,r)}catch{}n=!0}return n}finally{Ut=e,mr.transition=t}}return!1}function iw(r,t,e){t=nc(e,t),t=vb(r,t,1),r=Aa(r,t,1),t=gn(),r!==null&&(Zd(r,1,t),In(r,t))}function le(r,t,e){if(r.tag===3)iw(r,r,e);else for(;t!==null;){if(t.tag===3){iw(t,r,e);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ba===null||!ba.has(n))){r=nc(e,r),r=yb(t,r,1),t=Aa(t,r,1),r=gn(),t!==null&&(Zd(t,1,r),In(t,r));break}}t=t.return}}function bC(r,t,e){var n=r.pingCache;n!==null&&n.delete(t),t=gn(),r.pingedLanes|=r.suspendedLanes&e,De===r&&(Ge&e)===e&&(Ce===4||Ce===3&&(Ge&130023424)===Ge&&500>de()-T0?Qo(r,0):C0|=e),In(r,t)}function zb(r,t){t===0&&(r.mode&1?(t=gf,gf<<=1,!(gf&130023424)&&(gf=4194304)):t=1);var e=gn();r=gs(r,t),r!==null&&(Zd(r,t,e),In(r,e))}function SC(r){var t=r.memoizedState,e=0;t!==null&&(e=t.retryLane),zb(r,e)}function EC(r,t){var e=0;switch(r.tag){case 13:var n=r.stateNode,i=r.memoizedState;i!==null&&(e=i.retryLane);break;case 19:n=r.stateNode;break;default:throw Error(rt(314))}n!==null&&n.delete(t),zb(r,e)}var Bb;Bb=function(r,t,e){if(r!==null)if(r.memoizedProps!==t.pendingProps||kn.current)Tn=!0;else{if(!(r.lanes&e)&&!(t.flags&128))return Tn=!1,cC(r,t,e);Tn=!!(r.flags&131072)}else Tn=!1,ee&&t.flags&1048576&&$A(t,Fp,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Wf(r,t),r=t.pendingProps;var i=Ju(t,rn.current);Bl(t,e),i=w0(null,t,n,r,i,e);var s=A0();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rn(n)?(s=!0,Dp(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,p0(t),i.updater=Lg,t.stateNode=i,i._reactInternals=t,lv(t,n,r,e),t=hv(null,t,n,!0,s,e)):(t.tag=0,ee&&s&&o0(t),fn(null,t,i,e),t=t.child),t;case 16:n=t.elementType;t:{switch(Wf(r,t),r=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=CC(n),r=Er(n,r),i){case 0:t=cv(null,t,n,r,e);break t;case 1:t=Y1(null,t,n,r,e);break t;case 11:t=G1(null,t,n,r,e);break t;case 14:t=X1(null,t,n,Er(n.type,r),e);break t}throw Error(rt(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Er(n,i),cv(r,t,n,i,e);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Er(n,i),Y1(r,t,n,i,e);case 3:t:{if(Sb(t),r===null)throw Error(rt(387));n=t.pendingProps,s=t.memoizedState,i=s.element,KA(r,t),jp(t,n,null,e);var a=t.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=nc(Error(rt(423)),t),t=K1(r,t,n,e,i);break t}else if(n!==i){i=nc(Error(rt(424)),t),t=K1(r,t,n,e,i);break t}else for(Zn=wa(t.stateNode.containerInfo.firstChild),Qn=t,ee=!0,Fr=null,e=XA(t,null,n,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(qu(),n===i){t=ms(r,t,e);break t}fn(r,t,n,e)}t=t.child}return t;case 5:return ZA(t),r===null&&sv(t),n=t.type,i=t.pendingProps,s=r!==null?r.memoizedProps:null,a=i.children,tv(n,i)?a=null:s!==null&&tv(n,s)&&(t.flags|=32),bb(r,t),fn(r,t,a,e),t.child;case 6:return r===null&&sv(t),null;case 13:return Eb(r,t,e);case 4:return g0(t,t.stateNode.containerInfo),n=t.pendingProps,r===null?t.child=tc(t,null,n,e):fn(r,t,n,e),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Er(n,i),G1(r,t,n,i,e);case 7:return fn(r,t,t.pendingProps,e),t.child;case 8:return fn(r,t,t.pendingProps.children,e),t.child;case 12:return fn(r,t,t.pendingProps.children,e),t.child;case 10:t:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Xt(zp,n._currentValue),n._currentValue=a,s!==null)if(Ur(s.value,a)){if(s.children===i.children&&!kn.current){t=ms(r,t,e);break t}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=cs(-1,e&-e),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=e,l=s.alternate,l!==null&&(l.lanes|=e),av(s.return,e,t),o.lanes|=e;break}l=l.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(rt(341));a.lanes|=e,o=a.alternate,o!==null&&(o.lanes|=e),av(a,e,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}fn(r,t,i.children,e),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Bl(t,e),i=yr(i),n=n(i),t.flags|=1,fn(r,t,n,e),t.child;case 14:return n=t.type,i=Er(n,t.pendingProps),i=Er(n.type,i),X1(r,t,n,i,e);case 15:return wb(r,t,t.type,t.pendingProps,e);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Er(n,i),Wf(r,t),t.tag=1,Rn(n)?(r=!0,Dp(t)):r=!1,Bl(t,e),mb(t,n,i),lv(t,n,i,e),hv(null,t,n,!0,r,e);case 19:return xb(r,t,e);case 22:return Ab(r,t,e)}throw Error(rt(156,t.tag))};function jb(r,t){return fA(r,t)}function xC(r,t,e,n){this.tag=r,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gr(r,t,e,n){return new xC(r,t,e,n)}function _0(r){return r=r.prototype,!(!r||!r.isReactComponent)}function CC(r){if(typeof r=="function")return _0(r)?1:0;if(r!=null){if(r=r.$$typeof,r===Ky)return 11;if(r===Zy)return 14}return 2}function Ea(r,t){var e=r.alternate;return e===null?(e=gr(r.tag,t,r.key,r.mode),e.elementType=r.elementType,e.type=r.type,e.stateNode=r.stateNode,e.alternate=r,r.alternate=e):(e.pendingProps=t,e.type=r.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=r.flags&14680064,e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,t=r.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=r.sibling,e.index=r.index,e.ref=r.ref,e}function Xf(r,t,e,n,i,s){var a=2;if(n=r,typeof r=="function")_0(r)&&(a=1);else if(typeof r=="string")a=5;else t:switch(r){case bl:return Jo(e.children,i,s,t);case Yy:a=8,i|=8;break;case Om:return r=gr(12,e,t,i|2),r.elementType=Om,r.lanes=s,r;case Lm:return r=gr(13,e,t,i),r.elementType=Lm,r.lanes=s,r;case Nm:return r=gr(19,e,t,i),r.elementType=Nm,r.lanes=s,r;case Zw:return Mg(e,i,s,t);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case Yw:a=10;break t;case Kw:a=9;break t;case Ky:a=11;break t;case Zy:a=14;break t;case bs:a=16,n=null;break t}throw Error(rt(130,r==null?r:typeof r,""))}return t=gr(a,e,t,i),t.elementType=r,t.type=n,t.lanes=s,t}function Jo(r,t,e,n){return r=gr(7,r,n,t),r.lanes=e,r}function Mg(r,t,e,n){return r=gr(22,r,n,t),r.elementType=Zw,r.lanes=e,r.stateNode={isHidden:!1},r}function Am(r,t,e){return r=gr(6,r,null,t),r.lanes=e,r}function bm(r,t,e){return t=gr(4,r.children!==null?r.children:[],r.key,t),t.lanes=e,t.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},t}function TC(r,t,e,n,i){this.tag=t,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=em(0),this.expirationTimes=em(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=em(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function P0(r,t,e,n,i,s,a,o,l){return r=new TC(r,t,e,o,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=gr(3,null,null,t),r.current=s,s.stateNode=r,s.memoizedState={element:n,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},p0(s),r}function kC(r,t,e){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Al,key:n==null?null:""+n,children:r,containerInfo:t,implementation:e}}function Ub(r){if(!r)return Ca;r=r._reactInternals;t:{if(ll(r)!==r||r.tag!==1)throw Error(rt(170));var t=r;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(Rn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(rt(171))}if(r.tag===1){var e=r.type;if(Rn(e))return UA(r,e,t)}return t}function Hb(r,t,e,n,i,s,a,o,l){return r=P0(e,n,!0,r,i,s,a,o,l),r.context=Ub(null),e=r.current,n=gn(),i=Sa(e),s=cs(n,i),s.callback=t??null,Aa(e,s,i),r.current.lanes=i,Zd(r,i,n),In(r,n),r}function Fg(r,t,e,n){var i=t.current,s=gn(),a=Sa(i);return e=Ub(e),t.context===null?t.context=e:t.pendingContext=e,t=cs(s,a),t.payload={element:r},n=n===void 0?null:n,n!==null&&(t.callback=n),r=Aa(i,t,a),r!==null&&(jr(r,i,a,s),Uf(r,i,a)),a}function Yp(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function sw(r,t){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var e=r.retryLane;r.retryLane=e!==0&&e<t?e:t}}function O0(r,t){sw(r,t),(r=r.alternate)&&sw(r,t)}function RC(){return null}var $b=typeof reportError=="function"?reportError:function(r){console.error(r)};function L0(r){this._internalRoot=r}zg.prototype.render=L0.prototype.render=function(r){var t=this._internalRoot;if(t===null)throw Error(rt(409));Fg(r,t,null,null)};zg.prototype.unmount=L0.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var t=r.containerInfo;rl(function(){Fg(null,r,null,null)}),t[ps]=null}};function zg(r){this._internalRoot=r}zg.prototype.unstable_scheduleHydration=function(r){if(r){var t=AA();r={blockedOn:null,target:r,priority:t};for(var e=0;e<Es.length&&t!==0&&t<Es[e].priority;e++);Es.splice(e,0,r),e===0&&SA(r)}};function N0(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Bg(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function aw(){}function IC(r,t,e,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=Yp(a);s.call(c)}}var a=Hb(t,n,r,0,null,!1,!1,"",aw);return r._reactRootContainer=a,r[ps]=a.current,lh(r.nodeType===8?r.parentNode:r),rl(),a}for(;i=r.lastChild;)r.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var c=Yp(l);o.call(c)}}var l=P0(r,0,!1,null,null,!1,!1,"",aw);return r._reactRootContainer=l,r[ps]=l.current,lh(r.nodeType===8?r.parentNode:r),rl(function(){Fg(t,l,e,n)}),l}function jg(r,t,e,n,i){var s=e._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=Yp(a);o.call(l)}}Fg(t,a,r,i)}else a=IC(e,t,r,i,n);return Yp(a)}yA=function(r){switch(r.tag){case 3:var t=r.stateNode;if(t.current.memoizedState.isDehydrated){var e=xc(t.pendingLanes);e!==0&&(qy(t,e|1),In(t,de()),!(Nt&6)&&(rc=de()+500,La()))}break;case 13:rl(function(){var n=gs(r,1);if(n!==null){var i=gn();jr(n,r,1,i)}}),O0(r,1)}};t0=function(r){if(r.tag===13){var t=gs(r,134217728);if(t!==null){var e=gn();jr(t,r,134217728,e)}O0(r,134217728)}};wA=function(r){if(r.tag===13){var t=Sa(r),e=gs(r,t);if(e!==null){var n=gn();jr(e,r,t,n)}O0(r,t)}};AA=function(){return Ut};bA=function(r,t){var e=Ut;try{return Ut=r,t()}finally{Ut=e}};Wm=function(r,t,e){switch(t){case"input":if(Fm(r,e),t=e.name,e.type==="radio"&&t!=null){for(e=r;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<e.length;t++){var n=e[t];if(n!==r&&n.form===r.form){var i=_g(n);if(!i)throw Error(rt(90));Jw(n),Fm(n,i)}}}break;case"textarea":tA(r,e);break;case"select":t=e.value,t!=null&&Dl(r,!!e.multiple,t,!1)}};oA=k0;lA=rl;var _C={usingClientEntryPoint:!1,Events:[Jd,Cl,_g,sA,aA,k0]},vc={findFiberByHostInstance:Ha,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PC={bundleType:vc.bundleType,version:vc.version,rendererPackageName:vc.rendererPackageName,rendererConfig:vc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ys.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=hA(r),r===null?null:r.stateNode},findFiberByHostInstance:vc.findFiberByHostInstance||RC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tf.isDisabled&&Tf.supportsFiber)try{Tg=Tf.inject(PC),vi=Tf}catch{}}tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_C;tr.createPortal=function(r,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!N0(t))throw Error(rt(200));return kC(r,t,null,e)};tr.createRoot=function(r,t){if(!N0(r))throw Error(rt(299));var e=!1,n="",i=$b;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=P0(r,1,!1,null,null,e,!1,n,i),r[ps]=t.current,lh(r.nodeType===8?r.parentNode:r),new L0(t)};tr.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var t=r._reactInternals;if(t===void 0)throw typeof r.render=="function"?Error(rt(188)):(r=Object.keys(r).join(","),Error(rt(268,r)));return r=hA(t),r=r===null?null:r.stateNode,r};tr.flushSync=function(r){return rl(r)};tr.hydrate=function(r,t,e){if(!Bg(t))throw Error(rt(200));return jg(null,r,t,!0,e)};tr.hydrateRoot=function(r,t,e){if(!N0(r))throw Error(rt(405));var n=e!=null&&e.hydratedSources||null,i=!1,s="",a=$b;if(e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),t=Hb(t,null,r,1,e??null,i,!1,s,a),r[ps]=t.current,lh(r),n)for(r=0;r<n.length;r++)e=n[r],i=e._getVersion,i=i(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,i]:t.mutableSourceEagerHydrationData.push(e,i);return new zg(t)};tr.render=function(r,t,e){if(!Bg(t))throw Error(rt(200));return jg(null,r,t,!1,e)};tr.unmountComponentAtNode=function(r){if(!Bg(r))throw Error(rt(40));return r._reactRootContainer?(rl(function(){jg(null,null,r,!1,function(){r._reactRootContainer=null,r[ps]=null})}),!0):!1};tr.unstable_batchedUpdates=k0;tr.unstable_renderSubtreeIntoContainer=function(r,t,e,n){if(!Bg(e))throw Error(rt(200));if(r==null||r._reactInternals===void 0)throw Error(rt(38));return jg(r,t,e,!1,n)};tr.version="18.3.1-next-f1338f8080-20240426";function Wb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Wb)}catch(r){console.error(r)}}Wb(),Ww.exports=tr;var OC=Ww.exports,ow=OC;_m.createRoot=ow.createRoot,_m.hydrateRoot=ow.hydrateRoot;function kf(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Vb={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(r,t){(function(e){r.exports=e()})(function(){return function e(n,i,s){function a(c,h){if(!i[c]){if(!n[c]){var d=typeof kf=="function"&&kf;if(!h&&d)return d(c,!0);if(o)return o(c,!0);var f=new Error("Cannot find module '"+c+"'");throw f.code="MODULE_NOT_FOUND",f}var p=i[c]={exports:{}};n[c][0].call(p.exports,function(v){var g=n[c][1][v];return a(g||v)},p,p.exports,e,n,i,s)}return i[c].exports}for(var o=typeof kf=="function"&&kf,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(e,n,i){var s=e("./utils"),a=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var c,h,d,f,p,v,g,A=[],m=0,y=l.length,w=y,b=s.getTypeOf(l)!=="string";m<l.length;)w=y-m,d=b?(c=l[m++],h=m<y?l[m++]:0,m<y?l[m++]:0):(c=l.charCodeAt(m++),h=m<y?l.charCodeAt(m++):0,m<y?l.charCodeAt(m++):0),f=c>>2,p=(3&c)<<4|h>>4,v=1<w?(15&h)<<2|d>>6:64,g=2<w?63&d:64,A.push(o.charAt(f)+o.charAt(p)+o.charAt(v)+o.charAt(g));return A.join("")},i.decode=function(l){var c,h,d,f,p,v,g=0,A=0,m="data:";if(l.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");var y,w=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&w--,l.charAt(l.length-2)===o.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=a.uint8array?new Uint8Array(0|w):new Array(0|w);g<l.length;)c=o.indexOf(l.charAt(g++))<<2|(f=o.indexOf(l.charAt(g++)))>>4,h=(15&f)<<4|(p=o.indexOf(l.charAt(g++)))>>2,d=(3&p)<<6|(v=o.indexOf(l.charAt(g++))),y[A++]=c,p!==64&&(y[A++]=h),v!==64&&(y[A++]=d);return y}},{"./support":30,"./utils":32}],2:[function(e,n,i){var s=e("./external"),a=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),l=e("./stream/DataLengthProbe");function c(h,d,f,p,v){this.compressedSize=h,this.uncompressedSize=d,this.crc32=f,this.compression=p,this.compressedContent=v}c.prototype={getContentWorker:function(){var h=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),d=this;return h.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(h,d,f){return h.pipe(new o).pipe(new l("uncompressedSize")).pipe(d.compressWorker(f)).pipe(new l("compressedSize")).withStreamInfo("compression",d)},n.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,n,i){var s=e("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,n,i){var s=e("./utils"),a=function(){for(var o,l=[],c=0;c<256;c++){o=c;for(var h=0;h<8;h++)o=1&o?3988292384^o>>>1:o>>>1;l[c]=o}return l}();n.exports=function(o,l){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?function(c,h,d,f){var p=a,v=f+d;c^=-1;for(var g=f;g<v;g++)c=c>>>8^p[255&(c^h[g])];return-1^c}(0|l,o,o.length,0):function(c,h,d,f){var p=a,v=f+d;c^=-1;for(var g=f;g<v;g++)c=c>>>8^p[255&(c^h.charCodeAt(g))];return-1^c}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(e,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(e,n,i){var s=null;s=typeof Promise<"u"?Promise:e("lie"),n.exports={Promise:s}},{lie:37}],7:[function(e,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=e("pako"),o=e("./utils"),l=e("./stream/GenericWorker"),c=s?"uint8array":"array";function h(d,f){l.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=f,this.meta={}}i.magic="\b\0",o.inherits(h,l),h.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(c,d.data),!1)},h.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(f){d.push({data:f,meta:d.meta})}},i.compressWorker=function(d){return new h("Deflate",d)},i.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,n,i){function s(p,v){var g,A="";for(g=0;g<v;g++)A+=String.fromCharCode(255&p),p>>>=8;return A}function a(p,v,g,A,m,y){var w,b,E=p.file,T=p.compression,R=y!==c.utf8encode,P=o.transformTo("string",y(E.name)),_=o.transformTo("string",c.utf8encode(E.name)),N=E.comment,B=o.transformTo("string",y(N)),O=o.transformTo("string",c.utf8encode(N)),M=_.length!==E.name.length,x=O.length!==N.length,$="",X="",F="",W=E.dir,H=E.date,Z={crc32:0,compressedSize:0,uncompressedSize:0};v&&!g||(Z.crc32=p.crc32,Z.compressedSize=p.compressedSize,Z.uncompressedSize=p.uncompressedSize);var j=0;v&&(j|=8),R||!M&&!x||(j|=2048);var z=0,st=0;W&&(z|=16),m==="UNIX"?(st=798,z|=function(et,J){var K=et;return et||(K=J?16893:33204),(65535&K)<<16}(E.unixPermissions,W)):(st=20,z|=function(et){return 63&(et||0)}(E.dosPermissions)),w=H.getUTCHours(),w<<=6,w|=H.getUTCMinutes(),w<<=5,w|=H.getUTCSeconds()/2,b=H.getUTCFullYear()-1980,b<<=4,b|=H.getUTCMonth()+1,b<<=5,b|=H.getUTCDate(),M&&(X=s(1,1)+s(h(P),4)+_,$+="up"+s(X.length,2)+X),x&&(F=s(1,1)+s(h(B),4)+O,$+="uc"+s(F.length,2)+F);var tt="";return tt+=`
\0`,tt+=s(j,2),tt+=T.magic,tt+=s(w,2),tt+=s(b,2),tt+=s(Z.crc32,4),tt+=s(Z.compressedSize,4),tt+=s(Z.uncompressedSize,4),tt+=s(P.length,2),tt+=s($.length,2),{fileRecord:d.LOCAL_FILE_HEADER+tt+P+$,dirRecord:d.CENTRAL_FILE_HEADER+s(st,2)+tt+s(B.length,2)+"\0\0\0\0"+s(z,4)+s(A,4)+P+$+B}}var o=e("../utils"),l=e("../stream/GenericWorker"),c=e("../utf8"),h=e("../crc32"),d=e("../signature");function f(p,v,g,A){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=g,this.encodeFileName=A,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(f,l),f.prototype.push=function(p){var v=p.meta.percent||0,g=this.entriesCount,A=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,l.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:g?(v+100*(g-A-1))/g:100}}))},f.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var v=this.streamFiles&&!p.file.dir;if(v){var g=a(p,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(p){this.accumulate=!1;var v=this.streamFiles&&!p.file.dir,g=a(p,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),v)this.push({data:function(A){return d.DATA_DESCRIPTOR+s(A.crc32,4)+s(A.compressedSize,4)+s(A.uncompressedSize,4)}(p),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var p=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var g=this.bytesWritten-p,A=function(m,y,w,b,E){var T=o.transformTo("string",E(b));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(m,2)+s(m,2)+s(y,4)+s(w,4)+s(T.length,2)+T}(this.dirRecords.length,g,p,this.zipComment,this.encodeFileName);this.push({data:A,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(p){this._sources.push(p);var v=this;return p.on("data",function(g){v.processChunk(g)}),p.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),p.on("error",function(g){v.error(g)}),this},f.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(p){var v=this._sources;if(!l.prototype.error.call(this,p))return!1;for(var g=0;g<v.length;g++)try{v[g].error(p)}catch{}return!0},f.prototype.lock=function(){l.prototype.lock.call(this);for(var p=this._sources,v=0;v<p.length;v++)p[v].lock()},n.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,n,i){var s=e("../compressions"),a=e("./ZipFileWorker");i.generateWorker=function(o,l,c){var h=new a(l.streamFiles,c,l.platform,l.encodeFileName),d=0;try{o.forEach(function(f,p){d++;var v=function(y,w){var b=y||w,E=s[b];if(!E)throw new Error(b+" is not a valid compression method !");return E}(p.options.compression,l.compression),g=p.options.compressionOptions||l.compressionOptions||{},A=p.dir,m=p.date;p._compressWorker(v,g).withStreamInfo("file",{name:f,dir:A,date:m,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(h)}),h.entriesCount=d}catch(f){h.error(f)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,n,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(s.prototype=e("./object")).loadAsync=e("./load"),s.support=e("./support"),s.defaults=e("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=e("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,n,i){var s=e("./utils"),a=e("./external"),o=e("./utf8"),l=e("./zipEntries"),c=e("./stream/Crc32Probe"),h=e("./nodejsUtils");function d(f){return new a.Promise(function(p,v){var g=f.decompressed.getContentWorker().pipe(new c);g.on("error",function(A){v(A)}).on("end",function(){g.streamInfo.crc32!==f.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}n.exports=function(f,p){var v=this;return p=s.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),h.isNode&&h.isStream(f)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",f,!0,p.optimizedBinaryString,p.base64).then(function(g){var A=new l(p);return A.load(g),A}).then(function(g){var A=[a.Promise.resolve(g)],m=g.files;if(p.checkCRC32)for(var y=0;y<m.length;y++)A.push(d(m[y]));return a.Promise.all(A)}).then(function(g){for(var A=g.shift(),m=A.files,y=0;y<m.length;y++){var w=m[y],b=w.fileNameStr,E=s.resolve(w.fileNameStr);v.file(E,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:p.createFolders}),w.dir||(v.file(E).unsafeOriginalName=b)}return A.zipComment.length&&(v.comment=A.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,n,i){var s=e("../utils"),a=e("../stream/GenericWorker");function o(l,c){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(o,a),o.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(h){c.push({data:h,meta:{percent:0}})}).on("error",function(h){c.isPaused?this.generatedError=h:c.error(h)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,n,i){var s=e("readable-stream").Readable;function a(o,l,c){s.call(this,l),this._helper=o;var h=this;o.on("data",function(d,f){h.push(d)||h._helper.pause(),c&&c(f)}).on("error",function(d){h.emit("error",d)}).on("end",function(){h.push(null)})}e("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},n.exports=a},{"../utils":32,"readable-stream":16}],14:[function(e,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(e,n,i){function s(E,T,R){var P,_=o.getTypeOf(T),N=o.extend(R||{},h);N.date=N.date||new Date,N.compression!==null&&(N.compression=N.compression.toUpperCase()),typeof N.unixPermissions=="string"&&(N.unixPermissions=parseInt(N.unixPermissions,8)),N.unixPermissions&&16384&N.unixPermissions&&(N.dir=!0),N.dosPermissions&&16&N.dosPermissions&&(N.dir=!0),N.dir&&(E=m(E)),N.createFolders&&(P=A(E))&&y.call(this,P,!0);var B=_==="string"&&N.binary===!1&&N.base64===!1;R&&R.binary!==void 0||(N.binary=!B),(T instanceof d&&T.uncompressedSize===0||N.dir||!T||T.length===0)&&(N.base64=!1,N.binary=!0,T="",N.compression="STORE",_="string");var O=null;O=T instanceof d||T instanceof l?T:v.isNode&&v.isStream(T)?new g(E,T):o.prepareContent(E,T,N.binary,N.optimizedBinaryString,N.base64);var M=new f(E,O,N);this.files[E]=M}var a=e("./utf8"),o=e("./utils"),l=e("./stream/GenericWorker"),c=e("./stream/StreamHelper"),h=e("./defaults"),d=e("./compressedObject"),f=e("./zipObject"),p=e("./generate"),v=e("./nodejsUtils"),g=e("./nodejs/NodejsStreamInputAdapter"),A=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var T=E.lastIndexOf("/");return 0<T?E.substring(0,T):""},m=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},y=function(E,T){return T=T!==void 0?T:h.createFolders,E=m(E),this.files[E]||s.call(this,E,null,{dir:!0,createFolders:T}),this.files[E]};function w(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var T,R,P;for(T in this.files)P=this.files[T],(R=T.slice(this.root.length,T.length))&&T.slice(0,this.root.length)===this.root&&E(R,P)},filter:function(E){var T=[];return this.forEach(function(R,P){E(R,P)&&T.push(P)}),T},file:function(E,T,R){if(arguments.length!==1)return E=this.root+E,s.call(this,E,T,R),this;if(w(E)){var P=E;return this.filter(function(N,B){return!B.dir&&P.test(N)})}var _=this.files[this.root+E];return _&&!_.dir?_:null},folder:function(E){if(!E)return this;if(w(E))return this.filter(function(_,N){return N.dir&&E.test(_)});var T=this.root+E,R=y.call(this,T),P=this.clone();return P.root=R.name,P},remove:function(E){E=this.root+E;var T=this.files[E];if(T||(E.slice(-1)!=="/"&&(E+="/"),T=this.files[E]),T&&!T.dir)delete this.files[E];else for(var R=this.filter(function(_,N){return N.name.slice(0,E.length)===E}),P=0;P<R.length;P++)delete this.files[R[P].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var T,R={};try{if((R=o.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");o.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var P=R.comment||this.comment||"";T=p.generateWorker(this,R,P)}catch(_){(T=new l("error")).error(_)}return new c(T,R.type||"string",R.mimeType)},generateAsync:function(E,T){return this.generateInternalStream(E).accumulate(T)},generateNodeStream:function(E,T){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(T)}};n.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,n,i){n.exports=e("stream")},{stream:void 0}],17:[function(e,n,i){var s=e("./DataReader");function a(o){s.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}e("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),c=o.charCodeAt(1),h=o.charCodeAt(2),d=o.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===l&&this.data[f+1]===c&&this.data[f+2]===h&&this.data[f+3]===d)return f-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),c=o.charCodeAt(1),h=o.charCodeAt(2),d=o.charCodeAt(3),f=this.readData(4);return l===f[0]&&c===f[1]&&h===f[2]&&d===f[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=a},{"../utils":32,"./DataReader":18}],18:[function(e,n,i){var s=e("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,c=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=o,c},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},n.exports=a},{"../utils":32}],19:[function(e,n,i){var s=e("./Uint8ArrayReader");function a(o){s.call(this,o)}e("../utils").inherits(a,s),a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,n,i){var s=e("./DataReader");function a(o){s.call(this,o)}e("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=a},{"../utils":32,"./DataReader":18}],21:[function(e,n,i){var s=e("./ArrayReader");function a(o){s.call(this,o)}e("../utils").inherits(a,s),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(e,n,i){var s=e("../utils"),a=e("../support"),o=e("./ArrayReader"),l=e("./StringReader"),c=e("./NodeBufferReader"),h=e("./Uint8ArrayReader");n.exports=function(d){var f=s.getTypeOf(d);return s.checkSupport(f),f!=="string"||a.uint8array?f==="nodebuffer"?new c(d):a.uint8array?new h(s.transformTo("uint8array",d)):new o(s.transformTo("array",d)):new l(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,n,i){var s=e("./GenericWorker"),a=e("../utils");function o(l){s.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(o,s),o.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,n,i){var s=e("./GenericWorker"),a=e("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,s),o.prototype.processChunk=function(l){this.streamInfo.crc32=a(l.data,this.streamInfo.crc32||0),this.push(l)},n.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,n,i){var s=e("../utils"),a=e("./GenericWorker");function o(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(o,a),o.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}a.prototype.processChunk.call(this,l)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,n,i){var s=e("../utils"),a=e("./GenericWorker");function o(l){a.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(h){c.dataIsReady=!0,c.data=h,c.max=h&&h.length||0,c.type=s.getTypeOf(h),c.isPaused||c._tickAndRepeat()},function(h){c.error(h)})}s.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,n,i){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(l){o.processChunk(l)}),a.on("end",function(){o.end()}),a.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},n.exports=s},{}],29:[function(e,n,i){var s=e("../utils"),a=e("./ConvertWorker"),o=e("./GenericWorker"),l=e("../base64"),c=e("../support"),h=e("../external"),d=null;if(c.nodestream)try{d=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(v,g){return new h.Promise(function(A,m){var y=[],w=v._internalType,b=v._outputType,E=v._mimeType;v.on("data",function(T,R){y.push(T),g&&g(R)}).on("error",function(T){y=[],m(T)}).on("end",function(){try{var T=function(R,P,_){switch(R){case"blob":return s.newBlob(s.transformTo("arraybuffer",P),_);case"base64":return l.encode(P);default:return s.transformTo(R,P)}}(b,function(R,P){var _,N=0,B=null,O=0;for(_=0;_<P.length;_++)O+=P[_].length;switch(R){case"string":return P.join("");case"array":return Array.prototype.concat.apply([],P);case"uint8array":for(B=new Uint8Array(O),_=0;_<P.length;_++)B.set(P[_],N),N+=P[_].length;return B;case"nodebuffer":return Buffer.concat(P);default:throw new Error("concat : unsupported type '"+R+"'")}}(w,y),E);A(T)}catch(R){m(R)}y=[]}).resume()})}function p(v,g,A){var m=g;switch(g){case"blob":case"arraybuffer":m="uint8array";break;case"base64":m="string"}try{this._internalType=m,this._outputType=g,this._mimeType=A,s.checkSupport(m),this._worker=v.pipe(new a(m)),v.lock()}catch(y){this._worker=new o("error"),this._worker.error(y)}}p.prototype={accumulate:function(v){return f(this,v)},on:function(v,g){var A=this;return v==="data"?this._worker.on(v,function(m){g.call(A,m.data,m.meta)}):this._worker.on(v,function(){s.delay(g,arguments,A)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},v)}},n.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!e("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(e,n,i){for(var s=e("./utils"),a=e("./support"),o=e("./nodejsUtils"),l=e("./stream/GenericWorker"),c=new Array(256),h=0;h<256;h++)c[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;c[254]=c[254]=1;function d(){l.call(this,"utf-8 decode"),this.leftOver=null}function f(){l.call(this,"utf-8 encode")}i.utf8encode=function(p){return a.nodebuffer?o.newBufferFrom(p,"utf-8"):function(v){var g,A,m,y,w,b=v.length,E=0;for(y=0;y<b;y++)(64512&(A=v.charCodeAt(y)))==55296&&y+1<b&&(64512&(m=v.charCodeAt(y+1)))==56320&&(A=65536+(A-55296<<10)+(m-56320),y++),E+=A<128?1:A<2048?2:A<65536?3:4;for(g=a.uint8array?new Uint8Array(E):new Array(E),y=w=0;w<E;y++)(64512&(A=v.charCodeAt(y)))==55296&&y+1<b&&(64512&(m=v.charCodeAt(y+1)))==56320&&(A=65536+(A-55296<<10)+(m-56320),y++),A<128?g[w++]=A:(A<2048?g[w++]=192|A>>>6:(A<65536?g[w++]=224|A>>>12:(g[w++]=240|A>>>18,g[w++]=128|A>>>12&63),g[w++]=128|A>>>6&63),g[w++]=128|63&A);return g}(p)},i.utf8decode=function(p){return a.nodebuffer?s.transformTo("nodebuffer",p).toString("utf-8"):function(v){var g,A,m,y,w=v.length,b=new Array(2*w);for(g=A=0;g<w;)if((m=v[g++])<128)b[A++]=m;else if(4<(y=c[m]))b[A++]=65533,g+=y-1;else{for(m&=y===2?31:y===3?15:7;1<y&&g<w;)m=m<<6|63&v[g++],y--;1<y?b[A++]=65533:m<65536?b[A++]=m:(m-=65536,b[A++]=55296|m>>10&1023,b[A++]=56320|1023&m)}return b.length!==A&&(b.subarray?b=b.subarray(0,A):b.length=A),s.applyFromCharCode(b)}(p=s.transformTo(a.uint8array?"uint8array":"array",p))},s.inherits(d,l),d.prototype.processChunk=function(p){var v=s.transformTo(a.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var g=v;(v=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),v.set(g,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var A=function(y,w){var b;for((w=w||y.length)>y.length&&(w=y.length),b=w-1;0<=b&&(192&y[b])==128;)b--;return b<0||b===0?w:b+c[y[b]]>w?b:w}(v),m=v;A!==v.length&&(a.uint8array?(m=v.subarray(0,A),this.leftOver=v.subarray(A,v.length)):(m=v.slice(0,A),this.leftOver=v.slice(A,v.length))),this.push({data:i.utf8decode(m),meta:p.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=d,s.inherits(f,l),f.prototype.processChunk=function(p){this.push({data:i.utf8encode(p.data),meta:p.meta})},i.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,n,i){var s=e("./support"),a=e("./base64"),o=e("./nodejsUtils"),l=e("./external");function c(g){return g}function h(g,A){for(var m=0;m<g.length;++m)A[m]=255&g.charCodeAt(m);return A}e("setimmediate"),i.newBlob=function(g,A){i.checkSupport("blob");try{return new Blob([g],{type:A})}catch{try{var m=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return m.append(g),m.getBlob(A)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(g,A,m){var y=[],w=0,b=g.length;if(b<=m)return String.fromCharCode.apply(null,g);for(;w<b;)A==="array"||A==="nodebuffer"?y.push(String.fromCharCode.apply(null,g.slice(w,Math.min(w+m,b)))):y.push(String.fromCharCode.apply(null,g.subarray(w,Math.min(w+m,b)))),w+=m;return y.join("")},stringifyByChar:function(g){for(var A="",m=0;m<g.length;m++)A+=String.fromCharCode(g[m]);return A},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function f(g){var A=65536,m=i.getTypeOf(g),y=!0;if(m==="uint8array"?y=d.applyCanBeUsed.uint8array:m==="nodebuffer"&&(y=d.applyCanBeUsed.nodebuffer),y)for(;1<A;)try{return d.stringifyByChunk(g,m,A)}catch{A=Math.floor(A/2)}return d.stringifyByChar(g)}function p(g,A){for(var m=0;m<g.length;m++)A[m]=g[m];return A}i.applyFromCharCode=f;var v={};v.string={string:c,array:function(g){return h(g,new Array(g.length))},arraybuffer:function(g){return v.string.uint8array(g).buffer},uint8array:function(g){return h(g,new Uint8Array(g.length))},nodebuffer:function(g){return h(g,o.allocBuffer(g.length))}},v.array={string:f,array:c,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return o.newBufferFrom(g)}},v.arraybuffer={string:function(g){return f(new Uint8Array(g))},array:function(g){return p(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:c,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return o.newBufferFrom(new Uint8Array(g))}},v.uint8array={string:f,array:function(g){return p(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:c,nodebuffer:function(g){return o.newBufferFrom(g)}},v.nodebuffer={string:f,array:function(g){return p(g,new Array(g.length))},arraybuffer:function(g){return v.nodebuffer.uint8array(g).buffer},uint8array:function(g){return p(g,new Uint8Array(g.length))},nodebuffer:c},i.transformTo=function(g,A){if(A=A||"",!g)return A;i.checkSupport(g);var m=i.getTypeOf(A);return v[m][g](A)},i.resolve=function(g){for(var A=g.split("/"),m=[],y=0;y<A.length;y++){var w=A[y];w==="."||w===""&&y!==0&&y!==A.length-1||(w===".."?m.pop():m.push(w))}return m.join("/")},i.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(g)?"nodebuffer":s.uint8array&&g instanceof Uint8Array?"uint8array":s.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(g){if(!s[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(g){var A,m,y="";for(m=0;m<(g||"").length;m++)y+="\\x"+((A=g.charCodeAt(m))<16?"0":"")+A.toString(16).toUpperCase();return y},i.delay=function(g,A,m){setImmediate(function(){g.apply(m||null,A||[])})},i.inherits=function(g,A){function m(){}m.prototype=A.prototype,g.prototype=new m},i.extend=function(){var g,A,m={};for(g=0;g<arguments.length;g++)for(A in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],A)&&m[A]===void 0&&(m[A]=arguments[g][A]);return m},i.prepareContent=function(g,A,m,y,w){return l.Promise.resolve(A).then(function(b){return s.blob&&(b instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(b))!==-1)&&typeof FileReader<"u"?new l.Promise(function(E,T){var R=new FileReader;R.onload=function(P){E(P.target.result)},R.onerror=function(P){T(P.target.error)},R.readAsArrayBuffer(b)}):b}).then(function(b){var E=i.getTypeOf(b);return E?(E==="arraybuffer"?b=i.transformTo("uint8array",b):E==="string"&&(w?b=a.decode(b):m&&y!==!0&&(b=function(T){return h(T,s.uint8array?new Uint8Array(T.length):new Array(T.length))}(b))),b):l.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,n,i){var s=e("./reader/readerFor"),a=e("./utils"),o=e("./signature"),l=e("./zipEntry"),c=e("./support");function h(d){this.files=[],this.loadOptions=d}h.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(f)+", expected "+a.pretty(d)+")")}},isSignature:function(d,f){var p=this.reader.index;this.reader.setIndex(d);var v=this.reader.readString(4)===f;return this.reader.setIndex(p),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),f=c.uint8array?"uint8array":"array",p=a.transformTo(f,d);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,f,p,v=this.zip64EndOfCentralSize-44;0<v;)d=this.reader.readInt(2),f=this.reader.readInt(4),p=this.reader.readData(f),this.zip64ExtensibleData[d]={id:d,length:f,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,f;for(d=0;d<this.files.length;d++)f=this.files[d],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(d=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var f=d;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var v=f-p;if(0<v)this.isSignature(f,o.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(d){this.reader=s(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,n,i){var s=e("./reader/readerFor"),a=e("./utils"),o=e("./compressedObject"),l=e("./crc32"),c=e("./utf8"),h=e("./compressions"),d=e("./support");function f(p,v){this.options=p,this.loadOptions=v}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var v,g;if(p.skip(22),this.fileNameLength=p.readInt(2),g=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(A){for(var m in h)if(Object.prototype.hasOwnProperty.call(h,m)&&h[m].magic===A)return h[m];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,v,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var v=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(v),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var v,g,A,m=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<m;)v=p.readInt(2),g=p.readInt(2),A=p.readData(g),this.extraFields[v]={id:v,length:g,value:A};p.setIndex(m)},handleUTF8:function(){var p=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var g=a.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var A=this.findExtraFieldUnicodeComment();if(A!==null)this.fileCommentStr=A;else{var m=a.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(m)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var v=s(p.value);return v.readInt(1)!==1||l(this.fileName)!==v.readInt(4)?null:c.utf8decode(v.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var v=s(p.value);return v.readInt(1)!==1||l(this.fileComment)!==v.readInt(4)?null:c.utf8decode(v.readData(p.length-5))}return null}},n.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,n,i){function s(v,g,A){this.name=v,this.dir=A.dir,this.date=A.date,this.comment=A.comment,this.unixPermissions=A.unixPermissions,this.dosPermissions=A.dosPermissions,this._data=g,this._dataBinary=A.binary,this.options={compression:A.compression,compressionOptions:A.compressionOptions}}var a=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),l=e("./utf8"),c=e("./compressedObject"),h=e("./stream/GenericWorker");s.prototype={internalStream:function(v){var g=null,A="string";try{if(!v)throw new Error("No output type specified.");var m=(A=v.toLowerCase())==="string"||A==="text";A!=="binarystring"&&A!=="text"||(A="string"),g=this._decompressWorker();var y=!this._dataBinary;y&&!m&&(g=g.pipe(new l.Utf8EncodeWorker)),!y&&m&&(g=g.pipe(new l.Utf8DecodeWorker))}catch(w){(g=new h("error")).error(w)}return new a(g,A,"")},async:function(v,g){return this.internalStream(v).accumulate(g)},nodeStream:function(v,g){return this.internalStream(v||"nodebuffer").toNodejsStream(g)},_compressWorker:function(v,g){if(this._data instanceof c&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var A=this._decompressWorker();return this._dataBinary||(A=A.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(A,v,g)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof h?this._data:new o(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<d.length;p++)s.prototype[d[p]]=f;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,n,i){(function(s){var a,o,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var c=0,h=new l(v),d=s.document.createTextNode("");h.observe(d,{characterData:!0}),a=function(){d.data=c=++c%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var g=s.document.createElement("script");g.onreadystatechange=function(){v(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:function(){setTimeout(v,0)};else{var f=new s.MessageChannel;f.port1.onmessage=v,a=function(){f.port2.postMessage(0)}}var p=[];function v(){var g,A;o=!0;for(var m=p.length;m;){for(A=p,p=[],g=-1;++g<m;)A[g]();m=p.length}o=!1}n.exports=function(g){p.push(g)!==1||o||a()}}).call(this,typeof uf<"u"?uf:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,n,i){var s=e("immediate");function a(){}var o={},l=["REJECTED"],c=["FULFILLED"],h=["PENDING"];function d(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,m!==a&&g(this,m)}function f(m,y,w){this.promise=m,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function p(m,y,w){s(function(){var b;try{b=y(w)}catch(E){return o.reject(m,E)}b===m?o.reject(m,new TypeError("Cannot resolve promise with itself")):o.resolve(m,b)})}function v(m){var y=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof y=="function")return function(){y.apply(m,arguments)}}function g(m,y){var w=!1;function b(R){w||(w=!0,o.reject(m,R))}function E(R){w||(w=!0,o.resolve(m,R))}var T=A(function(){y(E,b)});T.status==="error"&&b(T.value)}function A(m,y){var w={};try{w.value=m(y),w.status="success"}catch(b){w.status="error",w.value=b}return w}(n.exports=d).prototype.finally=function(m){if(typeof m!="function")return this;var y=this.constructor;return this.then(function(w){return y.resolve(m()).then(function(){return w})},function(w){return y.resolve(m()).then(function(){throw w})})},d.prototype.catch=function(m){return this.then(null,m)},d.prototype.then=function(m,y){if(typeof m!="function"&&this.state===c||typeof y!="function"&&this.state===l)return this;var w=new this.constructor(a);return this.state!==h?p(w,this.state===c?m:y,this.outcome):this.queue.push(new f(w,m,y)),w},f.prototype.callFulfilled=function(m){o.resolve(this.promise,m)},f.prototype.otherCallFulfilled=function(m){p(this.promise,this.onFulfilled,m)},f.prototype.callRejected=function(m){o.reject(this.promise,m)},f.prototype.otherCallRejected=function(m){p(this.promise,this.onRejected,m)},o.resolve=function(m,y){var w=A(v,y);if(w.status==="error")return o.reject(m,w.value);var b=w.value;if(b)g(m,b);else{m.state=c,m.outcome=y;for(var E=-1,T=m.queue.length;++E<T;)m.queue[E].callFulfilled(y)}return m},o.reject=function(m,y){m.state=l,m.outcome=y;for(var w=-1,b=m.queue.length;++w<b;)m.queue[w].callRejected(y);return m},d.resolve=function(m){return m instanceof this?m:o.resolve(new this(a),m)},d.reject=function(m){var y=new this(a);return o.reject(y,m)},d.all=function(m){var y=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=m.length,b=!1;if(!w)return this.resolve([]);for(var E=new Array(w),T=0,R=-1,P=new this(a);++R<w;)_(m[R],R);return P;function _(N,B){y.resolve(N).then(function(O){E[B]=O,++T!==w||b||(b=!0,o.resolve(P,E))},function(O){b||(b=!0,o.reject(P,O))})}},d.race=function(m){var y=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=m.length,b=!1;if(!w)return this.resolve([]);for(var E=-1,T=new this(a);++E<w;)R=m[E],y.resolve(R).then(function(P){b||(b=!0,o.resolve(T,P))},function(P){b||(b=!0,o.reject(T,P))});var R;return T}},{immediate:36}],38:[function(e,n,i){var s={};(0,e("./lib/utils/common").assign)(s,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,n,i){var s=e("./zlib/deflate"),a=e("./utils/common"),o=e("./utils/strings"),l=e("./zlib/messages"),c=e("./zlib/zstream"),h=Object.prototype.toString,d=0,f=-1,p=0,v=8;function g(m){if(!(this instanceof g))return new g(m);this.options=a.assign({level:f,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},m||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var w=s.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(w!==d)throw new Error(l[w]);if(y.header&&s.deflateSetHeader(this.strm,y.header),y.dictionary){var b;if(b=typeof y.dictionary=="string"?o.string2buf(y.dictionary):h.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(w=s.deflateSetDictionary(this.strm,b))!==d)throw new Error(l[w]);this._dict_set=!0}}function A(m,y){var w=new g(y);if(w.push(m,!0),w.err)throw w.msg||l[w.err];return w.result}g.prototype.push=function(m,y){var w,b,E=this.strm,T=this.options.chunkSize;if(this.ended)return!1;b=y===~~y?y:y===!0?4:0,typeof m=="string"?E.input=o.string2buf(m):h.call(m)==="[object ArrayBuffer]"?E.input=new Uint8Array(m):E.input=m,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new a.Buf8(T),E.next_out=0,E.avail_out=T),(w=s.deflate(E,b))!==1&&w!==d)return this.onEnd(w),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||b!==4&&b!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(E.output,E.next_out))):this.onData(a.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&w!==1);return b===4?(w=s.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===d):b!==2||(this.onEnd(d),!(E.avail_out=0))},g.prototype.onData=function(m){this.chunks.push(m)},g.prototype.onEnd=function(m){m===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},i.Deflate=g,i.deflate=A,i.deflateRaw=function(m,y){return(y=y||{}).raw=!0,A(m,y)},i.gzip=function(m,y){return(y=y||{}).gzip=!0,A(m,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,n,i){var s=e("./zlib/inflate"),a=e("./utils/common"),o=e("./utils/strings"),l=e("./zlib/constants"),c=e("./zlib/messages"),h=e("./zlib/zstream"),d=e("./zlib/gzheader"),f=Object.prototype.toString;function p(g){if(!(this instanceof p))return new p(g);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},g||{});var A=this.options;A.raw&&0<=A.windowBits&&A.windowBits<16&&(A.windowBits=-A.windowBits,A.windowBits===0&&(A.windowBits=-15)),!(0<=A.windowBits&&A.windowBits<16)||g&&g.windowBits||(A.windowBits+=32),15<A.windowBits&&A.windowBits<48&&!(15&A.windowBits)&&(A.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var m=s.inflateInit2(this.strm,A.windowBits);if(m!==l.Z_OK)throw new Error(c[m]);this.header=new d,s.inflateGetHeader(this.strm,this.header)}function v(g,A){var m=new p(A);if(m.push(g,!0),m.err)throw m.msg||c[m.err];return m.result}p.prototype.push=function(g,A){var m,y,w,b,E,T,R=this.strm,P=this.options.chunkSize,_=this.options.dictionary,N=!1;if(this.ended)return!1;y=A===~~A?A:A===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof g=="string"?R.input=o.binstring2buf(g):f.call(g)==="[object ArrayBuffer]"?R.input=new Uint8Array(g):R.input=g,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new a.Buf8(P),R.next_out=0,R.avail_out=P),(m=s.inflate(R,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&_&&(T=typeof _=="string"?o.string2buf(_):f.call(_)==="[object ArrayBuffer]"?new Uint8Array(_):_,m=s.inflateSetDictionary(this.strm,T)),m===l.Z_BUF_ERROR&&N===!0&&(m=l.Z_OK,N=!1),m!==l.Z_STREAM_END&&m!==l.Z_OK)return this.onEnd(m),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&m!==l.Z_STREAM_END&&(R.avail_in!==0||y!==l.Z_FINISH&&y!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=o.utf8border(R.output,R.next_out),b=R.next_out-w,E=o.buf2string(R.output,w),R.next_out=b,R.avail_out=P-b,b&&a.arraySet(R.output,R.output,w,b,0),this.onData(E)):this.onData(a.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(N=!0)}while((0<R.avail_in||R.avail_out===0)&&m!==l.Z_STREAM_END);return m===l.Z_STREAM_END&&(y=l.Z_FINISH),y===l.Z_FINISH?(m=s.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===l.Z_OK):y!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(R.avail_out=0))},p.prototype.onData=function(g){this.chunks.push(g)},p.prototype.onEnd=function(g){g===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},i.Inflate=p,i.inflate=v,i.inflateRaw=function(g,A){return(A=A||{}).raw=!0,v(g,A)},i.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var h=c.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var d in h)h.hasOwnProperty(d)&&(l[d]=h[d])}}return l},i.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var a={arraySet:function(l,c,h,d,f){if(c.subarray&&l.subarray)l.set(c.subarray(h,h+d),f);else for(var p=0;p<d;p++)l[f+p]=c[h+p]},flattenChunks:function(l){var c,h,d,f,p,v;for(c=d=0,h=l.length;c<h;c++)d+=l[c].length;for(v=new Uint8Array(d),c=f=0,h=l.length;c<h;c++)p=l[c],v.set(p,f),f+=p.length;return v}},o={arraySet:function(l,c,h,d,f){for(var p=0;p<d;p++)l[f+p]=c[h+p]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(s)},{}],42:[function(e,n,i){var s=e("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new s.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function h(d,f){if(f<65537&&(d.subarray&&o||!d.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(d,f));for(var p="",v=0;v<f;v++)p+=String.fromCharCode(d[v]);return p}l[254]=l[254]=1,i.string2buf=function(d){var f,p,v,g,A,m=d.length,y=0;for(g=0;g<m;g++)(64512&(p=d.charCodeAt(g)))==55296&&g+1<m&&(64512&(v=d.charCodeAt(g+1)))==56320&&(p=65536+(p-55296<<10)+(v-56320),g++),y+=p<128?1:p<2048?2:p<65536?3:4;for(f=new s.Buf8(y),g=A=0;A<y;g++)(64512&(p=d.charCodeAt(g)))==55296&&g+1<m&&(64512&(v=d.charCodeAt(g+1)))==56320&&(p=65536+(p-55296<<10)+(v-56320),g++),p<128?f[A++]=p:(p<2048?f[A++]=192|p>>>6:(p<65536?f[A++]=224|p>>>12:(f[A++]=240|p>>>18,f[A++]=128|p>>>12&63),f[A++]=128|p>>>6&63),f[A++]=128|63&p);return f},i.buf2binstring=function(d){return h(d,d.length)},i.binstring2buf=function(d){for(var f=new s.Buf8(d.length),p=0,v=f.length;p<v;p++)f[p]=d.charCodeAt(p);return f},i.buf2string=function(d,f){var p,v,g,A,m=f||d.length,y=new Array(2*m);for(p=v=0;p<m;)if((g=d[p++])<128)y[v++]=g;else if(4<(A=l[g]))y[v++]=65533,p+=A-1;else{for(g&=A===2?31:A===3?15:7;1<A&&p<m;)g=g<<6|63&d[p++],A--;1<A?y[v++]=65533:g<65536?y[v++]=g:(g-=65536,y[v++]=55296|g>>10&1023,y[v++]=56320|1023&g)}return h(y,v)},i.utf8border=function(d,f){var p;for((f=f||d.length)>d.length&&(f=d.length),p=f-1;0<=p&&(192&d[p])==128;)p--;return p<0||p===0?f:p+l[d[p]]>f?p:f}},{"./common":41}],43:[function(e,n,i){n.exports=function(s,a,o,l){for(var c=65535&s|0,h=s>>>16&65535|0,d=0;o!==0;){for(o-=d=2e3<o?2e3:o;h=h+(c=c+a[l++]|0)|0,--d;);c%=65521,h%=65521}return c|h<<16|0}},{}],44:[function(e,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,n,i){var s=function(){for(var a,o=[],l=0;l<256;l++){a=l;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;o[l]=a}return o}();n.exports=function(a,o,l,c){var h=s,d=c+l;a^=-1;for(var f=c;f<d;f++)a=a>>>8^h[255&(a^o[f])];return-1^a}},{}],46:[function(e,n,i){var s,a=e("../utils/common"),o=e("./trees"),l=e("./adler32"),c=e("./crc32"),h=e("./messages"),d=0,f=4,p=0,v=-2,g=-1,A=4,m=2,y=8,w=9,b=286,E=30,T=19,R=2*b+1,P=15,_=3,N=258,B=N+_+1,O=42,M=113,x=1,$=2,X=3,F=4;function W(C,Y){return C.msg=h[Y],Y}function H(C){return(C<<1)-(4<C?9:0)}function Z(C){for(var Y=C.length;0<=--Y;)C[Y]=0}function j(C){var Y=C.state,V=Y.pending;V>C.avail_out&&(V=C.avail_out),V!==0&&(a.arraySet(C.output,Y.pending_buf,Y.pending_out,V,C.next_out),C.next_out+=V,Y.pending_out+=V,C.total_out+=V,C.avail_out-=V,Y.pending-=V,Y.pending===0&&(Y.pending_out=0))}function z(C,Y){o._tr_flush_block(C,0<=C.block_start?C.block_start:-1,C.strstart-C.block_start,Y),C.block_start=C.strstart,j(C.strm)}function st(C,Y){C.pending_buf[C.pending++]=Y}function tt(C,Y){C.pending_buf[C.pending++]=Y>>>8&255,C.pending_buf[C.pending++]=255&Y}function et(C,Y){var V,D,L=C.max_chain_length,U=C.strstart,q=C.prev_length,nt=C.nice_match,G=C.strstart>C.w_size-B?C.strstart-(C.w_size-B):0,at=C.window,ft=C.w_mask,ot=C.prev,yt=C.strstart+N,Vt=at[U+q-1],Lt=at[U+q];C.prev_length>=C.good_match&&(L>>=2),nt>C.lookahead&&(nt=C.lookahead);do if(at[(V=Y)+q]===Lt&&at[V+q-1]===Vt&&at[V]===at[U]&&at[++V]===at[U+1]){U+=2,V++;do;while(at[++U]===at[++V]&&at[++U]===at[++V]&&at[++U]===at[++V]&&at[++U]===at[++V]&&at[++U]===at[++V]&&at[++U]===at[++V]&&at[++U]===at[++V]&&at[++U]===at[++V]&&U<yt);if(D=N-(yt-U),U=yt-N,q<D){if(C.match_start=Y,nt<=(q=D))break;Vt=at[U+q-1],Lt=at[U+q]}}while((Y=ot[Y&ft])>G&&--L!=0);return q<=C.lookahead?q:C.lookahead}function J(C){var Y,V,D,L,U,q,nt,G,at,ft,ot=C.w_size;do{if(L=C.window_size-C.lookahead-C.strstart,C.strstart>=ot+(ot-B)){for(a.arraySet(C.window,C.window,ot,ot,0),C.match_start-=ot,C.strstart-=ot,C.block_start-=ot,Y=V=C.hash_size;D=C.head[--Y],C.head[Y]=ot<=D?D-ot:0,--V;);for(Y=V=ot;D=C.prev[--Y],C.prev[Y]=ot<=D?D-ot:0,--V;);L+=ot}if(C.strm.avail_in===0)break;if(q=C.strm,nt=C.window,G=C.strstart+C.lookahead,at=L,ft=void 0,ft=q.avail_in,at<ft&&(ft=at),V=ft===0?0:(q.avail_in-=ft,a.arraySet(nt,q.input,q.next_in,ft,G),q.state.wrap===1?q.adler=l(q.adler,nt,ft,G):q.state.wrap===2&&(q.adler=c(q.adler,nt,ft,G)),q.next_in+=ft,q.total_in+=ft,ft),C.lookahead+=V,C.lookahead+C.insert>=_)for(U=C.strstart-C.insert,C.ins_h=C.window[U],C.ins_h=(C.ins_h<<C.hash_shift^C.window[U+1])&C.hash_mask;C.insert&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[U+_-1])&C.hash_mask,C.prev[U&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=U,U++,C.insert--,!(C.lookahead+C.insert<_)););}while(C.lookahead<B&&C.strm.avail_in!==0)}function K(C,Y){for(var V,D;;){if(C.lookahead<B){if(J(C),C.lookahead<B&&Y===d)return x;if(C.lookahead===0)break}if(V=0,C.lookahead>=_&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+_-1])&C.hash_mask,V=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),V!==0&&C.strstart-V<=C.w_size-B&&(C.match_length=et(C,V)),C.match_length>=_)if(D=o._tr_tally(C,C.strstart-C.match_start,C.match_length-_),C.lookahead-=C.match_length,C.match_length<=C.max_lazy_match&&C.lookahead>=_){for(C.match_length--;C.strstart++,C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+_-1])&C.hash_mask,V=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart,--C.match_length!=0;);C.strstart++}else C.strstart+=C.match_length,C.match_length=0,C.ins_h=C.window[C.strstart],C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+1])&C.hash_mask;else D=o._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++;if(D&&(z(C,!1),C.strm.avail_out===0))return x}return C.insert=C.strstart<_-1?C.strstart:_-1,Y===f?(z(C,!0),C.strm.avail_out===0?X:F):C.last_lit&&(z(C,!1),C.strm.avail_out===0)?x:$}function Q(C,Y){for(var V,D,L;;){if(C.lookahead<B){if(J(C),C.lookahead<B&&Y===d)return x;if(C.lookahead===0)break}if(V=0,C.lookahead>=_&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+_-1])&C.hash_mask,V=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),C.prev_length=C.match_length,C.prev_match=C.match_start,C.match_length=_-1,V!==0&&C.prev_length<C.max_lazy_match&&C.strstart-V<=C.w_size-B&&(C.match_length=et(C,V),C.match_length<=5&&(C.strategy===1||C.match_length===_&&4096<C.strstart-C.match_start)&&(C.match_length=_-1)),C.prev_length>=_&&C.match_length<=C.prev_length){for(L=C.strstart+C.lookahead-_,D=o._tr_tally(C,C.strstart-1-C.prev_match,C.prev_length-_),C.lookahead-=C.prev_length-1,C.prev_length-=2;++C.strstart<=L&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+_-1])&C.hash_mask,V=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),--C.prev_length!=0;);if(C.match_available=0,C.match_length=_-1,C.strstart++,D&&(z(C,!1),C.strm.avail_out===0))return x}else if(C.match_available){if((D=o._tr_tally(C,0,C.window[C.strstart-1]))&&z(C,!1),C.strstart++,C.lookahead--,C.strm.avail_out===0)return x}else C.match_available=1,C.strstart++,C.lookahead--}return C.match_available&&(D=o._tr_tally(C,0,C.window[C.strstart-1]),C.match_available=0),C.insert=C.strstart<_-1?C.strstart:_-1,Y===f?(z(C,!0),C.strm.avail_out===0?X:F):C.last_lit&&(z(C,!1),C.strm.avail_out===0)?x:$}function ct(C,Y,V,D,L){this.good_length=C,this.max_lazy=Y,this.nice_length=V,this.max_chain=D,this.func=L}function bt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*R),this.dyn_dtree=new a.Buf16(2*(2*E+1)),this.bl_tree=new a.Buf16(2*(2*T+1)),Z(this.dyn_ltree),Z(this.dyn_dtree),Z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(P+1),this.heap=new a.Buf16(2*b+1),Z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*b+1),Z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ut(C){var Y;return C&&C.state?(C.total_in=C.total_out=0,C.data_type=m,(Y=C.state).pending=0,Y.pending_out=0,Y.wrap<0&&(Y.wrap=-Y.wrap),Y.status=Y.wrap?O:M,C.adler=Y.wrap===2?0:1,Y.last_flush=d,o._tr_init(Y),p):W(C,v)}function Rt(C){var Y=ut(C);return Y===p&&function(V){V.window_size=2*V.w_size,Z(V.head),V.max_lazy_match=s[V.level].max_lazy,V.good_match=s[V.level].good_length,V.nice_match=s[V.level].nice_length,V.max_chain_length=s[V.level].max_chain,V.strstart=0,V.block_start=0,V.lookahead=0,V.insert=0,V.match_length=V.prev_length=_-1,V.match_available=0,V.ins_h=0}(C.state),Y}function It(C,Y,V,D,L,U){if(!C)return v;var q=1;if(Y===g&&(Y=6),D<0?(q=0,D=-D):15<D&&(q=2,D-=16),L<1||w<L||V!==y||D<8||15<D||Y<0||9<Y||U<0||A<U)return W(C,v);D===8&&(D=9);var nt=new bt;return(C.state=nt).strm=C,nt.wrap=q,nt.gzhead=null,nt.w_bits=D,nt.w_size=1<<nt.w_bits,nt.w_mask=nt.w_size-1,nt.hash_bits=L+7,nt.hash_size=1<<nt.hash_bits,nt.hash_mask=nt.hash_size-1,nt.hash_shift=~~((nt.hash_bits+_-1)/_),nt.window=new a.Buf8(2*nt.w_size),nt.head=new a.Buf16(nt.hash_size),nt.prev=new a.Buf16(nt.w_size),nt.lit_bufsize=1<<L+6,nt.pending_buf_size=4*nt.lit_bufsize,nt.pending_buf=new a.Buf8(nt.pending_buf_size),nt.d_buf=1*nt.lit_bufsize,nt.l_buf=3*nt.lit_bufsize,nt.level=Y,nt.strategy=U,nt.method=V,Rt(C)}s=[new ct(0,0,0,0,function(C,Y){var V=65535;for(V>C.pending_buf_size-5&&(V=C.pending_buf_size-5);;){if(C.lookahead<=1){if(J(C),C.lookahead===0&&Y===d)return x;if(C.lookahead===0)break}C.strstart+=C.lookahead,C.lookahead=0;var D=C.block_start+V;if((C.strstart===0||C.strstart>=D)&&(C.lookahead=C.strstart-D,C.strstart=D,z(C,!1),C.strm.avail_out===0)||C.strstart-C.block_start>=C.w_size-B&&(z(C,!1),C.strm.avail_out===0))return x}return C.insert=0,Y===f?(z(C,!0),C.strm.avail_out===0?X:F):(C.strstart>C.block_start&&(z(C,!1),C.strm.avail_out),x)}),new ct(4,4,8,4,K),new ct(4,5,16,8,K),new ct(4,6,32,32,K),new ct(4,4,16,16,Q),new ct(8,16,32,32,Q),new ct(8,16,128,128,Q),new ct(8,32,128,256,Q),new ct(32,128,258,1024,Q),new ct(32,258,258,4096,Q)],i.deflateInit=function(C,Y){return It(C,Y,y,15,8,0)},i.deflateInit2=It,i.deflateReset=Rt,i.deflateResetKeep=ut,i.deflateSetHeader=function(C,Y){return C&&C.state?C.state.wrap!==2?v:(C.state.gzhead=Y,p):v},i.deflate=function(C,Y){var V,D,L,U;if(!C||!C.state||5<Y||Y<0)return C?W(C,v):v;if(D=C.state,!C.output||!C.input&&C.avail_in!==0||D.status===666&&Y!==f)return W(C,C.avail_out===0?-5:v);if(D.strm=C,V=D.last_flush,D.last_flush=Y,D.status===O)if(D.wrap===2)C.adler=0,st(D,31),st(D,139),st(D,8),D.gzhead?(st(D,(D.gzhead.text?1:0)+(D.gzhead.hcrc?2:0)+(D.gzhead.extra?4:0)+(D.gzhead.name?8:0)+(D.gzhead.comment?16:0)),st(D,255&D.gzhead.time),st(D,D.gzhead.time>>8&255),st(D,D.gzhead.time>>16&255),st(D,D.gzhead.time>>24&255),st(D,D.level===9?2:2<=D.strategy||D.level<2?4:0),st(D,255&D.gzhead.os),D.gzhead.extra&&D.gzhead.extra.length&&(st(D,255&D.gzhead.extra.length),st(D,D.gzhead.extra.length>>8&255)),D.gzhead.hcrc&&(C.adler=c(C.adler,D.pending_buf,D.pending,0)),D.gzindex=0,D.status=69):(st(D,0),st(D,0),st(D,0),st(D,0),st(D,0),st(D,D.level===9?2:2<=D.strategy||D.level<2?4:0),st(D,3),D.status=M);else{var q=y+(D.w_bits-8<<4)<<8;q|=(2<=D.strategy||D.level<2?0:D.level<6?1:D.level===6?2:3)<<6,D.strstart!==0&&(q|=32),q+=31-q%31,D.status=M,tt(D,q),D.strstart!==0&&(tt(D,C.adler>>>16),tt(D,65535&C.adler)),C.adler=1}if(D.status===69)if(D.gzhead.extra){for(L=D.pending;D.gzindex<(65535&D.gzhead.extra.length)&&(D.pending!==D.pending_buf_size||(D.gzhead.hcrc&&D.pending>L&&(C.adler=c(C.adler,D.pending_buf,D.pending-L,L)),j(C),L=D.pending,D.pending!==D.pending_buf_size));)st(D,255&D.gzhead.extra[D.gzindex]),D.gzindex++;D.gzhead.hcrc&&D.pending>L&&(C.adler=c(C.adler,D.pending_buf,D.pending-L,L)),D.gzindex===D.gzhead.extra.length&&(D.gzindex=0,D.status=73)}else D.status=73;if(D.status===73)if(D.gzhead.name){L=D.pending;do{if(D.pending===D.pending_buf_size&&(D.gzhead.hcrc&&D.pending>L&&(C.adler=c(C.adler,D.pending_buf,D.pending-L,L)),j(C),L=D.pending,D.pending===D.pending_buf_size)){U=1;break}U=D.gzindex<D.gzhead.name.length?255&D.gzhead.name.charCodeAt(D.gzindex++):0,st(D,U)}while(U!==0);D.gzhead.hcrc&&D.pending>L&&(C.adler=c(C.adler,D.pending_buf,D.pending-L,L)),U===0&&(D.gzindex=0,D.status=91)}else D.status=91;if(D.status===91)if(D.gzhead.comment){L=D.pending;do{if(D.pending===D.pending_buf_size&&(D.gzhead.hcrc&&D.pending>L&&(C.adler=c(C.adler,D.pending_buf,D.pending-L,L)),j(C),L=D.pending,D.pending===D.pending_buf_size)){U=1;break}U=D.gzindex<D.gzhead.comment.length?255&D.gzhead.comment.charCodeAt(D.gzindex++):0,st(D,U)}while(U!==0);D.gzhead.hcrc&&D.pending>L&&(C.adler=c(C.adler,D.pending_buf,D.pending-L,L)),U===0&&(D.status=103)}else D.status=103;if(D.status===103&&(D.gzhead.hcrc?(D.pending+2>D.pending_buf_size&&j(C),D.pending+2<=D.pending_buf_size&&(st(D,255&C.adler),st(D,C.adler>>8&255),C.adler=0,D.status=M)):D.status=M),D.pending!==0){if(j(C),C.avail_out===0)return D.last_flush=-1,p}else if(C.avail_in===0&&H(Y)<=H(V)&&Y!==f)return W(C,-5);if(D.status===666&&C.avail_in!==0)return W(C,-5);if(C.avail_in!==0||D.lookahead!==0||Y!==d&&D.status!==666){var nt=D.strategy===2?function(G,at){for(var ft;;){if(G.lookahead===0&&(J(G),G.lookahead===0)){if(at===d)return x;break}if(G.match_length=0,ft=o._tr_tally(G,0,G.window[G.strstart]),G.lookahead--,G.strstart++,ft&&(z(G,!1),G.strm.avail_out===0))return x}return G.insert=0,at===f?(z(G,!0),G.strm.avail_out===0?X:F):G.last_lit&&(z(G,!1),G.strm.avail_out===0)?x:$}(D,Y):D.strategy===3?function(G,at){for(var ft,ot,yt,Vt,Lt=G.window;;){if(G.lookahead<=N){if(J(G),G.lookahead<=N&&at===d)return x;if(G.lookahead===0)break}if(G.match_length=0,G.lookahead>=_&&0<G.strstart&&(ot=Lt[yt=G.strstart-1])===Lt[++yt]&&ot===Lt[++yt]&&ot===Lt[++yt]){Vt=G.strstart+N;do;while(ot===Lt[++yt]&&ot===Lt[++yt]&&ot===Lt[++yt]&&ot===Lt[++yt]&&ot===Lt[++yt]&&ot===Lt[++yt]&&ot===Lt[++yt]&&ot===Lt[++yt]&&yt<Vt);G.match_length=N-(Vt-yt),G.match_length>G.lookahead&&(G.match_length=G.lookahead)}if(G.match_length>=_?(ft=o._tr_tally(G,1,G.match_length-_),G.lookahead-=G.match_length,G.strstart+=G.match_length,G.match_length=0):(ft=o._tr_tally(G,0,G.window[G.strstart]),G.lookahead--,G.strstart++),ft&&(z(G,!1),G.strm.avail_out===0))return x}return G.insert=0,at===f?(z(G,!0),G.strm.avail_out===0?X:F):G.last_lit&&(z(G,!1),G.strm.avail_out===0)?x:$}(D,Y):s[D.level].func(D,Y);if(nt!==X&&nt!==F||(D.status=666),nt===x||nt===X)return C.avail_out===0&&(D.last_flush=-1),p;if(nt===$&&(Y===1?o._tr_align(D):Y!==5&&(o._tr_stored_block(D,0,0,!1),Y===3&&(Z(D.head),D.lookahead===0&&(D.strstart=0,D.block_start=0,D.insert=0))),j(C),C.avail_out===0))return D.last_flush=-1,p}return Y!==f?p:D.wrap<=0?1:(D.wrap===2?(st(D,255&C.adler),st(D,C.adler>>8&255),st(D,C.adler>>16&255),st(D,C.adler>>24&255),st(D,255&C.total_in),st(D,C.total_in>>8&255),st(D,C.total_in>>16&255),st(D,C.total_in>>24&255)):(tt(D,C.adler>>>16),tt(D,65535&C.adler)),j(C),0<D.wrap&&(D.wrap=-D.wrap),D.pending!==0?p:1)},i.deflateEnd=function(C){var Y;return C&&C.state?(Y=C.state.status)!==O&&Y!==69&&Y!==73&&Y!==91&&Y!==103&&Y!==M&&Y!==666?W(C,v):(C.state=null,Y===M?W(C,-3):p):v},i.deflateSetDictionary=function(C,Y){var V,D,L,U,q,nt,G,at,ft=Y.length;if(!C||!C.state||(U=(V=C.state).wrap)===2||U===1&&V.status!==O||V.lookahead)return v;for(U===1&&(C.adler=l(C.adler,Y,ft,0)),V.wrap=0,ft>=V.w_size&&(U===0&&(Z(V.head),V.strstart=0,V.block_start=0,V.insert=0),at=new a.Buf8(V.w_size),a.arraySet(at,Y,ft-V.w_size,V.w_size,0),Y=at,ft=V.w_size),q=C.avail_in,nt=C.next_in,G=C.input,C.avail_in=ft,C.next_in=0,C.input=Y,J(V);V.lookahead>=_;){for(D=V.strstart,L=V.lookahead-(_-1);V.ins_h=(V.ins_h<<V.hash_shift^V.window[D+_-1])&V.hash_mask,V.prev[D&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=D,D++,--L;);V.strstart=D,V.lookahead=_-1,J(V)}return V.strstart+=V.lookahead,V.block_start=V.strstart,V.insert=V.lookahead,V.lookahead=0,V.match_length=V.prev_length=_-1,V.match_available=0,C.next_in=nt,C.input=G,C.avail_in=q,V.wrap=U,p},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,n,i){n.exports=function(s,a){var o,l,c,h,d,f,p,v,g,A,m,y,w,b,E,T,R,P,_,N,B,O,M,x,$;o=s.state,l=s.next_in,x=s.input,c=l+(s.avail_in-5),h=s.next_out,$=s.output,d=h-(a-s.avail_out),f=h+(s.avail_out-257),p=o.dmax,v=o.wsize,g=o.whave,A=o.wnext,m=o.window,y=o.hold,w=o.bits,b=o.lencode,E=o.distcode,T=(1<<o.lenbits)-1,R=(1<<o.distbits)-1;t:do{w<15&&(y+=x[l++]<<w,w+=8,y+=x[l++]<<w,w+=8),P=b[y&T];e:for(;;){if(y>>>=_=P>>>24,w-=_,(_=P>>>16&255)===0)$[h++]=65535&P;else{if(!(16&_)){if(!(64&_)){P=b[(65535&P)+(y&(1<<_)-1)];continue e}if(32&_){o.mode=12;break t}s.msg="invalid literal/length code",o.mode=30;break t}N=65535&P,(_&=15)&&(w<_&&(y+=x[l++]<<w,w+=8),N+=y&(1<<_)-1,y>>>=_,w-=_),w<15&&(y+=x[l++]<<w,w+=8,y+=x[l++]<<w,w+=8),P=E[y&R];n:for(;;){if(y>>>=_=P>>>24,w-=_,!(16&(_=P>>>16&255))){if(!(64&_)){P=E[(65535&P)+(y&(1<<_)-1)];continue n}s.msg="invalid distance code",o.mode=30;break t}if(B=65535&P,w<(_&=15)&&(y+=x[l++]<<w,(w+=8)<_&&(y+=x[l++]<<w,w+=8)),p<(B+=y&(1<<_)-1)){s.msg="invalid distance too far back",o.mode=30;break t}if(y>>>=_,w-=_,(_=h-d)<B){if(g<(_=B-_)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break t}if(M=m,(O=0)===A){if(O+=v-_,_<N){for(N-=_;$[h++]=m[O++],--_;);O=h-B,M=$}}else if(A<_){if(O+=v+A-_,(_-=A)<N){for(N-=_;$[h++]=m[O++],--_;);if(O=0,A<N){for(N-=_=A;$[h++]=m[O++],--_;);O=h-B,M=$}}}else if(O+=A-_,_<N){for(N-=_;$[h++]=m[O++],--_;);O=h-B,M=$}for(;2<N;)$[h++]=M[O++],$[h++]=M[O++],$[h++]=M[O++],N-=3;N&&($[h++]=M[O++],1<N&&($[h++]=M[O++]))}else{for(O=h-B;$[h++]=$[O++],$[h++]=$[O++],$[h++]=$[O++],2<(N-=3););N&&($[h++]=$[O++],1<N&&($[h++]=$[O++]))}break}}break}}while(l<c&&h<f);l-=N=w>>3,y&=(1<<(w-=N<<3))-1,s.next_in=l,s.next_out=h,s.avail_in=l<c?c-l+5:5-(l-c),s.avail_out=h<f?f-h+257:257-(h-f),o.hold=y,o.bits=w}},{}],49:[function(e,n,i){var s=e("../utils/common"),a=e("./adler32"),o=e("./crc32"),l=e("./inffast"),c=e("./inftrees"),h=1,d=2,f=0,p=-2,v=1,g=852,A=592;function m(O){return(O>>>24&255)+(O>>>8&65280)+((65280&O)<<8)+((255&O)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(O){var M;return O&&O.state?(M=O.state,O.total_in=O.total_out=M.total=0,O.msg="",M.wrap&&(O.adler=1&M.wrap),M.mode=v,M.last=0,M.havedict=0,M.dmax=32768,M.head=null,M.hold=0,M.bits=0,M.lencode=M.lendyn=new s.Buf32(g),M.distcode=M.distdyn=new s.Buf32(A),M.sane=1,M.back=-1,f):p}function b(O){var M;return O&&O.state?((M=O.state).wsize=0,M.whave=0,M.wnext=0,w(O)):p}function E(O,M){var x,$;return O&&O.state?($=O.state,M<0?(x=0,M=-M):(x=1+(M>>4),M<48&&(M&=15)),M&&(M<8||15<M)?p:($.window!==null&&$.wbits!==M&&($.window=null),$.wrap=x,$.wbits=M,b(O))):p}function T(O,M){var x,$;return O?($=new y,(O.state=$).window=null,(x=E(O,M))!==f&&(O.state=null),x):p}var R,P,_=!0;function N(O){if(_){var M;for(R=new s.Buf32(512),P=new s.Buf32(32),M=0;M<144;)O.lens[M++]=8;for(;M<256;)O.lens[M++]=9;for(;M<280;)O.lens[M++]=7;for(;M<288;)O.lens[M++]=8;for(c(h,O.lens,0,288,R,0,O.work,{bits:9}),M=0;M<32;)O.lens[M++]=5;c(d,O.lens,0,32,P,0,O.work,{bits:5}),_=!1}O.lencode=R,O.lenbits=9,O.distcode=P,O.distbits=5}function B(O,M,x,$){var X,F=O.state;return F.window===null&&(F.wsize=1<<F.wbits,F.wnext=0,F.whave=0,F.window=new s.Buf8(F.wsize)),$>=F.wsize?(s.arraySet(F.window,M,x-F.wsize,F.wsize,0),F.wnext=0,F.whave=F.wsize):($<(X=F.wsize-F.wnext)&&(X=$),s.arraySet(F.window,M,x-$,X,F.wnext),($-=X)?(s.arraySet(F.window,M,x-$,$,0),F.wnext=$,F.whave=F.wsize):(F.wnext+=X,F.wnext===F.wsize&&(F.wnext=0),F.whave<F.wsize&&(F.whave+=X))),0}i.inflateReset=b,i.inflateReset2=E,i.inflateResetKeep=w,i.inflateInit=function(O){return T(O,15)},i.inflateInit2=T,i.inflate=function(O,M){var x,$,X,F,W,H,Z,j,z,st,tt,et,J,K,Q,ct,bt,ut,Rt,It,C,Y,V,D,L=0,U=new s.Buf8(4),q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!O||!O.state||!O.output||!O.input&&O.avail_in!==0)return p;(x=O.state).mode===12&&(x.mode=13),W=O.next_out,X=O.output,Z=O.avail_out,F=O.next_in,$=O.input,H=O.avail_in,j=x.hold,z=x.bits,st=H,tt=Z,Y=f;t:for(;;)switch(x.mode){case v:if(x.wrap===0){x.mode=13;break}for(;z<16;){if(H===0)break t;H--,j+=$[F++]<<z,z+=8}if(2&x.wrap&&j===35615){U[x.check=0]=255&j,U[1]=j>>>8&255,x.check=o(x.check,U,2,0),z=j=0,x.mode=2;break}if(x.flags=0,x.head&&(x.head.done=!1),!(1&x.wrap)||(((255&j)<<8)+(j>>8))%31){O.msg="incorrect header check",x.mode=30;break}if((15&j)!=8){O.msg="unknown compression method",x.mode=30;break}if(z-=4,C=8+(15&(j>>>=4)),x.wbits===0)x.wbits=C;else if(C>x.wbits){O.msg="invalid window size",x.mode=30;break}x.dmax=1<<C,O.adler=x.check=1,x.mode=512&j?10:12,z=j=0;break;case 2:for(;z<16;){if(H===0)break t;H--,j+=$[F++]<<z,z+=8}if(x.flags=j,(255&x.flags)!=8){O.msg="unknown compression method",x.mode=30;break}if(57344&x.flags){O.msg="unknown header flags set",x.mode=30;break}x.head&&(x.head.text=j>>8&1),512&x.flags&&(U[0]=255&j,U[1]=j>>>8&255,x.check=o(x.check,U,2,0)),z=j=0,x.mode=3;case 3:for(;z<32;){if(H===0)break t;H--,j+=$[F++]<<z,z+=8}x.head&&(x.head.time=j),512&x.flags&&(U[0]=255&j,U[1]=j>>>8&255,U[2]=j>>>16&255,U[3]=j>>>24&255,x.check=o(x.check,U,4,0)),z=j=0,x.mode=4;case 4:for(;z<16;){if(H===0)break t;H--,j+=$[F++]<<z,z+=8}x.head&&(x.head.xflags=255&j,x.head.os=j>>8),512&x.flags&&(U[0]=255&j,U[1]=j>>>8&255,x.check=o(x.check,U,2,0)),z=j=0,x.mode=5;case 5:if(1024&x.flags){for(;z<16;){if(H===0)break t;H--,j+=$[F++]<<z,z+=8}x.length=j,x.head&&(x.head.extra_len=j),512&x.flags&&(U[0]=255&j,U[1]=j>>>8&255,x.check=o(x.check,U,2,0)),z=j=0}else x.head&&(x.head.extra=null);x.mode=6;case 6:if(1024&x.flags&&(H<(et=x.length)&&(et=H),et&&(x.head&&(C=x.head.extra_len-x.length,x.head.extra||(x.head.extra=new Array(x.head.extra_len)),s.arraySet(x.head.extra,$,F,et,C)),512&x.flags&&(x.check=o(x.check,$,et,F)),H-=et,F+=et,x.length-=et),x.length))break t;x.length=0,x.mode=7;case 7:if(2048&x.flags){if(H===0)break t;for(et=0;C=$[F+et++],x.head&&C&&x.length<65536&&(x.head.name+=String.fromCharCode(C)),C&&et<H;);if(512&x.flags&&(x.check=o(x.check,$,et,F)),H-=et,F+=et,C)break t}else x.head&&(x.head.name=null);x.length=0,x.mode=8;case 8:if(4096&x.flags){if(H===0)break t;for(et=0;C=$[F+et++],x.head&&C&&x.length<65536&&(x.head.comment+=String.fromCharCode(C)),C&&et<H;);if(512&x.flags&&(x.check=o(x.check,$,et,F)),H-=et,F+=et,C)break t}else x.head&&(x.head.comment=null);x.mode=9;case 9:if(512&x.flags){for(;z<16;){if(H===0)break t;H--,j+=$[F++]<<z,z+=8}if(j!==(65535&x.check)){O.msg="header crc mismatch",x.mode=30;break}z=j=0}x.head&&(x.head.hcrc=x.flags>>9&1,x.head.done=!0),O.adler=x.check=0,x.mode=12;break;case 10:for(;z<32;){if(H===0)break t;H--,j+=$[F++]<<z,z+=8}O.adler=x.check=m(j),z=j=0,x.mode=11;case 11:if(x.havedict===0)return O.next_out=W,O.avail_out=Z,O.next_in=F,O.avail_in=H,x.hold=j,x.bits=z,2;O.adler=x.check=1,x.mode=12;case 12:if(M===5||M===6)break t;case 13:if(x.last){j>>>=7&z,z-=7&z,x.mode=27;break}for(;z<3;){if(H===0)break t;H--,j+=$[F++]<<z,z+=8}switch(x.last=1&j,z-=1,3&(j>>>=1)){case 0:x.mode=14;break;case 1:if(N(x),x.mode=20,M!==6)break;j>>>=2,z-=2;break t;case 2:x.mode=17;break;case 3:O.msg="invalid block type",x.mode=30}j>>>=2,z-=2;break;case 14:for(j>>>=7&z,z-=7&z;z<32;){if(H===0)break t;H--,j+=$[F++]<<z,z+=8}if((65535&j)!=(j>>>16^65535)){O.msg="invalid stored block lengths",x.mode=30;break}if(x.length=65535&j,z=j=0,x.mode=15,M===6)break t;case 15:x.mode=16;case 16:if(et=x.length){if(H<et&&(et=H),Z<et&&(et=Z),et===0)break t;s.arraySet(X,$,F,et,W),H-=et,F+=et,Z-=et,W+=et,x.length-=et;break}x.mode=12;break;case 17:for(;z<14;){if(H===0)break t;H--,j+=$[F++]<<z,z+=8}if(x.nlen=257+(31&j),j>>>=5,z-=5,x.ndist=1+(31&j),j>>>=5,z-=5,x.ncode=4+(15&j),j>>>=4,z-=4,286<x.nlen||30<x.ndist){O.msg="too many length or distance symbols",x.mode=30;break}x.have=0,x.mode=18;case 18:for(;x.have<x.ncode;){for(;z<3;){if(H===0)break t;H--,j+=$[F++]<<z,z+=8}x.lens[q[x.have++]]=7&j,j>>>=3,z-=3}for(;x.have<19;)x.lens[q[x.have++]]=0;if(x.lencode=x.lendyn,x.lenbits=7,V={bits:x.lenbits},Y=c(0,x.lens,0,19,x.lencode,0,x.work,V),x.lenbits=V.bits,Y){O.msg="invalid code lengths set",x.mode=30;break}x.have=0,x.mode=19;case 19:for(;x.have<x.nlen+x.ndist;){for(;ct=(L=x.lencode[j&(1<<x.lenbits)-1])>>>16&255,bt=65535&L,!((Q=L>>>24)<=z);){if(H===0)break t;H--,j+=$[F++]<<z,z+=8}if(bt<16)j>>>=Q,z-=Q,x.lens[x.have++]=bt;else{if(bt===16){for(D=Q+2;z<D;){if(H===0)break t;H--,j+=$[F++]<<z,z+=8}if(j>>>=Q,z-=Q,x.have===0){O.msg="invalid bit length repeat",x.mode=30;break}C=x.lens[x.have-1],et=3+(3&j),j>>>=2,z-=2}else if(bt===17){for(D=Q+3;z<D;){if(H===0)break t;H--,j+=$[F++]<<z,z+=8}z-=Q,C=0,et=3+(7&(j>>>=Q)),j>>>=3,z-=3}else{for(D=Q+7;z<D;){if(H===0)break t;H--,j+=$[F++]<<z,z+=8}z-=Q,C=0,et=11+(127&(j>>>=Q)),j>>>=7,z-=7}if(x.have+et>x.nlen+x.ndist){O.msg="invalid bit length repeat",x.mode=30;break}for(;et--;)x.lens[x.have++]=C}}if(x.mode===30)break;if(x.lens[256]===0){O.msg="invalid code -- missing end-of-block",x.mode=30;break}if(x.lenbits=9,V={bits:x.lenbits},Y=c(h,x.lens,0,x.nlen,x.lencode,0,x.work,V),x.lenbits=V.bits,Y){O.msg="invalid literal/lengths set",x.mode=30;break}if(x.distbits=6,x.distcode=x.distdyn,V={bits:x.distbits},Y=c(d,x.lens,x.nlen,x.ndist,x.distcode,0,x.work,V),x.distbits=V.bits,Y){O.msg="invalid distances set",x.mode=30;break}if(x.mode=20,M===6)break t;case 20:x.mode=21;case 21:if(6<=H&&258<=Z){O.next_out=W,O.avail_out=Z,O.next_in=F,O.avail_in=H,x.hold=j,x.bits=z,l(O,tt),W=O.next_out,X=O.output,Z=O.avail_out,F=O.next_in,$=O.input,H=O.avail_in,j=x.hold,z=x.bits,x.mode===12&&(x.back=-1);break}for(x.back=0;ct=(L=x.lencode[j&(1<<x.lenbits)-1])>>>16&255,bt=65535&L,!((Q=L>>>24)<=z);){if(H===0)break t;H--,j+=$[F++]<<z,z+=8}if(ct&&!(240&ct)){for(ut=Q,Rt=ct,It=bt;ct=(L=x.lencode[It+((j&(1<<ut+Rt)-1)>>ut)])>>>16&255,bt=65535&L,!(ut+(Q=L>>>24)<=z);){if(H===0)break t;H--,j+=$[F++]<<z,z+=8}j>>>=ut,z-=ut,x.back+=ut}if(j>>>=Q,z-=Q,x.back+=Q,x.length=bt,ct===0){x.mode=26;break}if(32&ct){x.back=-1,x.mode=12;break}if(64&ct){O.msg="invalid literal/length code",x.mode=30;break}x.extra=15&ct,x.mode=22;case 22:if(x.extra){for(D=x.extra;z<D;){if(H===0)break t;H--,j+=$[F++]<<z,z+=8}x.length+=j&(1<<x.extra)-1,j>>>=x.extra,z-=x.extra,x.back+=x.extra}x.was=x.length,x.mode=23;case 23:for(;ct=(L=x.distcode[j&(1<<x.distbits)-1])>>>16&255,bt=65535&L,!((Q=L>>>24)<=z);){if(H===0)break t;H--,j+=$[F++]<<z,z+=8}if(!(240&ct)){for(ut=Q,Rt=ct,It=bt;ct=(L=x.distcode[It+((j&(1<<ut+Rt)-1)>>ut)])>>>16&255,bt=65535&L,!(ut+(Q=L>>>24)<=z);){if(H===0)break t;H--,j+=$[F++]<<z,z+=8}j>>>=ut,z-=ut,x.back+=ut}if(j>>>=Q,z-=Q,x.back+=Q,64&ct){O.msg="invalid distance code",x.mode=30;break}x.offset=bt,x.extra=15&ct,x.mode=24;case 24:if(x.extra){for(D=x.extra;z<D;){if(H===0)break t;H--,j+=$[F++]<<z,z+=8}x.offset+=j&(1<<x.extra)-1,j>>>=x.extra,z-=x.extra,x.back+=x.extra}if(x.offset>x.dmax){O.msg="invalid distance too far back",x.mode=30;break}x.mode=25;case 25:if(Z===0)break t;if(et=tt-Z,x.offset>et){if((et=x.offset-et)>x.whave&&x.sane){O.msg="invalid distance too far back",x.mode=30;break}J=et>x.wnext?(et-=x.wnext,x.wsize-et):x.wnext-et,et>x.length&&(et=x.length),K=x.window}else K=X,J=W-x.offset,et=x.length;for(Z<et&&(et=Z),Z-=et,x.length-=et;X[W++]=K[J++],--et;);x.length===0&&(x.mode=21);break;case 26:if(Z===0)break t;X[W++]=x.length,Z--,x.mode=21;break;case 27:if(x.wrap){for(;z<32;){if(H===0)break t;H--,j|=$[F++]<<z,z+=8}if(tt-=Z,O.total_out+=tt,x.total+=tt,tt&&(O.adler=x.check=x.flags?o(x.check,X,tt,W-tt):a(x.check,X,tt,W-tt)),tt=Z,(x.flags?j:m(j))!==x.check){O.msg="incorrect data check",x.mode=30;break}z=j=0}x.mode=28;case 28:if(x.wrap&&x.flags){for(;z<32;){if(H===0)break t;H--,j+=$[F++]<<z,z+=8}if(j!==(4294967295&x.total)){O.msg="incorrect length check",x.mode=30;break}z=j=0}x.mode=29;case 29:Y=1;break t;case 30:Y=-3;break t;case 31:return-4;case 32:default:return p}return O.next_out=W,O.avail_out=Z,O.next_in=F,O.avail_in=H,x.hold=j,x.bits=z,(x.wsize||tt!==O.avail_out&&x.mode<30&&(x.mode<27||M!==4))&&B(O,O.output,O.next_out,tt-O.avail_out)?(x.mode=31,-4):(st-=O.avail_in,tt-=O.avail_out,O.total_in+=st,O.total_out+=tt,x.total+=tt,x.wrap&&tt&&(O.adler=x.check=x.flags?o(x.check,X,tt,O.next_out-tt):a(x.check,X,tt,O.next_out-tt)),O.data_type=x.bits+(x.last?64:0)+(x.mode===12?128:0)+(x.mode===20||x.mode===15?256:0),(st==0&&tt===0||M===4)&&Y===f&&(Y=-5),Y)},i.inflateEnd=function(O){if(!O||!O.state)return p;var M=O.state;return M.window&&(M.window=null),O.state=null,f},i.inflateGetHeader=function(O,M){var x;return O&&O.state&&2&(x=O.state).wrap?((x.head=M).done=!1,f):p},i.inflateSetDictionary=function(O,M){var x,$=M.length;return O&&O.state?(x=O.state).wrap!==0&&x.mode!==11?p:x.mode===11&&a(1,M,$,0)!==x.check?-3:B(O,M,$,$)?(x.mode=31,-4):(x.havedict=1,f):p},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,n,i){var s=e("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(h,d,f,p,v,g,A,m){var y,w,b,E,T,R,P,_,N,B=m.bits,O=0,M=0,x=0,$=0,X=0,F=0,W=0,H=0,Z=0,j=0,z=null,st=0,tt=new s.Buf16(16),et=new s.Buf16(16),J=null,K=0;for(O=0;O<=15;O++)tt[O]=0;for(M=0;M<p;M++)tt[d[f+M]]++;for(X=B,$=15;1<=$&&tt[$]===0;$--);if($<X&&(X=$),$===0)return v[g++]=20971520,v[g++]=20971520,m.bits=1,0;for(x=1;x<$&&tt[x]===0;x++);for(X<x&&(X=x),O=H=1;O<=15;O++)if(H<<=1,(H-=tt[O])<0)return-1;if(0<H&&(h===0||$!==1))return-1;for(et[1]=0,O=1;O<15;O++)et[O+1]=et[O]+tt[O];for(M=0;M<p;M++)d[f+M]!==0&&(A[et[d[f+M]]++]=M);if(R=h===0?(z=J=A,19):h===1?(z=a,st-=257,J=o,K-=257,256):(z=l,J=c,-1),O=x,T=g,W=M=j=0,b=-1,E=(Z=1<<(F=X))-1,h===1&&852<Z||h===2&&592<Z)return 1;for(;;){for(P=O-W,N=A[M]<R?(_=0,A[M]):A[M]>R?(_=J[K+A[M]],z[st+A[M]]):(_=96,0),y=1<<O-W,x=w=1<<F;v[T+(j>>W)+(w-=y)]=P<<24|_<<16|N|0,w!==0;);for(y=1<<O-1;j&y;)y>>=1;if(y!==0?(j&=y-1,j+=y):j=0,M++,--tt[O]==0){if(O===$)break;O=d[f+A[M]]}if(X<O&&(j&E)!==b){for(W===0&&(W=X),T+=x,H=1<<(F=O-W);F+W<$&&!((H-=tt[F+W])<=0);)F++,H<<=1;if(Z+=1<<F,h===1&&852<Z||h===2&&592<Z)return 1;v[b=j&E]=X<<24|F<<16|T-g|0}}return j!==0&&(v[T+j]=O-W<<24|64<<16|0),m.bits=X,0}},{"../utils/common":41}],51:[function(e,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,n,i){var s=e("../utils/common"),a=0,o=1;function l(L){for(var U=L.length;0<=--U;)L[U]=0}var c=0,h=29,d=256,f=d+1+h,p=30,v=19,g=2*f+1,A=15,m=16,y=7,w=256,b=16,E=17,T=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],_=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],B=new Array(2*(f+2));l(B);var O=new Array(2*p);l(O);var M=new Array(512);l(M);var x=new Array(256);l(x);var $=new Array(h);l($);var X,F,W,H=new Array(p);function Z(L,U,q,nt,G){this.static_tree=L,this.extra_bits=U,this.extra_base=q,this.elems=nt,this.max_length=G,this.has_stree=L&&L.length}function j(L,U){this.dyn_tree=L,this.max_code=0,this.stat_desc=U}function z(L){return L<256?M[L]:M[256+(L>>>7)]}function st(L,U){L.pending_buf[L.pending++]=255&U,L.pending_buf[L.pending++]=U>>>8&255}function tt(L,U,q){L.bi_valid>m-q?(L.bi_buf|=U<<L.bi_valid&65535,st(L,L.bi_buf),L.bi_buf=U>>m-L.bi_valid,L.bi_valid+=q-m):(L.bi_buf|=U<<L.bi_valid&65535,L.bi_valid+=q)}function et(L,U,q){tt(L,q[2*U],q[2*U+1])}function J(L,U){for(var q=0;q|=1&L,L>>>=1,q<<=1,0<--U;);return q>>>1}function K(L,U,q){var nt,G,at=new Array(A+1),ft=0;for(nt=1;nt<=A;nt++)at[nt]=ft=ft+q[nt-1]<<1;for(G=0;G<=U;G++){var ot=L[2*G+1];ot!==0&&(L[2*G]=J(at[ot]++,ot))}}function Q(L){var U;for(U=0;U<f;U++)L.dyn_ltree[2*U]=0;for(U=0;U<p;U++)L.dyn_dtree[2*U]=0;for(U=0;U<v;U++)L.bl_tree[2*U]=0;L.dyn_ltree[2*w]=1,L.opt_len=L.static_len=0,L.last_lit=L.matches=0}function ct(L){8<L.bi_valid?st(L,L.bi_buf):0<L.bi_valid&&(L.pending_buf[L.pending++]=L.bi_buf),L.bi_buf=0,L.bi_valid=0}function bt(L,U,q,nt){var G=2*U,at=2*q;return L[G]<L[at]||L[G]===L[at]&&nt[U]<=nt[q]}function ut(L,U,q){for(var nt=L.heap[q],G=q<<1;G<=L.heap_len&&(G<L.heap_len&&bt(U,L.heap[G+1],L.heap[G],L.depth)&&G++,!bt(U,nt,L.heap[G],L.depth));)L.heap[q]=L.heap[G],q=G,G<<=1;L.heap[q]=nt}function Rt(L,U,q){var nt,G,at,ft,ot=0;if(L.last_lit!==0)for(;nt=L.pending_buf[L.d_buf+2*ot]<<8|L.pending_buf[L.d_buf+2*ot+1],G=L.pending_buf[L.l_buf+ot],ot++,nt===0?et(L,G,U):(et(L,(at=x[G])+d+1,U),(ft=R[at])!==0&&tt(L,G-=$[at],ft),et(L,at=z(--nt),q),(ft=P[at])!==0&&tt(L,nt-=H[at],ft)),ot<L.last_lit;);et(L,w,U)}function It(L,U){var q,nt,G,at=U.dyn_tree,ft=U.stat_desc.static_tree,ot=U.stat_desc.has_stree,yt=U.stat_desc.elems,Vt=-1;for(L.heap_len=0,L.heap_max=g,q=0;q<yt;q++)at[2*q]!==0?(L.heap[++L.heap_len]=Vt=q,L.depth[q]=0):at[2*q+1]=0;for(;L.heap_len<2;)at[2*(G=L.heap[++L.heap_len]=Vt<2?++Vt:0)]=1,L.depth[G]=0,L.opt_len--,ot&&(L.static_len-=ft[2*G+1]);for(U.max_code=Vt,q=L.heap_len>>1;1<=q;q--)ut(L,at,q);for(G=yt;q=L.heap[1],L.heap[1]=L.heap[L.heap_len--],ut(L,at,1),nt=L.heap[1],L.heap[--L.heap_max]=q,L.heap[--L.heap_max]=nt,at[2*G]=at[2*q]+at[2*nt],L.depth[G]=(L.depth[q]>=L.depth[nt]?L.depth[q]:L.depth[nt])+1,at[2*q+1]=at[2*nt+1]=G,L.heap[1]=G++,ut(L,at,1),2<=L.heap_len;);L.heap[--L.heap_max]=L.heap[1],function(Lt,nr){var oc,$r,lc,ue,of,Yg,bi=nr.dyn_tree,Z0=nr.max_code,ex=nr.stat_desc.static_tree,nx=nr.stat_desc.has_stree,rx=nr.stat_desc.extra_bits,Q0=nr.stat_desc.extra_base,uc=nr.stat_desc.max_length,lf=0;for(ue=0;ue<=A;ue++)Lt.bl_count[ue]=0;for(bi[2*Lt.heap[Lt.heap_max]+1]=0,oc=Lt.heap_max+1;oc<g;oc++)uc<(ue=bi[2*bi[2*($r=Lt.heap[oc])+1]+1]+1)&&(ue=uc,lf++),bi[2*$r+1]=ue,Z0<$r||(Lt.bl_count[ue]++,of=0,Q0<=$r&&(of=rx[$r-Q0]),Yg=bi[2*$r],Lt.opt_len+=Yg*(ue+of),nx&&(Lt.static_len+=Yg*(ex[2*$r+1]+of)));if(lf!==0){do{for(ue=uc-1;Lt.bl_count[ue]===0;)ue--;Lt.bl_count[ue]--,Lt.bl_count[ue+1]+=2,Lt.bl_count[uc]--,lf-=2}while(0<lf);for(ue=uc;ue!==0;ue--)for($r=Lt.bl_count[ue];$r!==0;)Z0<(lc=Lt.heap[--oc])||(bi[2*lc+1]!==ue&&(Lt.opt_len+=(ue-bi[2*lc+1])*bi[2*lc],bi[2*lc+1]=ue),$r--)}}(L,U),K(at,Vt,L.bl_count)}function C(L,U,q){var nt,G,at=-1,ft=U[1],ot=0,yt=7,Vt=4;for(ft===0&&(yt=138,Vt=3),U[2*(q+1)+1]=65535,nt=0;nt<=q;nt++)G=ft,ft=U[2*(nt+1)+1],++ot<yt&&G===ft||(ot<Vt?L.bl_tree[2*G]+=ot:G!==0?(G!==at&&L.bl_tree[2*G]++,L.bl_tree[2*b]++):ot<=10?L.bl_tree[2*E]++:L.bl_tree[2*T]++,at=G,Vt=(ot=0)===ft?(yt=138,3):G===ft?(yt=6,3):(yt=7,4))}function Y(L,U,q){var nt,G,at=-1,ft=U[1],ot=0,yt=7,Vt=4;for(ft===0&&(yt=138,Vt=3),nt=0;nt<=q;nt++)if(G=ft,ft=U[2*(nt+1)+1],!(++ot<yt&&G===ft)){if(ot<Vt)for(;et(L,G,L.bl_tree),--ot!=0;);else G!==0?(G!==at&&(et(L,G,L.bl_tree),ot--),et(L,b,L.bl_tree),tt(L,ot-3,2)):ot<=10?(et(L,E,L.bl_tree),tt(L,ot-3,3)):(et(L,T,L.bl_tree),tt(L,ot-11,7));at=G,Vt=(ot=0)===ft?(yt=138,3):G===ft?(yt=6,3):(yt=7,4)}}l(H);var V=!1;function D(L,U,q,nt){tt(L,(c<<1)+(nt?1:0),3),function(G,at,ft,ot){ct(G),st(G,ft),st(G,~ft),s.arraySet(G.pending_buf,G.window,at,ft,G.pending),G.pending+=ft}(L,U,q)}i._tr_init=function(L){V||(function(){var U,q,nt,G,at,ft=new Array(A+1);for(G=nt=0;G<h-1;G++)for($[G]=nt,U=0;U<1<<R[G];U++)x[nt++]=G;for(x[nt-1]=G,G=at=0;G<16;G++)for(H[G]=at,U=0;U<1<<P[G];U++)M[at++]=G;for(at>>=7;G<p;G++)for(H[G]=at<<7,U=0;U<1<<P[G]-7;U++)M[256+at++]=G;for(q=0;q<=A;q++)ft[q]=0;for(U=0;U<=143;)B[2*U+1]=8,U++,ft[8]++;for(;U<=255;)B[2*U+1]=9,U++,ft[9]++;for(;U<=279;)B[2*U+1]=7,U++,ft[7]++;for(;U<=287;)B[2*U+1]=8,U++,ft[8]++;for(K(B,f+1,ft),U=0;U<p;U++)O[2*U+1]=5,O[2*U]=J(U,5);X=new Z(B,R,d+1,f,A),F=new Z(O,P,0,p,A),W=new Z(new Array(0),_,0,v,y)}(),V=!0),L.l_desc=new j(L.dyn_ltree,X),L.d_desc=new j(L.dyn_dtree,F),L.bl_desc=new j(L.bl_tree,W),L.bi_buf=0,L.bi_valid=0,Q(L)},i._tr_stored_block=D,i._tr_flush_block=function(L,U,q,nt){var G,at,ft=0;0<L.level?(L.strm.data_type===2&&(L.strm.data_type=function(ot){var yt,Vt=4093624447;for(yt=0;yt<=31;yt++,Vt>>>=1)if(1&Vt&&ot.dyn_ltree[2*yt]!==0)return a;if(ot.dyn_ltree[18]!==0||ot.dyn_ltree[20]!==0||ot.dyn_ltree[26]!==0)return o;for(yt=32;yt<d;yt++)if(ot.dyn_ltree[2*yt]!==0)return o;return a}(L)),It(L,L.l_desc),It(L,L.d_desc),ft=function(ot){var yt;for(C(ot,ot.dyn_ltree,ot.l_desc.max_code),C(ot,ot.dyn_dtree,ot.d_desc.max_code),It(ot,ot.bl_desc),yt=v-1;3<=yt&&ot.bl_tree[2*N[yt]+1]===0;yt--);return ot.opt_len+=3*(yt+1)+5+5+4,yt}(L),G=L.opt_len+3+7>>>3,(at=L.static_len+3+7>>>3)<=G&&(G=at)):G=at=q+5,q+4<=G&&U!==-1?D(L,U,q,nt):L.strategy===4||at===G?(tt(L,2+(nt?1:0),3),Rt(L,B,O)):(tt(L,4+(nt?1:0),3),function(ot,yt,Vt,Lt){var nr;for(tt(ot,yt-257,5),tt(ot,Vt-1,5),tt(ot,Lt-4,4),nr=0;nr<Lt;nr++)tt(ot,ot.bl_tree[2*N[nr]+1],3);Y(ot,ot.dyn_ltree,yt-1),Y(ot,ot.dyn_dtree,Vt-1)}(L,L.l_desc.max_code+1,L.d_desc.max_code+1,ft+1),Rt(L,L.dyn_ltree,L.dyn_dtree)),Q(L),nt&&ct(L)},i._tr_tally=function(L,U,q){return L.pending_buf[L.d_buf+2*L.last_lit]=U>>>8&255,L.pending_buf[L.d_buf+2*L.last_lit+1]=255&U,L.pending_buf[L.l_buf+L.last_lit]=255&q,L.last_lit++,U===0?L.dyn_ltree[2*q]++:(L.matches++,U--,L.dyn_ltree[2*(x[q]+d+1)]++,L.dyn_dtree[2*z(U)]++),L.last_lit===L.lit_bufsize-1},i._tr_align=function(L){tt(L,2,3),et(L,w,B),function(U){U.bi_valid===16?(st(U,U.bi_buf),U.bi_buf=0,U.bi_valid=0):8<=U.bi_valid&&(U.pending_buf[U.pending++]=255&U.bi_buf,U.bi_buf>>=8,U.bi_valid-=8)}(L)}},{"../utils/common":41}],53:[function(e,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,n,i){(function(s){(function(a,o){if(!a.setImmediate){var l,c,h,d,f=1,p={},v=!1,g=a.document,A=Object.getPrototypeOf&&Object.getPrototypeOf(a);A=A&&A.setTimeout?A:a,l={}.toString.call(a.process)==="[object process]"?function(b){process.nextTick(function(){y(b)})}:function(){if(a.postMessage&&!a.importScripts){var b=!0,E=a.onmessage;return a.onmessage=function(){b=!1},a.postMessage("","*"),a.onmessage=E,b}}()?(d="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",w,!1):a.attachEvent("onmessage",w),function(b){a.postMessage(d+b,"*")}):a.MessageChannel?((h=new MessageChannel).port1.onmessage=function(b){y(b.data)},function(b){h.port2.postMessage(b)}):g&&"onreadystatechange"in g.createElement("script")?(c=g.documentElement,function(b){var E=g.createElement("script");E.onreadystatechange=function(){y(b),E.onreadystatechange=null,c.removeChild(E),E=null},c.appendChild(E)}):function(b){setTimeout(y,0,b)},A.setImmediate=function(b){typeof b!="function"&&(b=new Function(""+b));for(var E=new Array(arguments.length-1),T=0;T<E.length;T++)E[T]=arguments[T+1];var R={callback:b,args:E};return p[f]=R,l(f),f++},A.clearImmediate=m}function m(b){delete p[b]}function y(b){if(v)setTimeout(y,0,b);else{var E=p[b];if(E){v=!0;try{(function(T){var R=T.callback,P=T.args;switch(P.length){case 0:R();break;case 1:R(P[0]);break;case 2:R(P[0],P[1]);break;case 3:R(P[0],P[1],P[2]);break;default:R.apply(o,P)}})(E)}finally{m(b),v=!1}}}}function w(b){b.source===a&&typeof b.data=="string"&&b.data.indexOf(d)===0&&y(+b.data.slice(d.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof uf<"u"?uf:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Vb);var LC=Vb.exports;const NC=Ow(LC);var DC={34:(r,t,e)=>{var n=e(4901);r.exports=function(i){return typeof i=="object"?i!==null:n(i)}},81:(r,t,e)=>{var n=e(9565),i=e(9306),s=e(8551),a=e(6823),o=e(851),l=TypeError;r.exports=function(c,h){var d=arguments.length<2?o(c):h;if(i(d))return s(n(d,c));throw new l(a(c)+" is not iterable")}},283:(r,t,e)=>{var n=e(9504),i=e(9039),s=e(4901),a=e(9297),o=e(3724),l=e(350).CONFIGURABLE,c=e(3706),h=e(1181),d=h.enforce,f=h.get,p=String,v=Object.defineProperty,g=n("".slice),A=n("".replace),m=n([].join),y=o&&!i(function(){return v(function(){},"length",{value:8}).length!==8}),w=String(String).split("String"),b=r.exports=function(E,T,R){g(p(T),0,7)==="Symbol("&&(T="["+A(p(T),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),R&&R.getter&&(T="get "+T),R&&R.setter&&(T="set "+T),(!a(E,"name")||l&&E.name!==T)&&(o?v(E,"name",{value:T,configurable:!0}):E.name=T),y&&R&&a(R,"arity")&&E.length!==R.arity&&v(E,"length",{value:R.arity});try{R&&a(R,"constructor")&&R.constructor?o&&v(E,"prototype",{writable:!1}):E.prototype&&(E.prototype=void 0)}catch{}var P=d(E);return a(P,"source")||(P.source=m(w,typeof T=="string"?T:"")),E};Function.prototype.toString=b(function(){return s(this)&&f(this).source||c(this)},"toString")},350:(r,t,e)=>{var n=e(3724),i=e(9297),s=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,o=i(s,"name"),l=o&&(function(){}).name==="something",c=o&&(!n||n&&a(s,"name").configurable);r.exports={EXISTS:o,PROPER:l,CONFIGURABLE:c}},397:(r,t,e)=>{var n=e(7751);r.exports=n("document","documentElement")},421:r=>{r.exports={}},507:(r,t,e)=>{var n=e(9565);r.exports=function(i,s,a){for(var o=a?i:i.iterator,l=i.next,c,h;!(c=n(l,o)).done;)if(h=s(c.value),h!==void 0)return h}},531:(r,t,e)=>{var n=e(6518),i=e(9565),s=e(9306),a=e(8551),o=e(1767),l=e(8646),c=e(9462),h=e(9539),d=e(6395),f=e(684),p=e(4549),v=!d&&!f("flatMap",function(){}),g=!d&&!v&&p("flatMap",TypeError),A=d||v||g,m=c(function(){for(var y=this.iterator,w=this.mapper,b,E;;){if(E=this.inner)try{if(b=a(i(E.next,E.iterator)),!b.done)return b.value;this.inner=null}catch(T){h(y,"throw",T)}if(b=a(i(this.next,y)),this.done=!!b.done)return;try{this.inner=l(w(b.value,this.counter++),!1)}catch(T){h(y,"throw",T)}}});n({target:"Iterator",proto:!0,real:!0,forced:A},{flatMap:function(w){a(this);try{s(w)}catch(b){h(this,"throw",b)}return g?i(g,this,w):new m(o(this),{mapper:w,inner:null})}})},616:(r,t,e)=>{var n=e(9039);r.exports=!n(function(){var i=(function(){}).bind();return typeof i!="function"||i.hasOwnProperty("prototype")})},655:(r,t,e)=>{var n=e(6955),i=String;r.exports=function(s){if(n(s)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return i(s)}},679:(r,t,e)=>{var n=e(1625),i=TypeError;r.exports=function(s,a){if(n(a,s))return s;throw new i("Incorrect invocation")}},684:r=>{r.exports=function(t,e){var n=typeof Iterator=="function"&&Iterator.prototype[t];if(n)try{n.call({next:null},e).next()}catch{return!0}}},741:r=>{var t=Math.ceil,e=Math.floor;r.exports=Math.trunc||function(i){var s=+i;return(s>0?e:t)(s)}},757:(r,t,e)=>{var n=e(7751),i=e(4901),s=e(1625),a=e(7040),o=Object;r.exports=a?function(l){return typeof l=="symbol"}:function(l){var c=n("Symbol");return i(c)&&s(c.prototype,o(l))}},851:(r,t,e)=>{var n=e(6955),i=e(5966),s=e(4117),a=e(6269),o=e(8227),l=o("iterator");r.exports=function(c){if(!s(c))return i(c,l)||i(c,"@@iterator")||a[n(c)]}},944:r=>{var t=TypeError;r.exports=function(e){var n=e&&e.alphabet;if(n===void 0||n==="base64"||n==="base64url")return n||"base64";throw new t("Incorrect `alphabet` option")}},1072:(r,t,e)=>{var n=e(1828),i=e(8727);r.exports=Object.keys||function(a){return n(a,i)}},1103:r=>{r.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}},1108:(r,t,e)=>{var n=e(6955);r.exports=function(i){var s=n(i);return s==="BigInt64Array"||s==="BigUint64Array"}},1148:(r,t,e)=>{var n=e(6518),i=e(9565),s=e(2652),a=e(9306),o=e(8551),l=e(1767),c=e(9539),h=e(4549),d=h("every",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:d},{every:function(p){o(this);try{a(p)}catch(A){c(this,"throw",A)}if(d)return i(d,this,p);var v=l(this),g=0;return!s(v,function(A,m){if(!p(A,g++))return m()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},1181:(r,t,e)=>{var n=e(8622),i=e(4576),s=e(34),a=e(6699),o=e(9297),l=e(7629),c=e(6119),h=e(421),d="Object already initialized",f=i.TypeError,p=i.WeakMap,v,g,A,m=function(E){return A(E)?g(E):v(E,{})},y=function(E){return function(T){var R;if(!s(T)||(R=g(T)).type!==E)throw new f("Incompatible receiver, "+E+" required");return R}};if(n||l.state){var w=l.state||(l.state=new p);w.get=w.get,w.has=w.has,w.set=w.set,v=function(E,T){if(w.has(E))throw new f(d);return T.facade=E,w.set(E,T),T},g=function(E){return w.get(E)||{}},A=function(E){return w.has(E)}}else{var b=c("state");h[b]=!0,v=function(E,T){if(o(E,b))throw new f(d);return T.facade=E,a(E,b,T),T},g=function(E){return o(E,b)?E[b]:{}},A=function(E){return o(E,b)}}r.exports={set:v,get:g,has:A,enforce:m,getterFor:y}},1291:(r,t,e)=>{var n=e(741);r.exports=function(i){var s=+i;return s!==s||s===0?0:n(s)}},1385:(r,t,e)=>{var n=e(9539);r.exports=function(i,s,a){for(var o=i.length-1;o>=0;o--)if(i[o]!==void 0)try{a=n(i[o].iterator,s,a)}catch(l){s="throw",a=l}if(s==="throw")throw a;return a}},1548:(r,t,e)=>{var n=e(4576),i=e(9039),s=e(9519),a=e(4215),o=n.structuredClone;r.exports=!!o&&!i(function(){if(a==="DENO"&&s>92||a==="NODE"&&s>94||a==="BROWSER"&&s>97)return!1;var l=new ArrayBuffer(8),c=o(l,{transfer:[l]});return l.byteLength!==0||c.byteLength!==8})},1549:(r,t,e)=>{var n=e(6518),i=e(4576),s=e(9143),a=e(4154),o=i.Uint8Array,l=!o||!o.prototype.setFromBase64||!function(){var c=new o([255,255,255,255,255]);try{c.setFromBase64("",null);return}catch{}try{c.setFromBase64("MjYyZg===")}catch{return c[0]===50&&c[1]===54&&c[2]===50&&c[3]===255&&c[4]===255}}();o&&n({target:"Uint8Array",proto:!0,forced:l},{setFromBase64:function(h){a(this);var d=s(h,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:d.read,written:d.written}}})},1625:(r,t,e)=>{var n=e(9504);r.exports=n({}.isPrototypeOf)},1689:(r,t,e)=>{var n=e(6518),i=e(4576),s=e(8745),a=e(7680),o=e(6043),l=e(9306),c=e(1103),h=i.Promise,d=!1,f=!h||!h.try||c(function(){h.try(function(p){d=p===8},8)}).error||!d;n({target:"Promise",stat:!0,forced:f},{try:function(p){var v=arguments.length>1?a(arguments,1):[],g=o.f(this),A=c(function(){return s(l(p),void 0,v)});return(A.error?g.reject:g.resolve)(A.value),g.promise}})},1698:(r,t,e)=>{var n=e(6518),i=e(4204),s=e(9835),a=e(4916),o=!a("union")||!s("union");n({target:"Set",proto:!0,real:!0,forced:o},{union:i})},1701:(r,t,e)=>{var n=e(6518),i=e(9565),s=e(9306),a=e(8551),o=e(1767),l=e(9462),c=e(6319),h=e(9539),d=e(684),f=e(4549),p=e(6395),v=!p&&!d("map",function(){}),g=!p&&!v&&f("map",TypeError),A=p||v||g,m=l(function(){var y=this.iterator,w=a(i(this.next,y)),b=this.done=!!w.done;if(!b)return c(y,this.mapper,[w.value,this.counter++],!0)});n({target:"Iterator",proto:!0,real:!0,forced:A},{map:function(w){a(this);try{s(w)}catch(b){h(this,"throw",b)}return g?i(g,this,w):new m(o(this),{mapper:w})}})},1767:r=>{r.exports=function(t){return{iterator:t,next:t.next,done:!1}}},1828:(r,t,e)=>{var n=e(9504),i=e(9297),s=e(5397),a=e(9617).indexOf,o=e(421),l=n([].push);r.exports=function(c,h){var d=s(c),f=0,p=[],v;for(v in d)!i(o,v)&&i(d,v)&&l(p,v);for(;h.length>f;)i(d,v=h[f++])&&(~a(p,v)||l(p,v));return p}},2106:(r,t,e)=>{var n=e(283),i=e(4913);r.exports=function(s,a,o){return o.get&&n(o.get,a,{getter:!0}),o.set&&n(o.set,a,{setter:!0}),i.f(s,a,o)}},2140:(r,t,e)=>{var n=e(8227),i=n("toStringTag"),s={};s[i]="z",r.exports=String(s)==="[object z]"},2195:(r,t,e)=>{var n=e(9504),i=n({}.toString),s=n("".slice);r.exports=function(a){return s(i(a),8,-1)}},2211:(r,t,e)=>{var n=e(9039);r.exports=!n(function(){function i(){}return i.prototype.constructor=null,Object.getPrototypeOf(new i)!==i.prototype})},2303:(r,t,e)=>{var n=e(4576),i=e(9504),s=n.Uint8Array,a=n.SyntaxError,o=n.parseInt,l=Math.min,c=/[^\da-f]/i,h=i(c.exec),d=i("".slice);r.exports=function(f,p){var v=f.length;if(v%2!==0)throw new a("String should be an even number of characters");for(var g=p?l(p.length,v/2):v/2,A=p||new s(g),m=0,y=0;y<g;){var w=d(f,m,m+=2);if(h(c,w))throw new a("String should only contain hex characters");A[y++]=o(w,16)}return{bytes:A,read:m}}},2360:(r,t,e)=>{var n=e(8551),i=e(6801),s=e(8727),a=e(421),o=e(397),l=e(4055),c=e(6119),h=">",d="<",f="prototype",p="script",v=c("IE_PROTO"),g=function(){},A=function(E){return d+p+h+E+d+"/"+p+h},m=function(E){E.write(A("")),E.close();var T=E.parentWindow.Object;return E=null,T},y=function(){var E=l("iframe"),T="java"+p+":",R;return E.style.display="none",o.appendChild(E),E.src=String(T),R=E.contentWindow.document,R.open(),R.write(A("document.F=Object")),R.close(),R.F},w,b=function(){try{w=new ActiveXObject("htmlfile")}catch{}b=typeof document<"u"?document.domain&&w?m(w):y():m(w);for(var E=s.length;E--;)delete b[f][s[E]];return b()};a[v]=!0,r.exports=Object.create||function(T,R){var P;return T!==null?(g[f]=n(T),P=new g,g[f]=null,P[v]=T):P=b(),R===void 0?P:i.f(P,R)}},2475:(r,t,e)=>{var n=e(6518),i=e(8527),s=e(4916),a=!s("isSupersetOf",function(o){return!o});n({target:"Set",proto:!0,real:!0,forced:a},{isSupersetOf:i})},2489:(r,t,e)=>{var n=e(6518),i=e(9565),s=e(9306),a=e(8551),o=e(1767),l=e(9462),c=e(6319),h=e(6395),d=e(9539),f=e(684),p=e(4549),v=!h&&!f("filter",function(){}),g=!h&&!v&&p("filter",TypeError),A=h||v||g,m=l(function(){for(var y=this.iterator,w=this.predicate,b=this.next,E,T,R;;){if(E=a(i(b,y)),T=this.done=!!E.done,T)return;if(R=E.value,c(y,w,[R,this.counter++],!0))return R}});n({target:"Iterator",proto:!0,real:!0,forced:A},{filter:function(w){a(this);try{s(w)}catch(b){d(this,"throw",b)}return g?i(g,this,w):new m(o(this),{predicate:w})}})},2529:r=>{r.exports=function(t,e){return{value:t,done:e}}},2603:(r,t,e)=>{var n=e(655);r.exports=function(i,s){return i===void 0?arguments.length<2?"":s:n(i)}},2652:(r,t,e)=>{var n=e(6080),i=e(9565),s=e(8551),a=e(6823),o=e(4209),l=e(6198),c=e(1625),h=e(81),d=e(851),f=e(9539),p=TypeError,v=function(A,m){this.stopped=A,this.result=m},g=v.prototype;r.exports=function(A,m,y){var w=y&&y.that,b=!!(y&&y.AS_ENTRIES),E=!!(y&&y.IS_RECORD),T=!!(y&&y.IS_ITERATOR),R=!!(y&&y.INTERRUPTED),P=n(m,w),_,N,B,O,M,x,$,X=function(W){return _&&f(_,"normal"),new v(!0,W)},F=function(W){return b?(s(W),R?P(W[0],W[1],X):P(W[0],W[1])):R?P(W,X):P(W)};if(E)_=A.iterator;else if(T)_=A;else{if(N=d(A),!N)throw new p(a(A)+" is not iterable");if(o(N)){for(B=0,O=l(A);O>B;B++)if(M=F(A[B]),M&&c(g,M))return M;return new v(!1)}_=h(A,N)}for(x=E?A.next:_.next;!($=i(x,_)).done;){try{M=F($.value)}catch(W){f(_,"throw",W)}if(typeof M=="object"&&M&&c(g,M))return M}return new v(!1)}},2777:(r,t,e)=>{var n=e(9565),i=e(34),s=e(757),a=e(5966),o=e(4270),l=e(8227),c=TypeError,h=l("toPrimitive");r.exports=function(d,f){if(!i(d)||s(d))return d;var p=a(d,h),v;if(p){if(f===void 0&&(f="default"),v=n(p,d,f),!i(v)||s(v))return v;throw new c("Can't convert object to primitive value")}return f===void 0&&(f="number"),o(d,f)}},2787:(r,t,e)=>{var n=e(9297),i=e(4901),s=e(8981),a=e(6119),o=e(2211),l=a("IE_PROTO"),c=Object,h=c.prototype;r.exports=o?c.getPrototypeOf:function(d){var f=s(d);if(n(f,l))return f[l];var p=f.constructor;return i(p)&&f instanceof p?p.prototype:f instanceof c?h:null}},2796:(r,t,e)=>{var n=e(9039),i=e(4901),s=/#|\.prototype\./,a=function(d,f){var p=l[o(d)];return p===h?!0:p===c?!1:i(f)?n(f):!!f},o=a.normalize=function(d){return String(d).replace(s,".").toLowerCase()},l=a.data={},c=a.NATIVE="N",h=a.POLYFILL="P";r.exports=a},2804:r=>{var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=t+"+/",n=t+"-_",i=function(s){for(var a={},o=0;o<64;o++)a[s.charAt(o)]=o;return a};r.exports={i2c:e,c2i:i(e),i2cUrl:n,c2iUrl:i(n)}},2812:r=>{var t=TypeError;r.exports=function(e,n){if(e<n)throw new t("Not enough arguments");return e}},2839:(r,t,e)=>{var n=e(4576),i=n.navigator,s=i&&i.userAgent;r.exports=s?String(s):""},2967:(r,t,e)=>{var n=e(6706),i=e(34),s=e(7750),a=e(3506);r.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var o=!1,l={},c;try{c=n(Object.prototype,"__proto__","set"),c(l,[]),o=l instanceof Array}catch{}return function(d,f){return s(d),a(f),i(d)&&(o?c(d,f):d.__proto__=f),d}}():void 0)},3167:(r,t,e)=>{var n=e(4901),i=e(34),s=e(2967);r.exports=function(a,o,l){var c,h;return s&&n(c=o.constructor)&&c!==l&&i(h=c.prototype)&&h!==l.prototype&&s(a,h),a}},3238:(r,t,e)=>{var n=e(4576),i=e(7811),s=e(7394),a=n.DataView;r.exports=function(o){if(!i||s(o)!==0)return!1;try{return new a(o),!1}catch{return!0}}},3392:(r,t,e)=>{var n=e(9504),i=0,s=Math.random(),a=n(1.1.toString);r.exports=function(o){return"Symbol("+(o===void 0?"":o)+")_"+a(++i+s,36)}},3440:(r,t,e)=>{var n=e(7080),i=e(4402),s=e(9286),a=e(5170),o=e(3789),l=e(8469),c=e(507),h=i.has,d=i.remove;r.exports=function(p){var v=n(this),g=o(p),A=s(v);return a(v)<=g.size?l(v,function(m){g.includes(m)&&d(A,m)}):c(g.getIterator(),function(m){h(A,m)&&d(A,m)}),A}},3463:r=>{var t=TypeError;r.exports=function(e){if(typeof e=="string")return e;throw new t("Argument is not a string")}},3506:(r,t,e)=>{var n=e(3925),i=String,s=TypeError;r.exports=function(a){if(n(a))return a;throw new s("Can't set "+i(a)+" as a prototype")}},3579:(r,t,e)=>{var n=e(6518),i=e(9565),s=e(2652),a=e(9306),o=e(8551),l=e(1767),c=e(9539),h=e(4549),d=h("some",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:d},{some:function(p){o(this);try{a(p)}catch(A){c(this,"throw",A)}if(d)return i(d,this,p);var v=l(this),g=0;return s(v,function(A,m){if(p(A,g++))return m()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},3650:(r,t,e)=>{var n=e(7080),i=e(4402),s=e(9286),a=e(3789),o=e(507),l=i.add,c=i.has,h=i.remove;r.exports=function(f){var p=n(this),v=a(f).getIterator(),g=s(p);return o(v,function(A){c(p,A)?h(g,A):l(g,A)}),g}},3706:(r,t,e)=>{var n=e(9504),i=e(4901),s=e(7629),a=n(Function.toString);i(s.inspectSource)||(s.inspectSource=function(o){return a(o)}),r.exports=s.inspectSource},3717:(r,t)=>{t.f=Object.getOwnPropertySymbols},3724:(r,t,e)=>{var n=e(9039);r.exports=!n(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},3789:(r,t,e)=>{var n=e(9306),i=e(8551),s=e(9565),a=e(1291),o=e(1767),l="Invalid size",c=RangeError,h=TypeError,d=Math.max,f=function(p,v){this.set=p,this.size=d(v,0),this.has=n(p.has),this.keys=n(p.keys)};f.prototype={getIterator:function(){return o(i(s(this.keys,this.set)))},includes:function(p){return s(this.has,this.set,p)}},r.exports=function(p){i(p);var v=+p.size;if(v!==v)throw new h(l);var g=a(v);if(g<0)throw new c(l);return new f(p,g)}},3838:(r,t,e)=>{var n=e(7080),i=e(5170),s=e(8469),a=e(3789);r.exports=function(l){var c=n(this),h=a(l);return i(c)>h.size?!1:s(c,function(d){if(!h.includes(d))return!1},!0)!==!1}},3853:(r,t,e)=>{var n=e(6518),i=e(4449),s=e(4916),a=!s("isDisjointFrom",function(o){return!o});n({target:"Set",proto:!0,real:!0,forced:a},{isDisjointFrom:i})},3925:(r,t,e)=>{var n=e(34);r.exports=function(i){return n(i)||i===null}},3972:(r,t,e)=>{var n=e(34),i=String,s=TypeError;r.exports=function(a){if(a===void 0||n(a))return a;throw new s(i(a)+" is not an object or undefined")}},4055:(r,t,e)=>{var n=e(4576),i=e(34),s=n.document,a=i(s)&&i(s.createElement);r.exports=function(o){return a?s.createElement(o):{}}},4114:(r,t,e)=>{var n=e(6518),i=e(8981),s=e(6198),a=e(4527),o=e(6837),l=e(9039),c=l(function(){return[].push.call({length:4294967296},1)!==4294967297}),h=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(f){return f instanceof TypeError}},d=c||!h();n({target:"Array",proto:!0,arity:1,forced:d},{push:function(p){var v=i(this),g=s(v),A=arguments.length;o(g+A);for(var m=0;m<A;m++)v[g]=arguments[m],g++;return a(v,g),g}})},4117:r=>{r.exports=function(t){return t==null}},4149:r=>{var t=RangeError;r.exports=function(e){if(e===e)return e;throw new t("NaN is not allowed")}},4154:(r,t,e)=>{var n=e(6955),i=TypeError;r.exports=function(s){if(n(s)==="Uint8Array")return s;throw new i("Argument is not an Uint8Array")}},4204:(r,t,e)=>{var n=e(7080),i=e(4402).add,s=e(9286),a=e(3789),o=e(507);r.exports=function(c){var h=n(this),d=a(c).getIterator(),f=s(h);return o(d,function(p){i(f,p)}),f}},4209:(r,t,e)=>{var n=e(8227),i=e(6269),s=n("iterator"),a=Array.prototype;r.exports=function(o){return o!==void 0&&(i.Array===o||a[s]===o)}},4215:(r,t,e)=>{var n=e(4576),i=e(2839),s=e(2195),a=function(o){return i.slice(0,o.length)===o};r.exports=function(){return a("Bun/")?"BUN":a("Cloudflare-Workers")?"CLOUDFLARE":a("Deno/")?"DENO":a("Node.js/")?"NODE":n.Bun&&typeof Bun.version=="string"?"BUN":n.Deno&&typeof Deno.version=="object"?"DENO":s(n.process)==="process"?"NODE":n.window&&n.document?"BROWSER":"REST"}()},4235:(r,t,e)=>{var n=e(6518),i=e(9504),s=e(2652),a=RangeError,o=TypeError,l=1/0,c=NaN,h=Math.abs,d=Math.pow,f=i([].push),p=d(2,1023),v=d(2,53)-1,g=Number.MAX_VALUE,A=d(2,971),m={},y={},w={},b={},E={},T=function(R,P){var _=R+P,N=P-(_-R);return{hi:_,lo:N}};n({target:"Math",stat:!0},{sumPrecise:function(P){var _=[],N=0,B=b;switch(s(P,function(J){if(++N>=v)throw new a("Maximum allowed index exceeded");if(typeof J!="number")throw new o("Value is not a number");B!==m&&(J!==J?B=m:J===l?B=B===y?m:w:J===-l?B=B===w?m:y:(J!==0||1/J===l)&&(B===b||B===E)&&(B=E,f(_,J)))}),B){case m:return c;case y:return-l;case w:return l;case b:return-0}for(var O=[],M=0,x,$,X,F,W,H,Z=0;Z<_.length;Z++){x=_[Z];for(var j=0,z=0;z<O.length;z++){if($=O[z],h(x)<h($)&&(H=x,x=$,$=H),X=T(x,$),F=X.hi,W=X.lo,h(F)===l){var st=F===l?1:-1;M+=st,x=x-st*p-st*p,h(x)<h($)&&(H=x,x=$,$=H),X=T(x,$),F=X.hi,W=X.lo}W!==0&&(O[j++]=W),x=F}O.length=j,x!==0&&f(O,x)}var tt=O.length-1;if(F=0,W=0,M!==0){var et=tt>=0?O[tt]:0;if(tt--,h(M)>1||M>0&&et>0||M<0&&et<0)return M>0?l:-l;if(X=T(M*p,et/2),F=X.hi,W=X.lo,W*=2,h(2*F)===l)return F>0?F===p&&W===-(A/2)&&tt>=0&&O[tt]<0?g:l:F===-p&&W===A/2&&tt>=0&&O[tt]>0?-g:-l;W!==0&&(O[++tt]=W,W=0),F*=2}for(;tt>=0&&(X=T(F,O[tt--]),F=X.hi,W=X.lo,W===0););return tt>=0&&(W<0&&O[tt]<0||W>0&&O[tt]>0)&&($=W*2,x=F+$,$===x-F&&(F=x)),F}})},4270:(r,t,e)=>{var n=e(9565),i=e(4901),s=e(34),a=TypeError;r.exports=function(o,l){var c,h;if(l==="string"&&i(c=o.toString)&&!s(h=n(c,o))||i(c=o.valueOf)&&!s(h=n(c,o))||l!=="string"&&i(c=o.toString)&&!s(h=n(c,o)))return h;throw new a("Can't convert object to primitive value")}},4376:(r,t,e)=>{var n=e(2195);r.exports=Array.isArray||function(s){return n(s)==="Array"}},4402:(r,t,e)=>{var n=e(9504),i=Set.prototype;r.exports={Set,add:n(i.add),has:n(i.has),remove:n(i.delete),proto:i}},4449:(r,t,e)=>{var n=e(7080),i=e(4402).has,s=e(5170),a=e(3789),o=e(8469),l=e(507),c=e(9539);r.exports=function(d){var f=n(this),p=a(d);if(s(f)<=p.size)return o(f,function(g){if(p.includes(g))return!1},!0)!==!1;var v=p.getIterator();return l(v,function(g){if(i(f,g))return c(v,"normal",!1)})!==!1}},4483:(r,t,e)=>{var n=e(4576),i=e(9429),s=e(1548),a=n.structuredClone,o=n.ArrayBuffer,l=n.MessageChannel,c=!1,h,d,f,p;if(s)c=function(v){a(v,{transfer:[v]})};else if(o)try{l||(h=i("worker_threads"),h&&(l=h.MessageChannel)),l&&(d=new l,f=new o(2),p=function(v){d.port1.postMessage(null,[v])},f.byteLength===2&&(p(f),f.byteLength===0&&(c=p)))}catch{}r.exports=c},4495:(r,t,e)=>{var n=e(9519),i=e(9039),s=e(4576),a=s.String;r.exports=!!Object.getOwnPropertySymbols&&!i(function(){var o=Symbol("symbol detection");return!a(o)||!(Object(o)instanceof Symbol)||!Symbol.sham&&n&&n<41})},4527:(r,t,e)=>{var n=e(3724),i=e(4376),s=TypeError,a=Object.getOwnPropertyDescriptor,o=n&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(l){return l instanceof TypeError}}();r.exports=o?function(l,c){if(i(l)&&!a(l,"length").writable)throw new s("Cannot set read only .length");return l.length=c}:function(l,c){return l.length=c}},4549:(r,t,e)=>{var n=e(4576);r.exports=function(i,s){var a=n.Iterator,o=a&&a.prototype,l=o&&o[i],c=!1;if(l)try{l.call({next:function(){return{done:!0}},return:function(){c=!0}},-1)}catch(h){h instanceof s||(c=!1)}if(!c)return l}},4576:function(r){var t=function(e){return e&&e.Math===Math&&e};r.exports=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof global=="object"&&global)||t(typeof this=="object"&&this)||function(){return this}()||Function("return this")()},4603:(r,t,e)=>{var n=e(6840),i=e(9504),s=e(655),a=e(2812),o=URLSearchParams,l=o.prototype,c=i(l.append),h=i(l.delete),d=i(l.forEach),f=i([].push),p=new o("a=1&a=2&b=3");p.delete("a",1),p.delete("b",void 0),p+""!="a=2"&&n(l,"delete",function(v){var g=arguments.length,A=g<2?void 0:arguments[1];if(g&&A===void 0)return h(this,v);var m=[];d(this,function(_,N){f(m,{key:N,value:_})}),a(g,1);for(var y=s(v),w=s(A),b=0,E=0,T=!1,R=m.length,P;b<R;)P=m[b++],T||P.key===y?(T=!0,h(this,P.key)):E++;for(;E<R;)P=m[E++],P.key===y&&P.value===w||c(this,P.key,P.value)},{enumerable:!0,unsafe:!0})},4628:(r,t,e)=>{var n=e(6518),i=e(6043);n({target:"Promise",stat:!0},{withResolvers:function(){var a=i.f(this);return{promise:a.promise,resolve:a.resolve,reject:a.reject}}})},4644:(r,t,e)=>{var n=e(7811),i=e(3724),s=e(4576),a=e(4901),o=e(34),l=e(9297),c=e(6955),h=e(6823),d=e(6699),f=e(6840),p=e(2106),v=e(1625),g=e(2787),A=e(2967),m=e(8227),y=e(3392),w=e(1181),b=w.enforce,E=w.get,T=s.Int8Array,R=T&&T.prototype,P=s.Uint8ClampedArray,_=P&&P.prototype,N=T&&g(T),B=R&&g(R),O=Object.prototype,M=s.TypeError,x=m("toStringTag"),$=y("TYPED_ARRAY_TAG"),X="TypedArrayConstructor",F=n&&!!A&&c(s.opera)!=="Opera",W=!1,H,Z,j,z={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},st={BigInt64Array:8,BigUint64Array:8},tt=function(Rt){if(!o(Rt))return!1;var It=c(Rt);return It==="DataView"||l(z,It)||l(st,It)},et=function(ut){var Rt=g(ut);if(o(Rt)){var It=E(Rt);return It&&l(It,X)?It[X]:et(Rt)}},J=function(ut){if(!o(ut))return!1;var Rt=c(ut);return l(z,Rt)||l(st,Rt)},K=function(ut){if(J(ut))return ut;throw new M("Target is not a typed array")},Q=function(ut){if(a(ut)&&(!A||v(N,ut)))return ut;throw new M(h(ut)+" is not a typed array constructor")},ct=function(ut,Rt,It,C){if(i){if(It)for(var Y in z){var V=s[Y];if(V&&l(V.prototype,ut))try{delete V.prototype[ut]}catch{try{V.prototype[ut]=Rt}catch{}}}(!B[ut]||It)&&f(B,ut,It?Rt:F&&R[ut]||Rt,C)}},bt=function(ut,Rt,It){var C,Y;if(i){if(A){if(It){for(C in z)if(Y=s[C],Y&&l(Y,ut))try{delete Y[ut]}catch{}}if(!N[ut]||It)try{return f(N,ut,It?Rt:F&&N[ut]||Rt)}catch{}else return}for(C in z)Y=s[C],Y&&(!Y[ut]||It)&&f(Y,ut,Rt)}};for(H in z)Z=s[H],j=Z&&Z.prototype,j?b(j)[X]=Z:F=!1;for(H in st)Z=s[H],j=Z&&Z.prototype,j&&(b(j)[X]=Z);if((!F||!a(N)||N===Function.prototype)&&(N=function(){throw new M("Incorrect invocation")},F))for(H in z)s[H]&&A(s[H],N);if((!F||!B||B===O)&&(B=N.prototype,F))for(H in z)s[H]&&A(s[H].prototype,B);if(F&&g(_)!==B&&A(_,B),i&&!l(B,x)){W=!0,p(B,x,{configurable:!0,get:function(){return o(this)?this[$]:void 0}});for(H in z)s[H]&&d(s[H],$,H)}r.exports={NATIVE_ARRAY_BUFFER_VIEWS:F,TYPED_ARRAY_TAG:W&&$,aTypedArray:K,aTypedArrayConstructor:Q,exportTypedArrayMethod:ct,exportTypedArrayStaticMethod:bt,getTypedArrayConstructor:et,isView:tt,isTypedArray:J,TypedArray:N,TypedArrayPrototype:B}},4659:(r,t,e)=>{var n=e(3724),i=e(4913),s=e(6980);r.exports=function(a,o,l){n?i.f(a,o,s(0,l)):a[o]=l}},4901:r=>{var t=typeof document=="object"&&document.all;r.exports=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"}},4913:(r,t,e)=>{var n=e(3724),i=e(5917),s=e(8686),a=e(8551),o=e(6969),l=TypeError,c=Object.defineProperty,h=Object.getOwnPropertyDescriptor,d="enumerable",f="configurable",p="writable";t.f=n?s?function(g,A,m){if(a(g),A=o(A),a(m),typeof g=="function"&&A==="prototype"&&"value"in m&&p in m&&!m[p]){var y=h(g,A);y&&y[p]&&(g[A]=m.value,m={configurable:f in m?m[f]:y[f],enumerable:d in m?m[d]:y[d],writable:!1})}return c(g,A,m)}:c:function(g,A,m){if(a(g),A=o(A),a(m),i)try{return c(g,A,m)}catch{}if("get"in m||"set"in m)throw new l("Accessors not supported");return"value"in m&&(g[A]=m.value),g}},4916:(r,t,e)=>{var n=e(7751),i=function(a){return{size:a,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},s=function(a){return{size:a,has:function(){return!0},keys:function(){throw new Error("e")}}};r.exports=function(a,o){var l=n("Set");try{new l()[a](i(0));try{return new l()[a](i(-1)),!1}catch{if(!o)return!0;try{return new l()[a](s(-1/0)),!1}catch{var c=new l;return c.add(1),c.add(2),o(c[a](s(1/0)))}}}catch{return!1}}},4979:(r,t,e)=>{var n=e(6518),i=e(4576),s=e(7751),a=e(6980),o=e(4913).f,l=e(9297),c=e(679),h=e(3167),d=e(2603),f=e(5002),p=e(8574),v=e(3724),g=e(6395),A="DOMException",m=s("Error"),y=s(A),w=function(){c(this,b);var X=arguments.length,F=d(X<1?void 0:arguments[0]),W=d(X<2?void 0:arguments[1],"Error"),H=new y(F,W),Z=new m(F);return Z.name=A,o(H,"stack",a(1,p(Z.stack,1))),h(H,this,w),H},b=w.prototype=y.prototype,E="stack"in new m(A),T="stack"in new y(1,2),R=y&&v&&Object.getOwnPropertyDescriptor(i,A),P=!!R&&!(R.writable&&R.configurable),_=E&&!P&&!T;n({global:!0,constructor:!0,forced:g||_},{DOMException:_?w:y});var N=s(A),B=N.prototype;if(B.constructor!==N){g||o(B,"constructor",a(1,N));for(var O in f)if(l(f,O)){var M=f[O],x=M.s;l(N,x)||o(N,x,a(6,M.c))}}},5002:r=>{r.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},5024:(r,t,e)=>{var n=e(6518),i=e(3650),s=e(9835),a=e(4916),o=!a("symmetricDifference")||!s("symmetricDifference");n({target:"Set",proto:!0,real:!0,forced:o},{symmetricDifference:i})},5031:(r,t,e)=>{var n=e(7751),i=e(9504),s=e(8480),a=e(3717),o=e(8551),l=i([].concat);r.exports=n("Reflect","ownKeys")||function(h){var d=s.f(o(h)),f=a.f;return f?l(d,f(h)):d}},5169:(r,t,e)=>{var n=e(3238),i=TypeError;r.exports=function(s){if(n(s))throw new i("ArrayBuffer is detached");return s}},5170:(r,t,e)=>{var n=e(6706),i=e(4402);r.exports=n(i.proto,"size","get")||function(s){return s.size}},5370:(r,t,e)=>{var n=e(6198);r.exports=function(i,s,a){for(var o=0,l=arguments.length>2?a:n(s),c=new i(l);l>o;)c[o]=s[o++];return c}},5397:(r,t,e)=>{var n=e(7055),i=e(7750);r.exports=function(s){return n(i(s))}},5610:(r,t,e)=>{var n=e(1291),i=Math.max,s=Math.min;r.exports=function(a,o){var l=n(a);return l<0?i(l+o,0):s(l,o)}},5623:(r,t,e)=>{var n=e(6518),i=e(4576),s=e(9504),a=e(4154),o=e(5169),l=s(1.1.toString),c=i.Uint8Array,h=!c||!c.prototype.toHex||!function(){try{var d=new c([255,255,255,255,255,255,255,255]);return d.toHex()==="ffffffffffffffff"}catch{return!1}}();c&&n({target:"Uint8Array",proto:!0,forced:h},{toHex:function(){a(this),o(this.buffer);for(var f="",p=0,v=this.length;p<v;p++){var g=l(this[p],16);f+=g.length===1?"0"+g:g}return f}})},5636:(r,t,e)=>{var n=e(4576),i=e(9504),s=e(6706),a=e(7696),o=e(5169),l=e(7394),c=e(4483),h=e(1548),d=n.structuredClone,f=n.ArrayBuffer,p=n.DataView,v=Math.min,g=f.prototype,A=p.prototype,m=i(g.slice),y=s(g,"resizable","get"),w=s(g,"maxByteLength","get"),b=i(A.getInt8),E=i(A.setInt8);r.exports=(h||c)&&function(T,R,P){var _=l(T),N=R===void 0?_:a(R),B=!y||!y(T),O;if(o(T),h&&(T=d(T,{transfer:[T]}),_===N&&(P||B)))return T;if(_>=N&&(!P||B))O=m(T,0,N);else{var M=P&&!B&&w?{maxByteLength:w(T)}:void 0;O=new f(N,M);for(var x=new p(T),$=new p(O),X=v(N,_),F=0;F<X;F++)E($,F,b(x,F))}return h||c(T),O}},5745:(r,t,e)=>{var n=e(7629);r.exports=function(i,s){return n[i]||(n[i]=s||{})}},5781:(r,t,e)=>{var n=e(6518),i=e(7751),s=e(2812),a=e(655),o=e(7416),l=i("URL");n({target:"URL",stat:!0,forced:!o},{parse:function(h){var d=s(arguments.length,1),f=a(h),p=d<2||arguments[1]===void 0?void 0:a(arguments[1]);try{return new l(f,p)}catch{return null}}})},5854:(r,t,e)=>{var n=e(2777),i=TypeError;r.exports=function(s){var a=n(s,"number");if(typeof a=="number")throw new i("Can't convert number to bigint");return BigInt(a)}},5876:(r,t,e)=>{var n=e(6518),i=e(3838),s=e(4916),a=!s("isSubsetOf",function(o){return o});n({target:"Set",proto:!0,real:!0,forced:a},{isSubsetOf:i})},5917:(r,t,e)=>{var n=e(3724),i=e(9039),s=e(4055);r.exports=!n&&!i(function(){return Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a!==7})},5966:(r,t,e)=>{var n=e(9306),i=e(4117);r.exports=function(s,a){var o=s[a];return i(o)?void 0:n(o)}},6043:(r,t,e)=>{var n=e(9306),i=TypeError,s=function(a){var o,l;this.promise=new a(function(c,h){if(o!==void 0||l!==void 0)throw new i("Bad Promise constructor");o=c,l=h}),this.resolve=n(o),this.reject=n(l)};r.exports.f=function(a){return new s(a)}},6080:(r,t,e)=>{var n=e(7476),i=e(9306),s=e(616),a=n(n.bind);r.exports=function(o,l){return i(o),l===void 0?o:s?a(o,l):function(){return o.apply(l,arguments)}}},6119:(r,t,e)=>{var n=e(5745),i=e(3392),s=n("keys");r.exports=function(a){return s[a]||(s[a]=i(a))}},6193:(r,t,e)=>{var n=e(4215);r.exports=n==="NODE"},6198:(r,t,e)=>{var n=e(8014);r.exports=function(i){return n(i.length)}},6269:r=>{r.exports={}},6279:(r,t,e)=>{var n=e(6840);r.exports=function(i,s,a){for(var o in s)n(i,o,s[o],a);return i}},6319:(r,t,e)=>{var n=e(8551),i=e(9539);r.exports=function(s,a,o,l){try{return l?a(n(o)[0],o[1]):a(o)}catch(c){i(s,"throw",c)}}},6395:r=>{r.exports=!1},6518:(r,t,e)=>{var n=e(4576),i=e(7347).f,s=e(6699),a=e(6840),o=e(9433),l=e(7740),c=e(2796);r.exports=function(h,d){var f=h.target,p=h.global,v=h.stat,g,A,m,y,w,b;if(p?A=n:v?A=n[f]||o(f,{}):A=n[f]&&n[f].prototype,A)for(m in d){if(w=d[m],h.dontCallGetSet?(b=i(A,m),y=b&&b.value):y=A[m],g=c(p?m:f+(v?".":"#")+m,h.forced),!g&&y!==void 0){if(typeof w==typeof y)continue;l(w,y)}(h.sham||y&&y.sham)&&s(w,"sham",!0),a(A,m,w,h)}}},6573:(r,t,e)=>{var n=e(3724),i=e(2106),s=e(3238),a=ArrayBuffer.prototype;n&&!("detached"in a)&&i(a,"detached",{configurable:!0,get:function(){return s(this)}})},6699:(r,t,e)=>{var n=e(3724),i=e(4913),s=e(6980);r.exports=n?function(a,o,l){return i.f(a,o,s(1,l))}:function(a,o,l){return a[o]=l,a}},6706:(r,t,e)=>{var n=e(9504),i=e(9306);r.exports=function(s,a,o){try{return n(i(Object.getOwnPropertyDescriptor(s,a)[o]))}catch{}}},6801:(r,t,e)=>{var n=e(3724),i=e(8686),s=e(4913),a=e(8551),o=e(5397),l=e(1072);t.f=n&&!i?Object.defineProperties:function(h,d){a(h);for(var f=o(d),p=l(d),v=p.length,g=0,A;v>g;)s.f(h,A=p[g++],f[A]);return h}},6823:r=>{var t=String;r.exports=function(e){try{return t(e)}catch{return"Object"}}},6837:r=>{var t=TypeError,e=9007199254740991;r.exports=function(n){if(n>e)throw t("Maximum allowed index exceeded");return n}},6840:(r,t,e)=>{var n=e(4901),i=e(4913),s=e(283),a=e(9433);r.exports=function(o,l,c,h){h||(h={});var d=h.enumerable,f=h.name!==void 0?h.name:l;if(n(c)&&s(c,f,h),h.global)d?o[l]=c:a(l,c);else{try{h.unsafe?o[l]&&(d=!0):delete o[l]}catch{}d?o[l]=c:i.f(o,l,{value:c,enumerable:!1,configurable:!h.nonConfigurable,writable:!h.nonWritable})}return o}},6955:(r,t,e)=>{var n=e(2140),i=e(4901),s=e(2195),a=e(8227),o=a("toStringTag"),l=Object,c=s(function(){return arguments}())==="Arguments",h=function(d,f){try{return d[f]}catch{}};r.exports=n?s:function(d){var f,p,v;return d===void 0?"Undefined":d===null?"Null":typeof(p=h(f=l(d),o))=="string"?p:c?s(f):(v=s(f))==="Object"&&i(f.callee)?"Arguments":v}},6969:(r,t,e)=>{var n=e(2777),i=e(757);r.exports=function(s){var a=n(s,"string");return i(a)?a:a+""}},6980:r=>{r.exports=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}},7040:(r,t,e)=>{var n=e(4495);r.exports=n&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},7055:(r,t,e)=>{var n=e(9504),i=e(9039),s=e(2195),a=Object,o=n("".split);r.exports=i(function(){return!a("z").propertyIsEnumerable(0)})?function(l){return s(l)==="String"?o(l,""):a(l)}:a},7080:(r,t,e)=>{var n=e(4402).has;r.exports=function(i){return n(i),i}},7347:(r,t,e)=>{var n=e(3724),i=e(9565),s=e(8773),a=e(6980),o=e(5397),l=e(6969),c=e(9297),h=e(5917),d=Object.getOwnPropertyDescriptor;t.f=n?d:function(p,v){if(p=o(p),v=l(v),h)try{return d(p,v)}catch{}if(c(p,v))return a(!i(s.f,p,v),p[v])}},7394:(r,t,e)=>{var n=e(4576),i=e(6706),s=e(2195),a=n.ArrayBuffer,o=n.TypeError;r.exports=a&&i(a.prototype,"byteLength","get")||function(l){if(s(l)!=="ArrayBuffer")throw new o("ArrayBuffer expected");return l.byteLength}},7416:(r,t,e)=>{var n=e(9039),i=e(8227),s=e(3724),a=e(6395),o=i("iterator");r.exports=!n(function(){var l=new URL("b?a=1&b=2&c=3","https://a"),c=l.searchParams,h=new URLSearchParams("a=1&a=2&b=3"),d="";return l.pathname="c%20d",c.forEach(function(f,p){c.delete("b"),d+=p+f}),h.delete("a",2),h.delete("b",void 0),a&&(!l.toJSON||!h.has("a",1)||h.has("a",2)||!h.has("a",void 0)||h.has("b"))||!c.size&&(a||!s)||!c.sort||l.href!=="https://a/c%20d?a=1&c=3"||c.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!c[o]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://").host!=="xn--e1aybc"||new URL("https://a#").hash!=="#%D0%B1"||d!=="a1c3"||new URL("https://x",void 0).host!=="x"})},7476:(r,t,e)=>{var n=e(2195),i=e(9504);r.exports=function(s){if(n(s)==="Function")return i(s)}},7566:(r,t,e)=>{var n=e(6840),i=e(9504),s=e(655),a=e(2812),o=URLSearchParams,l=o.prototype,c=i(l.getAll),h=i(l.has),d=new o("a=1");(d.has("a",2)||!d.has("a",void 0))&&n(l,"has",function(p){var v=arguments.length,g=v<2?void 0:arguments[1];if(v&&g===void 0)return h(this,p);var A=c(this,p);a(v,1);for(var m=s(g),y=0;y<A.length;)if(A[y++]===m)return!0;return!1},{enumerable:!0,unsafe:!0})},7629:(r,t,e)=>{var n=e(6395),i=e(4576),s=e(9433),a="__core-js_shared__",o=r.exports=i[a]||s(a,{});(o.versions||(o.versions=[])).push({version:"3.44.0",mode:n?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"})},7642:(r,t,e)=>{var n=e(6518),i=e(3440),s=e(9039),a=e(4916),o=!a("difference",function(c){return c.size===0}),l=o||s(function(){var c={size:1,has:function(){return!0},keys:function(){var d=0;return{next:function(){var f=d++>1;return h.has(1)&&h.clear(),{done:f,value:2}}}}},h=new Set([1,2,3,4]);return h.difference(c).size!==3});n({target:"Set",proto:!0,real:!0,forced:l},{difference:i})},7657:(r,t,e)=>{var n=e(9039),i=e(4901),s=e(34),a=e(2360),o=e(2787),l=e(6840),c=e(8227),h=e(6395),d=c("iterator"),f=!1,p,v,g;[].keys&&(g=[].keys(),"next"in g?(v=o(o(g)),v!==Object.prototype&&(p=v)):f=!0);var A=!s(p)||n(function(){var m={};return p[d].call(m)!==m});A?p={}:h&&(p=a(p)),i(p[d])||l(p,d,function(){return this}),r.exports={IteratorPrototype:p,BUGGY_SAFARI_ITERATORS:f}},7680:(r,t,e)=>{var n=e(9504);r.exports=n([].slice)},7696:(r,t,e)=>{var n=e(1291),i=e(8014),s=RangeError;r.exports=function(a){if(a===void 0)return 0;var o=n(a),l=i(o);if(o!==l)throw new s("Wrong length or index");return l}},7740:(r,t,e)=>{var n=e(9297),i=e(5031),s=e(7347),a=e(4913);r.exports=function(o,l,c){for(var h=i(l),d=a.f,f=s.f,p=0;p<h.length;p++){var v=h[p];!n(o,v)&&!(c&&n(c,v))&&d(o,v,f(l,v))}}},7750:(r,t,e)=>{var n=e(4117),i=TypeError;r.exports=function(s){if(n(s))throw new i("Can't call method on "+s);return s}},7751:(r,t,e)=>{var n=e(4576),i=e(4901),s=function(a){return i(a)?a:void 0};r.exports=function(a,o){return arguments.length<2?s(n[a]):n[a]&&n[a][o]}},7811:r=>{r.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},7936:(r,t,e)=>{var n=e(6518),i=e(5636);i&&n({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return i(this,arguments.length?arguments[0]:void 0,!1)}})},8004:(r,t,e)=>{var n=e(6518),i=e(9039),s=e(8750),a=e(4916),o=!a("intersection",function(l){return l.size===2&&l.has(1)&&l.has(2)})||i(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});n({target:"Set",proto:!0,real:!0,forced:o},{intersection:s})},8014:(r,t,e)=>{var n=e(1291),i=Math.min;r.exports=function(s){var a=n(s);return a>0?i(a,9007199254740991):0}},8100:(r,t,e)=>{var n=e(6518),i=e(5636);i&&n({target:"ArrayBuffer",proto:!0},{transfer:function(){return i(this,arguments.length?arguments[0]:void 0,!0)}})},8111:(r,t,e)=>{var n=e(6518),i=e(4576),s=e(679),a=e(8551),o=e(4901),l=e(2787),c=e(2106),h=e(4659),d=e(9039),f=e(9297),p=e(8227),v=e(7657).IteratorPrototype,g=e(3724),A=e(6395),m="constructor",y="Iterator",w=p("toStringTag"),b=TypeError,E=i[y],T=A||!o(E)||E.prototype!==v||!d(function(){E({})}),R=function(){if(s(this,v),l(this)===v)throw new b("Abstract class Iterator not directly constructable")},P=function(_,N){g?c(v,_,{configurable:!0,get:function(){return N},set:function(B){if(a(this),this===v)throw new b("You can't redefine this property");f(this,_)?this[_]=B:h(this,_,B)}}):v[_]=N};f(v,w)||P(w,y),(T||!f(v,m)||v[m]===Object)&&P(m,R),R.prototype=v,n({global:!0,constructor:!0,forced:T},{Iterator:R})},8227:(r,t,e)=>{var n=e(4576),i=e(5745),s=e(9297),a=e(3392),o=e(4495),l=e(7040),c=n.Symbol,h=i("wks"),d=l?c.for||c:c&&c.withoutSetter||a;r.exports=function(f){return s(h,f)||(h[f]=o&&s(c,f)?c[f]:d("Symbol."+f)),h[f]}},8235:(r,t,e)=>{var n=e(9504),i=e(9297),s=SyntaxError,a=parseInt,o=String.fromCharCode,l=n("".charAt),c=n("".slice),h=n(/./.exec),d={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	"},f=/^[\da-f]{4}$/i,p=/^[\u0000-\u001F]$/;r.exports=function(v,g){for(var A=!0,m="";g<v.length;){var y=l(v,g);if(y==="\\"){var w=c(v,g,g+2);if(i(d,w))m+=d[w],g+=2;else if(w==="\\u"){g+=2;var b=c(v,g,g+4);if(!h(f,b))throw new s("Bad Unicode escape at: "+g);m+=o(a(b,16)),g+=4}else throw new s('Unknown escape sequence: "'+w+'"')}else if(y==='"'){A=!1,g++;break}else{if(h(p,y))throw new s("Bad control character in string literal at: "+g);m+=y,g++}}if(A)throw new s("Unterminated string at: "+g);return{value:m,end:g}}},8237:(r,t,e)=>{var n=e(6518),i=e(2652),s=e(9306),a=e(8551),o=e(1767),l=e(9539),c=e(4549),h=e(8745),d=e(9039),f=TypeError,p=d(function(){[].keys().reduce(function(){},void 0)}),v=!p&&c("reduce",f);n({target:"Iterator",proto:!0,real:!0,forced:p||v},{reduce:function(A){a(this);try{s(A)}catch(E){l(this,"throw",E)}var m=arguments.length<2,y=m?void 0:arguments[1];if(v)return h(v,this,m?[A]:[A,y]);var w=o(this),b=0;if(i(w,function(E){m?(m=!1,y=E):y=A(y,E,b),b++},{IS_RECORD:!0}),m)throw new f("Reduce of empty iterator with no initial value");return y}})},8335:(r,t,e)=>{var n=e(6518),i=e(3724),s=e(4576),a=e(7751),o=e(9504),l=e(9565),c=e(4901),h=e(34),d=e(4376),f=e(9297),p=e(655),v=e(6198),g=e(4659),A=e(9039),m=e(8235),y=e(4495),w=s.JSON,b=s.Number,E=s.SyntaxError,T=w&&w.parse,R=a("Object","keys"),P=Object.getOwnPropertyDescriptor,_=o("".charAt),N=o("".slice),B=o(/./.exec),O=o([].push),M=/^\d$/,x=/^[1-9]$/,$=/^[\d-]$/,X=/^[\t\n\r ]$/,F=0,W=1,H=function(J,K){J=p(J);var Q=new st(J,0),ct=Q.parse(),bt=ct.value,ut=Q.skip(X,ct.end);if(ut<J.length)throw new E('Unexpected extra character: "'+_(J,ut)+'" after the parsed data at: '+ut);return c(K)?Z({"":bt},"",K,ct):bt},Z=function(J,K,Q,ct){var bt=J[K],ut=ct&&bt===ct.value,Rt=ut&&typeof ct.source=="string"?{source:ct.source}:{},It,C,Y,V,D;if(h(bt)){var L=d(bt),U=ut?ct.nodes:L?[]:{};if(L)for(It=U.length,Y=v(bt),V=0;V<Y;V++)j(bt,V,Z(bt,""+V,Q,V<It?U[V]:void 0));else for(C=R(bt),Y=v(C),V=0;V<Y;V++)D=C[V],j(bt,D,Z(bt,D,Q,f(U,D)?U[D]:void 0))}return l(Q,J,K,bt,Rt)},j=function(J,K,Q){if(i){var ct=P(J,K);if(ct&&!ct.configurable)return}Q===void 0?delete J[K]:g(J,K,Q)},z=function(J,K,Q,ct){this.value=J,this.end=K,this.source=Q,this.nodes=ct},st=function(J,K){this.source=J,this.index=K};st.prototype={fork:function(J){return new st(this.source,J)},parse:function(){var J=this.source,K=this.skip(X,this.index),Q=this.fork(K),ct=_(J,K);if(B($,ct))return Q.number();switch(ct){case"{":return Q.object();case"[":return Q.array();case'"':return Q.string();case"t":return Q.keyword(!0);case"f":return Q.keyword(!1);case"n":return Q.keyword(null)}throw new E('Unexpected character: "'+ct+'" at: '+K)},node:function(J,K,Q,ct,bt){return new z(K,ct,J?null:N(this.source,Q,ct),bt)},object:function(){for(var J=this.source,K=this.index+1,Q=!1,ct={},bt={};K<J.length;){if(K=this.until(['"',"}"],K),_(J,K)==="}"&&!Q){K++;break}var ut=this.fork(K).string(),Rt=ut.value;K=ut.end,K=this.until([":"],K)+1,K=this.skip(X,K),ut=this.fork(K).parse(),g(bt,Rt,ut),g(ct,Rt,ut.value),K=this.until([",","}"],ut.end);var It=_(J,K);if(It===",")Q=!0,K++;else if(It==="}"){K++;break}}return this.node(W,ct,this.index,K,bt)},array:function(){for(var J=this.source,K=this.index+1,Q=!1,ct=[],bt=[];K<J.length;){if(K=this.skip(X,K),_(J,K)==="]"&&!Q){K++;break}var ut=this.fork(K).parse();if(O(bt,ut),O(ct,ut.value),K=this.until([",","]"],ut.end),_(J,K)===",")Q=!0,K++;else if(_(J,K)==="]"){K++;break}}return this.node(W,ct,this.index,K,bt)},string:function(){var J=this.index,K=m(this.source,this.index+1);return this.node(F,K.value,J,K.end)},number:function(){var J=this.source,K=this.index,Q=K;if(_(J,Q)==="-"&&Q++,_(J,Q)==="0")Q++;else if(B(x,_(J,Q)))Q=this.skip(M,Q+1);else throw new E("Failed to parse number at: "+Q);if(_(J,Q)==="."&&(Q=this.skip(M,Q+1)),_(J,Q)==="e"||_(J,Q)==="E"){Q++,(_(J,Q)==="+"||_(J,Q)==="-")&&Q++;var ct=Q;if(Q=this.skip(M,Q),ct===Q)throw new E("Failed to parse number's exponent value at: "+Q)}return this.node(F,b(N(J,K,Q)),K,Q)},keyword:function(J){var K=""+J,Q=this.index,ct=Q+K.length;if(N(this.source,Q,ct)!==K)throw new E("Failed to parse value at: "+Q);return this.node(F,J,Q,ct)},skip:function(J,K){for(var Q=this.source;K<Q.length&&B(J,_(Q,K));K++);return K},until:function(J,K){K=this.skip(X,K);for(var Q=_(this.source,K),ct=0;ct<J.length;ct++)if(J[ct]===Q)return K;throw new E('Unexpected character: "'+Q+'" at: '+K)}};var tt=A(function(){var J="9007199254740993",K;return T(J,function(Q,ct,bt){K=bt.source}),K!==J}),et=y&&!A(function(){return 1/T("-0 	")!==-1/0});n({target:"JSON",stat:!0,forced:tt},{parse:function(K,Q){return et&&!c(Q)?T(K):H(K,Q)}})},8469:(r,t,e)=>{var n=e(9504),i=e(507),s=e(4402),a=s.Set,o=s.proto,l=n(o.forEach),c=n(o.keys),h=c(new a).next;r.exports=function(d,f,p){return p?i({iterator:c(d),next:h},f):l(d,f)}},8480:(r,t,e)=>{var n=e(1828),i=e(8727),s=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(o){return n(o,s)}},8527:(r,t,e)=>{var n=e(7080),i=e(4402).has,s=e(5170),a=e(3789),o=e(507),l=e(9539);r.exports=function(h){var d=n(this),f=a(h);if(s(d)<f.size)return!1;var p=f.getIterator();return o(p,function(v){if(!i(d,v))return l(p,"normal",!1)})!==!1}},8551:(r,t,e)=>{var n=e(34),i=String,s=TypeError;r.exports=function(a){if(n(a))return a;throw new s(i(a)+" is not an object")}},8574:(r,t,e)=>{var n=e(9504),i=Error,s=n("".replace),a=function(c){return String(new i(c).stack)}("zxcasd"),o=/\n\s*at [^:]*:[^\n]*/,l=o.test(a);r.exports=function(c,h){if(l&&typeof c=="string"&&!i.prepareStackTrace)for(;h--;)c=s(c,o,"");return c}},8622:(r,t,e)=>{var n=e(4576),i=e(4901),s=n.WeakMap;r.exports=i(s)&&/native code/.test(String(s))},8646:(r,t,e)=>{var n=e(9565),i=e(8551),s=e(1767),a=e(851);r.exports=function(o,l){(!l||typeof o!="string")&&i(o);var c=a(o);return s(i(c!==void 0?n(c,o):o))}},8686:(r,t,e)=>{var n=e(3724),i=e(9039);r.exports=n&&i(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},8721:(r,t,e)=>{var n=e(3724),i=e(9504),s=e(2106),a=URLSearchParams.prototype,o=i(a.forEach);n&&!("size"in a)&&s(a,"size",{get:function(){var c=0;return o(this,function(){c++}),c},configurable:!0,enumerable:!0})},8727:r=>{r.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8745:(r,t,e)=>{var n=e(616),i=Function.prototype,s=i.apply,a=i.call;r.exports=typeof Reflect=="object"&&Reflect.apply||(n?a.bind(s):function(){return a.apply(s,arguments)})},8750:(r,t,e)=>{var n=e(7080),i=e(4402),s=e(5170),a=e(3789),o=e(8469),l=e(507),c=i.Set,h=i.add,d=i.has;r.exports=function(p){var v=n(this),g=a(p),A=new c;return s(v)>g.size?l(g.getIterator(),function(m){d(v,m)&&h(A,m)}):o(v,function(m){g.includes(m)&&h(A,m)}),A}},8773:(r,t)=>{var e={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!e.call({1:2},1);t.f=i?function(a){var o=n(this,a);return!!o&&o.enumerable}:e},8981:(r,t,e)=>{var n=e(7750),i=Object;r.exports=function(s){return i(n(s))}},9039:r=>{r.exports=function(t){try{return!!t()}catch{return!0}}},9143:(r,t,e)=>{var n=e(4576),i=e(9504),s=e(3972),a=e(3463),o=e(9297),l=e(2804),c=e(944),h=e(5169),d=l.c2i,f=l.c2iUrl,p=n.SyntaxError,v=n.TypeError,g=i("".charAt),A=function(w,b){for(var E=w.length;b<E;b++){var T=g(w,b);if(T!==" "&&T!=="	"&&T!==`
`&&T!=="\f"&&T!=="\r")break}return b},m=function(w,b,E){var T=w.length;T<4&&(w+=T===2?"AA":"A");var R=(b[g(w,0)]<<18)+(b[g(w,1)]<<12)+(b[g(w,2)]<<6)+b[g(w,3)],P=[R>>16&255,R>>8&255,R&255];if(T===2){if(E&&P[1]!==0)throw new p("Extra bits");return[P[0]]}if(T===3){if(E&&P[2]!==0)throw new p("Extra bits");return[P[0],P[1]]}return P},y=function(w,b,E){for(var T=b.length,R=0;R<T;R++)w[E+R]=b[R];return E+T};r.exports=function(w,b,E,T){a(w),s(b);var R=c(b)==="base64"?d:f,P=b?b.lastChunkHandling:void 0;if(P===void 0&&(P="loose"),P!=="loose"&&P!=="strict"&&P!=="stop-before-partial")throw new v("Incorrect `lastChunkHandling` option");E&&h(E.buffer);var _=E||[],N=0,B=0,O="",M=0;if(T)for(;;){if(M=A(w,M),M===w.length){if(O.length>0){if(P==="stop-before-partial")break;if(P==="loose"){if(O.length===1)throw new p("Malformed padding: exactly one additional character");N=y(_,m(O,R,!1),N)}else throw new p("Missing padding")}B=w.length;break}var x=g(w,M);if(++M,x==="="){if(O.length<2)throw new p("Padding is too early");if(M=A(w,M),O.length===2){if(M===w.length){if(P==="stop-before-partial")break;throw new p("Malformed padding: only one =")}g(w,M)==="="&&(++M,M=A(w,M))}if(M<w.length)throw new p("Unexpected character after padding");N=y(_,m(O,R,P==="strict"),N),B=w.length;break}if(!o(R,x))throw new p("Unexpected character");var $=T-N;if($===1&&O.length===2||$===2&&O.length===3||(O+=x,O.length===4&&(N=y(_,m(O,R,!1),N),O="",B=M,N===T)))break}return{bytes:_,read:B,written:N}}},9286:(r,t,e)=>{var n=e(4402),i=e(8469),s=n.Set,a=n.add;r.exports=function(o){var l=new s;return i(o,function(c){a(l,c)}),l}},9297:(r,t,e)=>{var n=e(9504),i=e(8981),s=n({}.hasOwnProperty);r.exports=Object.hasOwn||function(o,l){return s(i(o),l)}},9306:(r,t,e)=>{var n=e(4901),i=e(6823),s=TypeError;r.exports=function(a){if(n(a))return a;throw new s(i(a)+" is not a function")}},9314:(r,t,e)=>{var n=e(6518),i=e(9565),s=e(8551),a=e(1767),o=e(4149),l=e(9590),c=e(9539),h=e(9462),d=e(684),f=e(4549),p=e(6395),v=!p&&!d("drop",0),g=!p&&!v&&f("drop",RangeError),A=p||v||g,m=h(function(){for(var y=this.iterator,w=this.next,b,E;this.remaining;)if(this.remaining--,b=s(i(w,y)),E=this.done=!!b.done,E)return;if(b=s(i(w,y)),E=this.done=!!b.done,!E)return b.value});n({target:"Iterator",proto:!0,real:!0,forced:A},{drop:function(w){s(this);var b;try{b=l(o(+w))}catch(E){c(this,"throw",E)}return g?i(g,this,b):new m(a(this),{remaining:b})}})},9429:(r,t,e)=>{var n=e(4576),i=e(6193);r.exports=function(s){if(i){try{return n.process.getBuiltinModule(s)}catch{}try{return Function('return require("'+s+'")')()}catch{}}}},9432:(r,t,e)=>{var n=e(6518),i=e(4576),s=e(5370),a=e(9143),o=i.Uint8Array,l=!o||!o.fromBase64||!function(){try{o.fromBase64("",null)}catch{return!0}}();o&&n({target:"Uint8Array",stat:!0,forced:l},{fromBase64:function(h){var d=a(h,arguments.length>1?arguments[1]:void 0,null,9007199254740991);return s(o,d.bytes)}})},9433:(r,t,e)=>{var n=e(4576),i=Object.defineProperty;r.exports=function(s,a){try{i(n,s,{value:a,configurable:!0,writable:!0})}catch{n[s]=a}return a}},9462:(r,t,e)=>{var n=e(9565),i=e(2360),s=e(6699),a=e(6279),o=e(8227),l=e(1181),c=e(5966),h=e(7657).IteratorPrototype,d=e(2529),f=e(9539),p=e(1385),v=o("toStringTag"),g="IteratorHelper",A="WrapForValidIterator",m="normal",y="throw",w=l.set,b=function(R){var P=l.getterFor(R?A:g);return a(i(h),{next:function(){var N=P(this);if(R)return N.nextHandler();if(N.done)return d(void 0,!0);try{var B=N.nextHandler();return N.returnHandlerResult?B:d(B,N.done)}catch(O){throw N.done=!0,O}},return:function(){var _=P(this),N=_.iterator;if(_.done=!0,R){var B=c(N,"return");return B?n(B,N):d(void 0,!0)}if(_.inner)try{f(_.inner.iterator,m)}catch(O){return f(N,y,O)}if(_.openIters)try{p(_.openIters,m)}catch(O){return f(N,y,O)}return N&&f(N,m),d(void 0,!0)}})},E=b(!0),T=b(!1);s(T,v,"Iterator Helper"),r.exports=function(R,P,_){var N=function(O,M){M?(M.iterator=O.iterator,M.next=O.next):M=O,M.type=P?A:g,M.returnHandlerResult=!!_,M.nextHandler=R,M.counter=0,M.done=!1,w(this,M)};return N.prototype=P?E:T,N}},9504:(r,t,e)=>{var n=e(616),i=Function.prototype,s=i.call,a=n&&i.bind.bind(s,s);r.exports=n?a:function(o){return function(){return s.apply(o,arguments)}}},9519:(r,t,e)=>{var n=e(4576),i=e(2839),s=n.process,a=n.Deno,o=s&&s.versions||a&&a.version,l=o&&o.v8,c,h;l&&(c=l.split("."),h=c[0]>0&&c[0]<4?1:+(c[0]+c[1])),!h&&i&&(c=i.match(/Edge\/(\d+)/),(!c||c[1]>=74)&&(c=i.match(/Chrome\/(\d+)/),c&&(h=+c[1]))),r.exports=h},9539:(r,t,e)=>{var n=e(9565),i=e(8551),s=e(5966);r.exports=function(a,o,l){var c,h;i(a);try{if(c=s(a,"return"),!c){if(o==="throw")throw l;return l}c=n(c,a)}catch(d){h=!0,c=d}if(o==="throw")throw l;if(h)throw c;return i(c),l}},9565:(r,t,e)=>{var n=e(616),i=Function.prototype.call;r.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},9577:(r,t,e)=>{var n=e(9928),i=e(4644),s=e(1108),a=e(1291),o=e(5854),l=i.aTypedArray,c=i.getTypedArrayConstructor,h=i.exportTypedArrayMethod,d=function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(p){return p===8}}(),f=d&&function(){try{new Int8Array(1).with(-.5,1)}catch{return!0}}();h("with",function(p,v){var g=l(this),A=a(p),m=s(g)?o(v):+v;return n(g,c(g),A,m)},!d||f)},9590:(r,t,e)=>{var n=e(1291),i=RangeError;r.exports=function(s){var a=n(s);if(a<0)throw new i("The argument can't be less than 0");return a}},9617:(r,t,e)=>{var n=e(5397),i=e(5610),s=e(6198),a=function(o){return function(l,c,h){var d=n(l),f=s(d);if(f===0)return!o&&-1;var p=i(h,f),v;if(o&&c!==c){for(;f>p;)if(v=d[p++],v!==v)return!0}else for(;f>p;p++)if((o||p in d)&&d[p]===c)return o||p||0;return!o&&-1}};r.exports={includes:a(!0),indexOf:a(!1)}},9631:(r,t,e)=>{var n=e(6518),i=e(4576),s=e(9504),a=e(3972),o=e(4154),l=e(5169),c=e(2804),h=e(944),d=c.i2c,f=c.i2cUrl,p=s("".charAt),v=i.Uint8Array,g=!v||!v.prototype.toBase64||!function(){try{var A=new v;A.toBase64(null)}catch{return!0}}();v&&n({target:"Uint8Array",proto:!0,forced:g},{toBase64:function(){var m=o(this),y=arguments.length?a(arguments[0]):void 0,w=h(y)==="base64"?d:f,b=!!y&&!!y.omitPadding;l(this.buffer);for(var E="",T=0,R=m.length,P,_=function(N){return p(w,P>>6*N&63)};T+2<R;T+=3)P=(m[T]<<16)+(m[T+1]<<8)+m[T+2],E+=_(3)+_(2)+_(1)+_(0);return T+2===R?(P=(m[T]<<16)+(m[T+1]<<8),E+=_(3)+_(2)+_(1)+(b?"":"=")):T+1===R&&(P=m[T]<<16,E+=_(3)+_(2)+(b?"":"==")),E}})},9797:(r,t,e)=>{var n=e(6518),i=e(4576),s=e(3463),a=e(4154),o=e(5169),l=e(2303);i.Uint8Array&&n({target:"Uint8Array",proto:!0},{setFromHex:function(h){a(this),s(h),o(this.buffer);var d=l(h,this).read;return{read:d,written:d/2}}})},9835:r=>{r.exports=function(t){try{var e=new Set,n={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},i=e[t](n);return i.size===1&&i.values().next().value===4}catch{return!1}}},9928:(r,t,e)=>{var n=e(6198),i=e(1291),s=RangeError;r.exports=function(a,o,l,c){var h=n(a),d=i(l),f=d<0?h+d:d;if(f>=h||f<0)throw new s("Incorrect index");for(var p=new o(h),v=0;v<h;v++)p[v]=v===f?c:a[v];return p}}},lw={};function Ot(r){var t=lw[r];if(t!==void 0)return t.exports;var e=lw[r]={exports:{}};return DC[r].call(e.exports,e,e.exports,Ot),e.exports}Ot(4114);Ot(6573);Ot(8100);Ot(7936);Ot(8111);Ot(8237);Ot(1689);Ot(9577);Ot(4235);Ot(9432);Ot(1549);Ot(9797);Ot(9631);Ot(5623);Ot(4979);Ot(5781);const hn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Ev=[.001,0,0,.001,0,0],Sm=1.35,Gn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Cs={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Gb="pdfjs_internal_editor_",Et={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101,COMMENT:102},Pt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},MC={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Qe={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Yf={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ge={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},dl={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Ug={ERRORS:0,WARNINGS:1,INFOS:5},Kp={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Rf={moveTo:0,lineTo:1,curveTo:2,closePath:3},FC={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Hg=Ug.WARNINGS;function zC(r){Number.isInteger(r)&&(Hg=r)}function BC(){return Hg}function $g(r){Hg>=Ug.INFOS&&console.log(`Info: ${r}`)}function At(r){Hg>=Ug.WARNINGS&&console.log(`Warning: ${r}`)}function Wt(r){throw new Error(r)}function ye(r,t){r||Wt(t)}function jC(r){switch(r==null?void 0:r.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Xb(r,t=null,e=null){if(!r)return null;if(e&&typeof r=="string"){if(e.addDefaultProtocol&&r.startsWith("www.")){const i=r.match(/\./g);(i==null?void 0:i.length)>=2&&(r=`http://${r}`)}if(e.tryConvertEncoding)try{r=VC(r)}catch{}}const n=t?URL.parse(r,t):URL.parse(r);return jC(n)?n:null}function Yb(r,t,e=!1){const n=URL.parse(r);return n?(n.hash=t,n.href):e&&Xb(r,"http://example.com")?r.split("#",1)[0]+`${t?`#${t}`:""}`:""}function kt(r,t,e,n=!1){return Object.defineProperty(r,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const ul=function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();class uw extends ul{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Em extends ul{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class xv extends ul{constructor(t){super(t,"InvalidPDFException")}}class Zp extends ul{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class UC extends ul{constructor(t){super(t,"FormatError")}}class Ta extends ul{constructor(t){super(t,"AbortException")}}function Kb(r){(typeof r!="object"||(r==null?void 0:r.length)===void 0)&&Wt("Invalid argument for bytesToString");const t=r.length,e=8192;if(t<e)return String.fromCharCode.apply(null,r);const n=[];for(let i=0;i<t;i+=e){const s=Math.min(i+e,t),a=r.subarray(i,s);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function tf(r){typeof r!="string"&&Wt("Invalid argument for stringToBytes");const t=r.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=r.charCodeAt(n)&255;return e}function HC(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function $C(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function WC(){try{return new Function(""),!0}catch{return!1}}class Xe{static get isLittleEndian(){return kt(this,"isLittleEndian",$C())}static get isEvalSupported(){return kt(this,"isEvalSupported",WC())}static get isOffscreenCanvasSupported(){return kt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return kt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return kt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return kt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const xm=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));var hs,Kf,Cv;class vt{static makeHexColor(t,e,n){return`#${xm[t]}${xm[e]}${xm[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,n=0){const i=t[n],s=t[n+1];t[n]=i*e[0]+s*e[2]+e[4],t[n+1]=i*e[1]+s*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const i=e[0],s=e[1],a=e[2],o=e[3],l=e[4],c=e[5];for(let h=0;h<6;h+=2){const d=t[n+h],f=t[n+h+1];t[n+h]=d*i+f*a+l,t[n+h+1]=d*s+f*o+c}}static applyInverseTransform(t,e){const n=t[0],i=t[1],s=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-i*e[2]+e[2]*e[5]-e[4]*e[3])/s,t[1]=(-n*e[1]+i*e[0]+e[4]*e[1]-e[5]*e[0])/s}static axialAlignedBoundingBox(t,e,n){const i=e[0],s=e[1],a=e[2],o=e[3],l=e[4],c=e[5],h=t[0],d=t[1],f=t[2],p=t[3];let v=i*h+l,g=v,A=i*f+l,m=A,y=o*d+c,w=y,b=o*p+c,E=b;if(s!==0||a!==0){const T=s*h,R=s*f,P=a*d,_=a*p;v+=P,m+=P,A+=_,g+=_,y+=T,E+=T,b+=R,w+=R}n[0]=Math.min(n[0],v,A,g,m),n[1]=Math.min(n[1],y,b,w,E),n[2]=Math.max(n[2],v,A,g,m),n[3]=Math.max(n[3],y,b,w,E)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],i=t[1],s=t[2],a=t[3],o=n**2+i**2,l=n*s+i*a,c=s**2+a**2,h=(o+c)/2,d=Math.sqrt(h**2-(o*c-l**2));e[0]=Math.sqrt(h+d||1),e[1]=Math.sqrt(h-d||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;const s=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),a=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return s>a?null:[n,s,i,a]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,i,s){s[0]=Math.min(s[0],t,n),s[1]=Math.min(s[1],e,i),s[2]=Math.max(s[2],t,n),s[3]=Math.max(s[3],e,i)}static bezierBoundingBox(t,e,n,i,s,a,o,l,c){c[0]=Math.min(c[0],t,o),c[1]=Math.min(c[1],e,l),c[2]=Math.max(c[2],t,o),c[3]=Math.max(c[3],e,l),I(this,hs,Cv).call(this,t,n,s,o,e,i,a,l,3*(-t+3*(n-s)+o),6*(t-2*n+s),3*(n-t),c),I(this,hs,Cv).call(this,t,n,s,o,e,i,a,l,3*(-e+3*(i-a)+l),6*(e-2*i+a),3*(i-e),c)}}hs=new WeakSet,Kf=function(t,e,n,i,s,a,o,l,c,h){if(c<=0||c>=1)return;const d=1-c,f=c*c,p=f*c,v=d*(d*(d*t+3*c*e)+3*f*n)+p*i,g=d*(d*(d*s+3*c*a)+3*f*o)+p*l;h[0]=Math.min(h[0],v),h[1]=Math.min(h[1],g),h[2]=Math.max(h[2],v),h[3]=Math.max(h[3],g)},Cv=function(t,e,n,i,s,a,o,l,c,h,d,f){if(Math.abs(c)<1e-12){Math.abs(h)>=1e-12&&I(this,hs,Kf).call(this,t,e,n,i,s,a,o,l,-d/h,f);return}const p=h**2-4*d*c;if(p<0)return;const v=Math.sqrt(p),g=2*c;I(this,hs,Kf).call(this,t,e,n,i,s,a,o,l,(-h+v)/g,f),I(this,hs,Kf).call(this,t,e,n,i,s,a,o,l,(-h-v)/g,f)},k(vt,hs);function VC(r){return decodeURIComponent(escape(r))}let Cm=null,cw=null;function GC(r){return Cm||(Cm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,cw=new Map([["","t"]])),r.replaceAll(Cm,(t,e,n)=>e?e.normalize("NFKC"):cw.get(n))}function Zb(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);return crypto.getRandomValues(r),Kb(r)}const D0="pdfjs_internal_id_";function XC(r,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,i,...s]=e;if(!r(n)&&!Number.isInteger(n)||!t(i))return!1;const a=s.length;let o=!0;switch(i.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;o=!1;break;default:return!1}for(const l of s)if(!(typeof l=="number"||o&&l===null))return!1;return!0}function dn(r,t,e){return Math.min(Math.max(r,t),e)}function Qb(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(Kb(r))}function YC(r){return Uint8Array.fromBase64?Uint8Array.fromBase64(r):tf(atob(r))}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((t,e)=>t+e,0)});typeof AbortSignal.any!="function"&&(AbortSignal.any=function(r){const t=new AbortController,{signal:e}=t;for(const n of r)if(n.aborted)return t.abort(n.reason),e;for(const n of r)n.addEventListener("abort",()=>{t.abort(n.reason)},{signal:e});return e});Ot(1701);Ot(4628);Ot(7642);Ot(8004);Ot(3853);Ot(5876);Ot(2475);Ot(5024);Ot(1698);Ot(4603);Ot(7566);Ot(8721);Ot(9314);Ot(1148);Ot(3579);Ot(8335);const Si="http://www.w3.org/2000/svg",Ba=class Ba{};it(Ba,"CSS",96),it(Ba,"PDF",72),it(Ba,"PDF_TO_CSS_UNITS",Ba.CSS/Ba.PDF);let ka=Ba;async function ef(r,t="text"){if(Tc(r,document.baseURI)){const e=await fetch(r);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const i=new XMLHttpRequest;i.open("GET",r,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class nf{constructor({viewBox:t,userUnit:e,scale:n,rotation:i,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=i,this.offsetX=s,this.offsetY=a,n*=e;const l=(t[2]+t[0])/2,c=(t[3]+t[1])/2;let h,d,f,p;switch(i%=360,i<0&&(i+=360),i){case 180:h=-1,d=0,f=0,p=1;break;case 90:h=0,d=1,f=1,p=0;break;case 270:h=0,d=-1,f=-1,p=0;break;case 0:h=1,d=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(f=-f,p=-p);let v,g,A,m;h===0?(v=Math.abs(c-t[1])*n+s,g=Math.abs(l-t[0])*n+a,A=(t[3]-t[1])*n,m=(t[2]-t[0])*n):(v=Math.abs(l-t[0])*n+s,g=Math.abs(c-t[1])*n+a,A=(t[2]-t[0])*n,m=(t[3]-t[1])*n),this.transform=[h*n,d*n,f*n,p*n,v-h*n*l-f*n*c,g-d*n*l-p*n*c],this.width=A,this.height=m}get rawDims(){const t=this.viewBox;return kt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}={}){return new nf({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:s})}convertToViewportPoint(t,e){const n=[t,e];return vt.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];vt.applyTransform(e,this.transform);const n=[t[2],t[3]];return vt.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return vt.applyInverseTransform(n,this.transform),n}}class M0 extends ul{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Wg(r){const t=r.length;let e=0;for(;e<t&&r[e].trim()==="";)e++;return r.substring(e,e+5).toLowerCase()==="data:"}function F0(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function KC(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function ZC(r,t="document.pdf"){if(typeof r!="string")return t;if(Wg(r))return At('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(r);if(!n)return t;const i=o=>{try{let l=decodeURIComponent(o);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:o):l}catch{return o}},s=/\.pdf$/i,a=n.pathname.split("/").at(-1);if(s.test(a))return i(a);if(n.searchParams.size>0){const o=Array.from(n.searchParams.values()).reverse();for(const c of o)if(s.test(c))return i(c);const l=Array.from(n.searchParams.keys()).reverse();for(const c of l)if(s.test(c))return i(c)}if(n.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(l)return i(l[0])}return t}class hw{constructor(){it(this,"started",Object.create(null));it(this,"times",[])}time(t){t in this.started&&At(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||At(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:i,end:s}of this.times)t.push(`${n.padEnd(e)} ${s-i}ms
`);return t.join("")}}function Tc(r,t){const e=t?URL.parse(r,t):URL.parse(r);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function Ar(r){r.preventDefault()}function me(r){r.preventDefault(),r.stopPropagation()}function QC(r){console.log("Deprecated API usage: "+r)}var Ah;class Qp{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;u(this,Ah)||S(this,Ah,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=u(this,Ah).exec(t);if(!e)return null;const n=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(e[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(e[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(e[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;const c=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,c==="-"?(a+=h,o+=d):c==="+"&&(a-=h,o-=d),new Date(Date.UTC(n,i,s,a,o,l))}}Ah=new WeakMap,k(Qp,Ah);function JC(r,{scale:t=1,rotation:e=0}){const{width:n,height:i}=r.attributes.style,s=[0,0,parseInt(n),parseInt(i)];return new nf({viewBox:s,userUnit:1,scale:t,rotation:e})}function Vg(r){if(r.startsWith("#")){const t=parseInt(r.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(t=>parseInt(t)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(At(`Not a valid color format: "${r}"`),[0,0,0])}function qC(r){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of r.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;r.set(e,Vg(n))}t.remove()}function re(r){const{a:t,b:e,c:n,d:i,e:s,f:a}=r.getTransform();return[t,e,n,i,s,a]}function Vr(r){const{a:t,b:e,c:n,d:i,e:s,f:a}=r.getTransform().invertSelf();return[t,e,n,i,s,a]}function il(r,t,e=!1,n=!0){if(t instanceof nf){const{pageWidth:i,pageHeight:s}=t.rawDims,{style:a}=r,o=Xe.isCSSRoundSupported,l=`var(--total-scale-factor) * ${i}px`,c=`var(--total-scale-factor) * ${s}px`,h=o?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,d=o?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!e||t.rotation%180===0?(a.width=h,a.height=d):(a.width=d,a.height=h)}n&&r.setAttribute("data-main-rotation",t.rotation)}class wi{constructor(){const{pixelRatio:t}=wi;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,i,s=-1){let a=1/0,o=1/0,l=1/0;n=wi.capPixels(n,s),n>0&&(a=Math.sqrt(n/(t*e))),i!==-1&&(o=i/t,l=i/e);const c=Math.min(a,o,l);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const Tv=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Ts,ks,ir,Ii,bh,Hl,$l,Sh,ag,Jb,Ve,qb,tS,fl,kc;const Ti=class Ti{constructor(t){k(this,Ve);k(this,Ts,null);k(this,ks,null);k(this,ir);k(this,Ii,null);k(this,bh,null);k(this,Hl,null);k(this,$l,null);S(this,ir,t),u(Ti,Sh)||S(Ti,Sh,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=S(this,Ts,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=u(this,ir)._uiManager._signal;t.addEventListener("contextmenu",Ar,{signal:e}),t.addEventListener("pointerdown",I(Ti,ag,Jb),{signal:e});const n=S(this,Ii,document.createElement("div"));n.className="buttons",t.append(n);const i=u(this,ir).toolbarPosition;if(i){const{style:s}=t,a=u(this,ir)._uiManager.direction==="ltr"?1-i[0]:i[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return u(this,Ts)}hide(){var t;u(this,Ts).classList.add("hidden"),(t=u(this,ks))==null||t.hideDropdown()}show(){var t,e;u(this,Ts).classList.remove("hidden"),(t=u(this,bh))==null||t.shown(),(e=u(this,Hl))==null||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=u(this,ir),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",u(Ti,Sh)[t]),I(this,Ve,fl).call(this,n),n.addEventListener("click",i=>{e.delete()},{signal:e._signal}),u(this,Ii).append(n)}async addAltText(t){const e=await t.render();I(this,Ve,fl).call(this,e),u(this,Ii).append(e,u(this,Ve,kc)),S(this,bh,t)}addComment(t){if(u(this,Hl))return;const e=t.render();e&&(I(this,Ve,fl).call(this,e),u(this,Ii).prepend(e,u(this,Ve,kc)),S(this,Hl,t),t.toolbar=this)}addColorPicker(t){if(u(this,ks))return;S(this,ks,t);const e=t.renderButton();I(this,Ve,fl).call(this,e),u(this,Ii).append(e,u(this,Ve,kc))}async addEditSignatureButton(t){const e=S(this,$l,await t.renderEditButton(u(this,ir)));I(this,Ve,fl).call(this,e),u(this,Ii).append(e,u(this,Ve,kc))}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}updateEditSignatureButton(t){u(this,$l)&&(u(this,$l).title=t)}remove(){var t;u(this,Ts).remove(),(t=u(this,ks))==null||t.destroy(),S(this,ks,null)}};Ts=new WeakMap,ks=new WeakMap,ir=new WeakMap,Ii=new WeakMap,bh=new WeakMap,Hl=new WeakMap,$l=new WeakMap,Sh=new WeakMap,ag=new WeakSet,Jb=function(t){t.stopPropagation()},Ve=new WeakSet,qb=function(t){u(this,ir)._focusEventsAllowed=!1,me(t)},tS=function(t){u(this,ir)._focusEventsAllowed=!0,me(t)},fl=function(t){const e=u(this,ir)._uiManager._signal;t.addEventListener("focusin",I(this,Ve,qb).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",I(this,Ve,tS).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Ar,{signal:e})},kc=function(){const t=document.createElement("div");return t.className="divider",t},k(Ti,ag),k(Ti,Sh,null);let kv=Ti;var Eh,Va,Ga,Ra,eS,nS,rS;class tT{constructor(t){k(this,Ra);k(this,Eh,null);k(this,Va,null);k(this,Ga);S(this,Ga,t)}show(t,e,n){const[i,s]=I(this,Ra,nS).call(this,e,n),{style:a}=u(this,Va)||S(this,Va,I(this,Ra,eS).call(this));t.append(u(this,Va)),a.insetInlineEnd=`${100*i}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,Va).remove()}}Eh=new WeakMap,Va=new WeakMap,Ga=new WeakMap,Ra=new WeakSet,eS=function(){const t=S(this,Va,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Ar,{signal:u(this,Ga)._signal});const e=S(this,Eh,document.createElement("div"));return e.className="buttons",t.append(e),I(this,Ra,rS).call(this),t},nS=function(t,e){let n=0,i=0;for(const s of t){const a=s.y+s.height;if(a<n)continue;const o=s.x+(e?s.width:0);if(a>n){i=o,n=a;continue}e?o>i&&(i=o):o<i&&(i=o)}return[e?1-i:i,n]},rS=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=u(this,Ga)._signal;t.addEventListener("contextmenu",Ar,{signal:n}),t.addEventListener("click",()=>{u(this,Ga).highlightSelection("floating_button")},{signal:n}),u(this,Eh).append(t)};function iS(r,t,e){for(const n of e)t.addEventListener(n,r[n].bind(r))}var og;class eT{constructor(){k(this,og,0)}get id(){return`${Gb}${sn(this,og)._++}`}}og=new WeakMap;var Wl,xh,qe,Vl,Zf;const V0=class V0{constructor(){k(this,Vl);k(this,Wl,Zb());k(this,xh,0);k(this,qe,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;const s=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return kt(this,"_isSVGFittingCanvas",s)}async getFromFile(t){const{lastModified:e,name:n,size:i,type:s}=t;return I(this,Vl,Zf).call(this,`${e}_${n}_${i}_${s}`,t)}async getFromUrl(t){return I(this,Vl,Zf).call(this,t,t)}async getFromBlob(t,e){const n=await e;return I(this,Vl,Zf).call(this,t,n)}async getFromId(t){u(this,qe)||S(this,qe,new Map);const e=u(this,qe).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){u(this,qe)||S(this,qe,new Map);let n=u(this,qe).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${u(this,Wl)}_${sn(this,xh)._++}`,refCounter:1,isSvg:!1},u(this,qe).set(t,n),u(this,qe).set(n.id,n),n}getSvgUrl(t){const e=u(this,qe).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var i;u(this,qe)||S(this,qe,new Map);const e=u(this,qe).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const s=new OffscreenCanvas(n.width,n.height);s.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=s.convertToBlob()}(i=n.close)==null||i.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${u(this,Wl)}_`)}};Wl=new WeakMap,xh=new WeakMap,qe=new WeakMap,Vl=new WeakSet,Zf=async function(t,e){u(this,qe)||S(this,qe,new Map);let n=u(this,qe).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${u(this,Wl)}_${sn(this,xh)._++}`,refCounter:0,isSvg:!1});let i;if(typeof e=="string"?(n.url=e,i=await ef(e,"blob")):e instanceof File?i=n.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){const s=V0._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((c,h)=>{o.onload=()=>{n.bitmap=o,n.isSvg=!0,c()},a.onload=async()=>{const d=n.svgUrl=a.result;o.src=await s?`${d}#svgView(preserveAspectRatio(none))`:d},o.onerror=a.onerror=h});a.readAsDataURL(i),await l}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){At(i),n=null}return u(this,qe).set(t,n),n&&u(this,qe).set(n.id,n),n};let Rv=V0;var ce,Rs,Ch,ne;class nT{constructor(t=128){k(this,ce,[]);k(this,Rs,!1);k(this,Ch);k(this,ne,-1);S(this,Ch,t)}add({cmd:t,undo:e,post:n,mustExec:i,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(i&&t(),u(this,Rs))return;const l={cmd:t,undo:e,post:n,type:s};if(u(this,ne)===-1){u(this,ce).length>0&&(u(this,ce).length=0),S(this,ne,0),u(this,ce).push(l);return}if(a&&u(this,ce)[u(this,ne)].type===s){o&&(l.undo=u(this,ce)[u(this,ne)].undo),u(this,ce)[u(this,ne)]=l;return}const c=u(this,ne)+1;c===u(this,Ch)?u(this,ce).splice(0,1):(S(this,ne,c),c<u(this,ce).length&&u(this,ce).splice(c)),u(this,ce).push(l)}undo(){if(u(this,ne)===-1)return;S(this,Rs,!0);const{undo:t,post:e}=u(this,ce)[u(this,ne)];t(),e==null||e(),S(this,Rs,!1),S(this,ne,u(this,ne)-1)}redo(){if(u(this,ne)<u(this,ce).length-1){S(this,ne,u(this,ne)+1),S(this,Rs,!0);const{cmd:t,post:e}=u(this,ce)[u(this,ne)];t(),e==null||e(),S(this,Rs,!1)}}hasSomethingToUndo(){return u(this,ne)!==-1}hasSomethingToRedo(){return u(this,ne)<u(this,ce).length-1}cleanType(t){if(u(this,ne)!==-1){for(let e=u(this,ne);e>=0;e--)if(u(this,ce)[e].type!==t){u(this,ce).splice(e+1,u(this,ne)-e),S(this,ne,e);return}u(this,ce).length=0,S(this,ne,-1)}}destroy(){S(this,ce,null)}}ce=new WeakMap,Rs=new WeakMap,Ch=new WeakMap,ne=new WeakMap;var lg,sS;class rf{constructor(t){k(this,lg);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Xe.platform;for(const[n,i,s={}]of t)for(const a of n){const o=a.startsWith("mac+");e&&o?(this.callbacks.set(a.slice(4),{callback:i,options:s}),this.allKeys.add(a.split("+").at(-1))):!e&&!o&&(this.callbacks.set(a,{callback:i,options:s}),this.allKeys.add(a.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(I(this,lg,sS).call(this,e));if(!n)return;const{callback:i,options:{bubbles:s=!1,args:a=[],checker:o=null}}=n;o&&!o(t,e)||(i.bind(t,...a,e)(),s||me(e))}}lg=new WeakSet,sS=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const ug=class ug{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return qC(t),kt(this,"_colors",t)}convert(t){const e=Vg(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,i]of this._colors)if(i.every((s,a)=>s===e[a]))return ug._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?vt.makeHexColor(...e):t}};it(ug,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Iv=ug;var Gl,Pn,Se,Me,Xl,_i,Yl,sr,Xa,Is,_s,Kl,Ya,Kr,xr,Ka,Th,kh,Zl,Rh,Zr,Ps,Ql,Os,Qr,cg,Ls,Ih,Ns,Za,Jl,Ds,_h,ke,jt,Pi,Ms,Fs,Ph,Oh,zs,Jr,Oi,Lh,Nh,ar,lt,Qf,_v,aS,oS,Jf,lS,uS,cS,Pv,hS,Ov,Lv,dS,an,Ei,fS,pS,Nv,gS,Rc,Dv;const Ll=class Ll{constructor(t,e,n,i,s,a,o,l,c,h,d,f,p,v,g,A){k(this,lt);k(this,Gl,new AbortController);k(this,Pn,null);k(this,Se,new Map);k(this,Me,new Map);k(this,Xl,null);k(this,_i,null);k(this,Yl,null);k(this,sr,new nT);k(this,Xa,null);k(this,Is,null);k(this,_s,null);k(this,Kl,0);k(this,Ya,new Set);k(this,Kr,null);k(this,xr,null);k(this,Ka,new Set);it(this,"_editorUndoBar",null);k(this,Th,!1);k(this,kh,!1);k(this,Zl,!1);k(this,Rh,null);k(this,Zr,null);k(this,Ps,null);k(this,Ql,null);k(this,Os,!1);k(this,Qr,null);k(this,cg,new eT);k(this,Ls,!1);k(this,Ih,!1);k(this,Ns,null);k(this,Za,null);k(this,Jl,null);k(this,Ds,null);k(this,_h,null);k(this,ke,Et.NONE);k(this,jt,new Set);k(this,Pi,null);k(this,Ms,null);k(this,Fs,null);k(this,Ph,null);k(this,Oh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});k(this,zs,[0,0]);k(this,Jr,null);k(this,Oi,null);k(this,Lh,null);k(this,Nh,null);k(this,ar,null);const m=this._signal=u(this,Gl).signal;S(this,Oi,t),S(this,Lh,e),S(this,Nh,n),S(this,Xl,i),S(this,Xa,s),S(this,Ms,a),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:m}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),o._on("setpreference",this.onSetPreference.bind(this),{signal:m}),o._on("switchannotationeditorparams",y=>this.updateParams(y.type,y.value),{signal:m}),I(this,lt,lS).call(this),I(this,lt,dS).call(this),I(this,lt,Pv).call(this),S(this,_i,l.annotationStorage),S(this,Rh,l.filterFactory),S(this,Fs,c),S(this,Ql,h||null),S(this,Th,d),S(this,kh,f),S(this,Zl,p),S(this,_h,v||null),this.viewParameters={realScale:ka.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=A!==!1}static get _keyboardManager(){const t=Ll.prototype,e=a=>u(a,Oi).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return kt(this,"_keyboardManager",new rf([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&u(a,Oi).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&u(a,Oi).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}]]))}destroy(){var t,e,n,i,s,a,o,l,c;(t=u(this,ar))==null||t.resolve(),S(this,ar,null),(e=u(this,Gl))==null||e.abort(),S(this,Gl,null),this._signal=null;for(const h of u(this,Me).values())h.destroy();u(this,Me).clear(),u(this,Se).clear(),u(this,Ka).clear(),(n=u(this,Ds))==null||n.clear(),S(this,Pn,null),u(this,jt).clear(),u(this,sr).destroy(),(i=u(this,Xl))==null||i.destroy(),(s=u(this,Xa))==null||s.destroy(),(a=u(this,Ms))==null||a.destroy(),(o=u(this,Qr))==null||o.hide(),S(this,Qr,null),(l=u(this,Jl))==null||l.destroy(),S(this,Jl,null),u(this,Zr)&&(clearTimeout(u(this,Zr)),S(this,Zr,null)),u(this,Jr)&&(clearTimeout(u(this,Jr)),S(this,Jr,null)),(c=this._editorUndoBar)==null||c.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return u(this,_h)}get useNewAltTextFlow(){return u(this,kh)}get useNewAltTextWhenAddingImage(){return u(this,Zl)}get hcmFilter(){return kt(this,"hcmFilter",u(this,Fs)?u(this,Rh).addHCMFilter(u(this,Fs).foreground,u(this,Fs).background):"none")}get direction(){return kt(this,"direction",getComputedStyle(u(this,Oi)).direction)}get _highlightColors(){return kt(this,"_highlightColors",u(this,Ql)?new Map(u(this,Ql).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return kt(this,"highlightColors",null);const e=new Map,n=!!u(this,Fs);for(const[i,s]of t){const a=i.endsWith("_HCM");if(n&&a){e.set(i.replace("_HCM",""),s);continue}!n&&!a&&e.set(i,s)}return kt(this,"highlightColors",e)}get highlightColorNames(){return kt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),S(this,_s,t)}setMainHighlightColorPicker(t){S(this,Jl,t)}editAltText(t,e=!1){var n;(n=u(this,Xl))==null||n.editAltText(this,t,e)}hasCommentManager(){return!!u(this,Xa)}editComment(t,e){var n;(n=u(this,Xa))==null||n.open(this,t,e)}getSignature(t){var e;(e=u(this,Ms))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return u(this,Ms)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":S(this,Zl,e);break}}onPageChanging({pageNumber:t}){S(this,Kl,t-1)}focusMainContainer(){u(this,Oi).focus()}findParent(t,e){for(const n of u(this,Me).values()){const{x:i,y:s,width:a,height:o}=n.div.getBoundingClientRect();if(t>=i&&t<=i+a&&e>=s&&e<=s+o)return n}return null}disableUserSelect(t=!1){u(this,Lh).classList.toggle("noUserSelect",t)}addShouldRescale(t){u(this,Ka).add(t)}removeShouldRescale(t){u(this,Ka).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*ka.PDF_TO_CSS_UNITS;for(const n of u(this,Ka))n.onScaleChanging();(e=u(this,_s))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:a}=e,o=e.toString(),c=I(this,lt,Qf).call(this,e).closest(".textLayer"),h=this.getSelectionBoxes(c);if(!h)return;e.empty();const d=I(this,lt,_v).call(this,c),f=u(this,ke)===Et.NONE,p=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:h,anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:a,text:o}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(Et.HIGHLIGHT,p);return}p()}addToAnnotationStorage(t){!t.isEmpty()&&u(this,_i)&&!u(this,_i).has(t.id)&&u(this,_i).setValue(t.id,t)}a11yAlert(t,e=null){const n=u(this,Nh);n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,u(this,Os)&&(S(this,Os,!1),I(this,lt,Jf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of u(this,jt))if(e.div.contains(t)){S(this,Za,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!u(this,Za))return;const[t,e]=u(this,Za);S(this,Za,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){I(this,lt,Pv).call(this),I(this,lt,Ov).call(this)}removeEditListeners(){I(this,lt,hS).call(this),I(this,lt,Lv).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of u(this,xr))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of u(this,xr))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=u(this,Pn))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of u(this,jt)){const s=i.serialize(!0);s&&e.push(s)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const s of e.items)for(const a of u(this,xr))if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(s){At(`paste: "${s.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const s=[];for(const l of n){const c=await i.deserialize(l);if(!c)return;s.push(c)}const a=()=>{for(const l of s)I(this,lt,Nv).call(this,l);I(this,lt,Dv).call(this,s)},o=()=>{for(const l of s)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(s){At(`paste: "${s.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,ke)!==Et.NONE&&!this.isEditorHandlingKeyboard&&Ll._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,Os)&&(S(this,Os,!1),I(this,lt,Jf).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(I(this,lt,uS).call(this),I(this,lt,Ov).call(this),I(this,lt,an).call(this,{isEditing:u(this,ke)!==Et.NONE,isEmpty:I(this,lt,Rc).call(this),hasSomethingToUndo:u(this,sr).hasSomethingToUndo(),hasSomethingToRedo:u(this,sr).hasSomethingToRedo(),hasSelectedEditor:!1})):(I(this,lt,cS).call(this),I(this,lt,Lv).call(this),I(this,lt,an).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!u(this,xr)){S(this,xr,t);for(const e of u(this,xr))I(this,lt,Ei).call(this,e.defaultPropertiesToUpdate)}}getId(){return u(this,cg).id}get currentLayer(){return u(this,Me).get(u(this,Kl))}getLayer(t){return u(this,Me).get(t)}get currentPageIndex(){return u(this,Kl)}addLayer(t){u(this,Me).set(t.pageIndex,t),u(this,Ls)?t.enable():t.disable()}removeLayer(t){u(this,Me).delete(t.pageIndex)}async updateMode(t,e=null,n=!1,i=!1,s=!1){var a,o,l;if(u(this,ke)!==t&&!(u(this,ar)&&(await u(this,ar).promise,!u(this,ar)))){if(S(this,ar,Promise.withResolvers()),(a=u(this,_s))==null||a.commitOrRemove(),S(this,ke,t),t===Et.NONE){this.setEditingState(!1),I(this,lt,pS).call(this),(o=this._editorUndoBar)==null||o.hide(),u(this,ar).resolve();return}t===Et.SIGNATURE&&await((l=u(this,Ms))==null?void 0:l.loadSignatures()),this.setEditingState(!0),await I(this,lt,fS).call(this),this.unselectAll();for(const c of u(this,Me).values())c.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),u(this,ar).resolve();return}for(const c of u(this,Se).values())c.annotationElementId===e||c.id===e?(this.setSelected(c),s?c.editComment():i&&c.enterInEditMode()):c.unselect();u(this,ar).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==u(this,ke)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(u(this,xr)){switch(t){case Pt.CREATE:this.currentLayer.addNewEditor(e);return;case Pt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,Ph)||S(this,Ph,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of u(this,jt))n.updateParams(t,e);else for(const n of u(this,xr))n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var s;for(const a of u(this,Se).values())a.editorType===t&&a.show(e);(((s=u(this,Ph))==null?void 0:s.get(Pt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&I(this,lt,Ei).call(this,[[Pt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(u(this,Ih)!==t){S(this,Ih,t);for(const e of u(this,Me).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of u(this,Se).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return u(this,Se).get(t)}addEditor(t){u(this,Se).set(t.id,t)}removeEditor(t){var e,n;t.div.contains(document.activeElement)&&(u(this,Zr)&&clearTimeout(u(this,Zr)),S(this,Zr,setTimeout(()=>{this.focusMainContainer(),S(this,Zr,null)},0))),u(this,Se).delete(t.id),t.annotationElementId&&((e=u(this,Ds))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!u(this,Ya).has(t.annotationElementId))&&((n=u(this,_i))==null||n.remove(t.id))}addDeletedAnnotationElement(t){u(this,Ya).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return u(this,Ya).has(t)}removeDeletedAnnotationElement(t){u(this,Ya).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){u(this,Pn)!==t&&(S(this,Pn,t),t&&I(this,lt,Ei).call(this,t.propertiesToUpdate))}updateUI(t){u(this,lt,gS)===t&&I(this,lt,Ei).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){I(this,lt,Ei).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(u(this,jt).has(t)){u(this,jt).delete(t),t.unselect(),I(this,lt,an).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,jt).add(t),t.select(),I(this,lt,Ei).call(this,t.propertiesToUpdate),I(this,lt,an).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.id}),(e=u(this,_s))==null||e.commitOrRemove();for(const n of u(this,jt))n!==t&&n.unselect();u(this,jt).clear(),u(this,jt).add(t),t.select(),I(this,lt,Ei).call(this,t.propertiesToUpdate),I(this,lt,an).call(this,{hasSelectedEditor:!0})}isSelected(t){return u(this,jt).has(t)}get firstSelectedEditor(){return u(this,jt).values().next().value}unselect(t){t.unselect(),u(this,jt).delete(t),I(this,lt,an).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,jt).size!==0}get isEnterHandled(){return u(this,jt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;u(this,sr).undo(),I(this,lt,an).call(this,{hasSomethingToUndo:u(this,sr).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:I(this,lt,Rc).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){u(this,sr).redo(),I(this,lt,an).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,sr).hasSomethingToRedo(),isEmpty:I(this,lt,Rc).call(this)})}addCommands(t){u(this,sr).add(t),I(this,lt,an).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:I(this,lt,Rc).call(this)})}cleanUndoStack(t){u(this,sr).cleanType(t)}delete(){var s;this.commitOrRemove();const t=(s=this.currentLayer)==null?void 0:s.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...u(this,jt)],n=()=>{var a;(a=this._editorUndoBar)==null||a.show(i,e.length===1?e[0].editorType:e.length);for(const o of e)o.remove()},i=()=>{for(const a of e)I(this,lt,Nv).call(this,a)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){var t;(t=u(this,Pn))==null||t.commitOrRemove()}hasSomethingToControl(){return u(this,Pn)||this.hasSelection}selectAll(){for(const t of u(this,jt))t.commit();I(this,lt,Dv).call(this,u(this,Se).values())}unselectAll(){var t;if(!(u(this,Pn)&&(u(this,Pn).commitOrRemove(),u(this,ke)!==Et.NONE))&&!((t=u(this,_s))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of u(this,jt))e.unselect();u(this,jt).clear(),I(this,lt,an).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;u(this,zs)[0]+=t,u(this,zs)[1]+=e;const[i,s]=u(this,zs),a=[...u(this,jt)],o=1e3;u(this,Jr)&&clearTimeout(u(this,Jr)),S(this,Jr,setTimeout(()=>{S(this,Jr,null),u(this,zs)[0]=u(this,zs)[1]=0,this.addCommands({cmd:()=>{for(const l of a)u(this,Se).has(l.id)&&(l.translateInPage(i,s),l.translationDone())},undo:()=>{for(const l of a)u(this,Se).has(l.id)&&(l.translateInPage(-i,-s),l.translationDone())},mustExec:!1})},o));for(const l of a)l.translateInPage(t,e),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),S(this,Kr,new Map);for(const t of u(this,jt))u(this,Kr).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,Kr))return!1;this.disableUserSelect(!1);const t=u(this,Kr);S(this,Kr,null);let e=!1;for(const[{x:i,y:s,pageIndex:a},o]of t)o.newX=i,o.newY=s,o.newPageIndex=a,e||(e=i!==o.savedX||s!==o.savedY||a!==o.savedPageIndex);if(!e)return!1;const n=(i,s,a,o)=>{if(u(this,Se).has(i.id)){const l=u(this,Me).get(o);l?i._setParentAndPosition(l,s,a):(i.pageIndex=o,i.x=s,i.y=a)}};return this.addCommands({cmd:()=>{for(const[i,{newX:s,newY:a,newPageIndex:o}]of t)n(i,s,a,o)},undo:()=>{for(const[i,{savedX:s,savedY:a,savedPageIndex:o}]of t)n(i,s,a,o)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(u(this,Kr))for(const n of u(this,Kr).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||u(this,jt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return u(this,Pn)===t}getActive(){return u(this,Pn)}getMode(){return u(this,ke)}get imageManager(){return kt(this,"imageManager",new Rv)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let c=0,h=e.rangeCount;c<h;c++)if(!t.contains(e.getRangeAt(c).commonAncestorContainer))return null;const{x:n,y:i,width:s,height:a}=t.getBoundingClientRect();let o;switch(t.getAttribute("data-main-rotation")){case"90":o=(c,h,d,f)=>({x:(h-i)/a,y:1-(c+d-n)/s,width:f/a,height:d/s});break;case"180":o=(c,h,d,f)=>({x:1-(c+d-n)/s,y:1-(h+f-i)/a,width:d/s,height:f/a});break;case"270":o=(c,h,d,f)=>({x:1-(h+f-i)/a,y:(c-n)/s,width:f/a,height:d/s});break;default:o=(c,h,d,f)=>({x:(c-n)/s,y:(h-i)/a,width:d/s,height:f/a});break}const l=[];for(let c=0,h=e.rangeCount;c<h;c++){const d=e.getRangeAt(c);if(!d.collapsed)for(const{x:f,y:p,width:v,height:g}of d.getClientRects())v===0||g===0||l.push(o(f,p,v,g))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:t,id:e}){(u(this,Yl)||S(this,Yl,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=u(this,Yl))==null||e.delete(t)}renderAnnotationElement(t){var i;const e=(i=u(this,Yl))==null?void 0:i.get(t.data.id);if(!e)return;const n=u(this,_i).getRawValue(e);n&&(u(this,ke)===Et.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){var s;const i=(s=u(this,Ds))==null?void 0:s.get(t);i&&(i.setCanvas(e,n),u(this,Ds).delete(t))}addMissingCanvas(t,e){(u(this,Ds)||S(this,Ds,new Map)).set(t,e)}};Gl=new WeakMap,Pn=new WeakMap,Se=new WeakMap,Me=new WeakMap,Xl=new WeakMap,_i=new WeakMap,Yl=new WeakMap,sr=new WeakMap,Xa=new WeakMap,Is=new WeakMap,_s=new WeakMap,Kl=new WeakMap,Ya=new WeakMap,Kr=new WeakMap,xr=new WeakMap,Ka=new WeakMap,Th=new WeakMap,kh=new WeakMap,Zl=new WeakMap,Rh=new WeakMap,Zr=new WeakMap,Ps=new WeakMap,Ql=new WeakMap,Os=new WeakMap,Qr=new WeakMap,cg=new WeakMap,Ls=new WeakMap,Ih=new WeakMap,Ns=new WeakMap,Za=new WeakMap,Jl=new WeakMap,Ds=new WeakMap,_h=new WeakMap,ke=new WeakMap,jt=new WeakMap,Pi=new WeakMap,Ms=new WeakMap,Fs=new WeakMap,Ph=new WeakMap,Oh=new WeakMap,zs=new WeakMap,Jr=new WeakMap,Oi=new WeakMap,Lh=new WeakMap,Nh=new WeakMap,ar=new WeakMap,lt=new WeakSet,Qf=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},_v=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of u(this,Me).values())if(n.hasTextLayer(t))return n;return null},aS=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=I(this,lt,Qf).call(this,t).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(u(this,Qr)||S(this,Qr,new tT(this)),u(this,Qr).show(n,i,this.direction==="ltr"))},oS=function(){var s,a,o;const t=document.getSelection();if(!t||t.isCollapsed){u(this,Pi)&&((s=u(this,Qr))==null||s.hide(),S(this,Pi,null),I(this,lt,an).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===u(this,Pi))return;const i=I(this,lt,Qf).call(this,t).closest(".textLayer");if(!i){u(this,Pi)&&((a=u(this,Qr))==null||a.hide(),S(this,Pi,null),I(this,lt,an).call(this,{hasSelectedText:!1}));return}if((o=u(this,Qr))==null||o.hide(),S(this,Pi,e),I(this,lt,an).call(this,{hasSelectedText:!0}),!(u(this,ke)!==Et.HIGHLIGHT&&u(this,ke)!==Et.NONE)&&(u(this,ke)===Et.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),S(this,Os,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=u(this,ke)===Et.HIGHLIGHT?I(this,lt,_v).call(this,i):null;l==null||l.toggleDrawing();const c=new AbortController,h=this.combinedSignal(c),d=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),l==null||l.toggleDrawing(!0),f.type==="pointerup"&&I(this,lt,Jf).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}},Jf=function(t=""){u(this,ke)===Et.HIGHLIGHT?this.highlightSelection(t):u(this,Th)&&I(this,lt,aS).call(this)},lS=function(){document.addEventListener("selectionchange",I(this,lt,oS).bind(this),{signal:this._signal})},uS=function(){if(u(this,Ps))return;S(this,Ps,new AbortController);const t=this.combinedSignal(u(this,Ps));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},cS=function(){var t;(t=u(this,Ps))==null||t.abort(),S(this,Ps,null)},Pv=function(){if(u(this,Ns))return;S(this,Ns,new AbortController);const t=this.combinedSignal(u(this,Ns));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},hS=function(){var t;(t=u(this,Ns))==null||t.abort(),S(this,Ns,null)},Ov=function(){if(u(this,Is))return;S(this,Is,new AbortController);const t=this.combinedSignal(u(this,Is));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},Lv=function(){var t;(t=u(this,Is))==null||t.abort(),S(this,Is,null)},dS=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},an=function(t){Object.entries(t).some(([n,i])=>u(this,Oh)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,Oh),t)}),u(this,ke)===Et.HIGHLIGHT&&t.hasSelectedEditor===!1&&I(this,lt,Ei).call(this,[[Pt.HIGHLIGHT_FREE,!0]]))},Ei=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},fS=async function(){if(!u(this,Ls)){S(this,Ls,!0);const t=[];for(const e of u(this,Me).values())t.push(e.enable());await Promise.all(t);for(const e of u(this,Se).values())e.enable()}},pS=function(){if(this.unselectAll(),u(this,Ls)){S(this,Ls,!1);for(const t of u(this,Me).values())t.disable();for(const t of u(this,Se).values())t.disable()}},Nv=function(t){const e=u(this,Me).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},gS=function(){let t=null;for(t of u(this,jt));return t},Rc=function(){if(u(this,Se).size===0)return!0;if(u(this,Se).size===1)for(const t of u(this,Se).values())return t.isEmpty();return!1},Dv=function(t){for(const e of u(this,jt))e.unselect();u(this,jt).clear();for(const e of t)e.isEmpty()||(u(this,jt).add(e),e.select());I(this,lt,an).call(this,{hasSelectedEditor:this.hasSelection})},it(Ll,"TRANSLATE_SMALL",1),it(Ll,"TRANSLATE_BIG",10);let sl=Ll;var Re,qr,Cr,ql,ti,On,tu,ei,bn,Li,Qa,ni,Bs,zr,Ic,qf;const on=class on{constructor(t){k(this,zr);k(this,Re,null);k(this,qr,!1);k(this,Cr,null);k(this,ql,null);k(this,ti,null);k(this,On,null);k(this,tu,!1);k(this,ei,null);k(this,bn,null);k(this,Li,null);k(this,Qa,null);k(this,ni,!1);S(this,bn,t),S(this,ni,t._uiManager.useNewAltTextFlow),u(on,Bs)||S(on,Bs,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){on._l10n??(on._l10n=t)}async render(){const t=S(this,Cr,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=S(this,ql,document.createElement("span"));t.append(e),u(this,ni)?(t.classList.add("new"),t.setAttribute("data-l10n-id",u(on,Bs).missing),e.setAttribute("data-l10n-id",u(on,Bs)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=u(this,bn)._uiManager._signal;t.addEventListener("contextmenu",Ar,{signal:n}),t.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:n});const i=s=>{s.preventDefault(),u(this,bn)._uiManager.editAltText(u(this,bn)),u(this,ni)&&u(this,bn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,zr,Ic)}})};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",s=>{s.target===t&&s.key==="Enter"&&(S(this,tu,!0),i(s))},{signal:n}),await I(this,zr,qf).call(this),t}finish(){u(this,Cr)&&(u(this,Cr).focus({focusVisible:u(this,tu)}),S(this,tu,!1))}isEmpty(){return u(this,ni)?u(this,Re)===null:!u(this,Re)&&!u(this,qr)}hasData(){return u(this,ni)?u(this,Re)!==null||!!u(this,Li):this.isEmpty()}get guessedText(){return u(this,Li)}async setGuessedText(t){u(this,Re)===null&&(S(this,Li,t),S(this,Qa,await on._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),I(this,zr,qf).call(this))}toggleAltTextBadge(t=!1){var e;if(!u(this,ni)||u(this,Re)){(e=u(this,ei))==null||e.remove(),S(this,ei,null);return}if(!u(this,ei)){const n=S(this,ei,document.createElement("div"));n.className="noAltTextBadge",u(this,bn).div.append(n)}u(this,ei).classList.toggle("hidden",!t)}serialize(t){let e=u(this,Re);return!t&&u(this,Li)===e&&(e=u(this,Qa)),{altText:e,decorative:u(this,qr),guessedText:u(this,Li),textWithDisclaimer:u(this,Qa)}}get data(){return{altText:u(this,Re),decorative:u(this,qr)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:i,cancel:s=!1}){n&&(S(this,Li,n),S(this,Qa,i)),!(u(this,Re)===t&&u(this,qr)===e)&&(s||(S(this,Re,t),S(this,qr,e)),I(this,zr,qf).call(this))}toggle(t=!1){u(this,Cr)&&(!t&&u(this,On)&&(clearTimeout(u(this,On)),S(this,On,null)),u(this,Cr).disabled=!t)}shown(){u(this,bn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,zr,Ic)}})}destroy(){var t,e;(t=u(this,Cr))==null||t.remove(),S(this,Cr,null),S(this,ql,null),S(this,ti,null),(e=u(this,ei))==null||e.remove(),S(this,ei,null)}};Re=new WeakMap,qr=new WeakMap,Cr=new WeakMap,ql=new WeakMap,ti=new WeakMap,On=new WeakMap,tu=new WeakMap,ei=new WeakMap,bn=new WeakMap,Li=new WeakMap,Qa=new WeakMap,ni=new WeakMap,Bs=new WeakMap,zr=new WeakSet,Ic=function(){return u(this,Re)&&"added"||u(this,Re)===null&&this.guessedText&&"review"||"missing"},qf=async function(){var i,s,a;const t=u(this,Cr);if(!t)return;if(u(this,ni)){if(t.classList.toggle("done",!!u(this,Re)),t.setAttribute("data-l10n-id",u(on,Bs)[u(this,zr,Ic)]),(i=u(this,ql))==null||i.setAttribute("data-l10n-id",u(on,Bs)[`${u(this,zr,Ic)}-label`]),!u(this,Re)){(s=u(this,ti))==null||s.remove();return}}else{if(!u(this,Re)&&!u(this,qr)){t.classList.remove("done"),(a=u(this,ti))==null||a.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=u(this,ti);if(!e){S(this,ti,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${u(this,bn).id}`;const o=100,l=u(this,bn)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(u(this,On)),S(this,On,null)},{once:!0}),t.addEventListener("mouseenter",()=>{S(this,On,setTimeout(()=>{S(this,On,null),u(this,ti).classList.add("show"),u(this,bn)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:l}),t.addEventListener("mouseleave",()=>{var c;u(this,On)&&(clearTimeout(u(this,On)),S(this,On,null)),(c=u(this,ti))==null||c.classList.remove("show")},{signal:l})}u(this,qr)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=u(this,Re)),e.parentNode||t.append(e);const n=u(this,bn).getElementForAltText();n==null||n.setAttribute("aria-describedby",e.id)},k(on,Bs,null),it(on,"_l10n",null);let Jp=on;var ri,Ja,Tr,Dh,Ni,eu,js;class If{constructor(t){k(this,ri,null);k(this,Ja,!1);k(this,Tr,null);k(this,Dh,null);k(this,Ni,null);k(this,eu,null);k(this,js,!1);S(this,Tr,t),this.toolbar=null}render(){if(!u(this,Tr)._uiManager.hasCommentManager())return null;const t=S(this,ri,document.createElement("button"));t.className="comment",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const e=u(this,Tr)._uiManager._signal;t.addEventListener("contextmenu",Ar,{signal:e}),t.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:e});const n=i=>{i.preventDefault(),this.edit()};return t.addEventListener("click",n,{capture:!0,signal:e}),t.addEventListener("keydown",i=>{i.target===t&&i.key==="Enter"&&(S(this,Ja,!0),n(i))},{signal:e}),t}edit(){const{bottom:t,left:e,right:n}=u(this,Tr).getClientDimensions(),i={top:t};u(this,Tr)._uiManager.direction==="ltr"?i.right=n:i.left=e,u(this,Tr)._uiManager.editComment(u(this,Tr),i)}finish(){u(this,ri)&&(u(this,ri).focus({focusVisible:u(this,Ja)}),S(this,Ja,!1))}isDeleted(){return u(this,js)||u(this,Ni)===""}hasBeenEdited(){return this.isDeleted()||u(this,Ni)!==u(this,Dh)}serialize(){return this.data}get data(){return{text:u(this,Ni),date:u(this,eu),deleted:u(this,js)}}set data(t){if(t===null){S(this,Ni,""),S(this,js,!0);return}S(this,Ni,t),S(this,eu,new Date),S(this,js,!1)}setInitialText(t){S(this,Dh,t),this.data=t}toggle(t=!1){u(this,ri)&&(u(this,ri).disabled=!t)}shown(){}destroy(){var t;(t=u(this,ri))==null||t.remove(),S(this,ri,null),S(this,Ni,""),S(this,eu,null),S(this,Tr,null),S(this,Ja,!1),S(this,js,!1)}}ri=new WeakMap,Ja=new WeakMap,Tr=new WeakMap,Dh=new WeakMap,Ni=new WeakMap,eu=new WeakMap,js=new WeakMap;var nu,qa,Mh,Fh,zh,Bh,jh,Di,to,Mi,eo,Fi,Ia,mS,vS,yS;const G0=class G0{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:s=null,onPinchEnd:a=null,signal:o}){k(this,Ia);k(this,nu);k(this,qa,!1);k(this,Mh,null);k(this,Fh);k(this,zh);k(this,Bh);k(this,jh);k(this,Di,null);k(this,to);k(this,Mi,null);k(this,eo);k(this,Fi,null);S(this,nu,t),S(this,Mh,n),S(this,Fh,e),S(this,zh,i),S(this,Bh,s),S(this,jh,a),S(this,eo,new AbortController),S(this,to,AbortSignal.any([o,u(this,eo).signal])),t.addEventListener("touchstart",I(this,Ia,mS).bind(this),{passive:!1,signal:u(this,to)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/wi.pixelRatio}destroy(){var t,e;(t=u(this,eo))==null||t.abort(),S(this,eo,null),(e=u(this,Di))==null||e.abort(),S(this,Di,null)}};nu=new WeakMap,qa=new WeakMap,Mh=new WeakMap,Fh=new WeakMap,zh=new WeakMap,Bh=new WeakMap,jh=new WeakMap,Di=new WeakMap,to=new WeakMap,Mi=new WeakMap,eo=new WeakMap,Fi=new WeakMap,Ia=new WeakSet,mS=function(t){var i,s,a;if((i=u(this,Fh))!=null&&i.call(this))return;if(t.touches.length===1){if(u(this,Di))return;const o=S(this,Di,new AbortController),l=AbortSignal.any([u(this,to),o.signal]),c=u(this,nu),h={capture:!0,signal:l,passive:!1},d=f=>{var p;f.pointerType==="touch"&&((p=u(this,Di))==null||p.abort(),S(this,Di,null))};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(me(f),d(f))},h),c.addEventListener("pointerup",d,h),c.addEventListener("pointercancel",d,h);return}if(!u(this,Fi)){S(this,Fi,new AbortController);const o=AbortSignal.any([u(this,to),u(this,Fi).signal]),l=u(this,nu),c={signal:o,capture:!1,passive:!1};l.addEventListener("touchmove",I(this,Ia,vS).bind(this),c);const h=I(this,Ia,yS).bind(this);l.addEventListener("touchend",h,c),l.addEventListener("touchcancel",h,c),c.capture=!0,l.addEventListener("pointerdown",me,c),l.addEventListener("pointermove",me,c),l.addEventListener("pointercancel",me,c),l.addEventListener("pointerup",me,c),(s=u(this,zh))==null||s.call(this)}if(me(t),t.touches.length!==2||(a=u(this,Mh))!=null&&a.call(this)){S(this,Mi,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),S(this,Mi,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},vS=function(t){var b;if(!u(this,Mi)||t.touches.length!==2)return;me(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:i,screenY:s}=e,{screenX:a,screenY:o}=n,l=u(this,Mi),{touch0X:c,touch0Y:h,touch1X:d,touch1Y:f}=l,p=d-c,v=f-h,g=a-i,A=o-s,m=Math.hypot(g,A)||1,y=Math.hypot(p,v)||1;if(!u(this,qa)&&Math.abs(y-m)<=G0.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=s,l.touch1X=a,l.touch1Y=o,!u(this,qa)){S(this,qa,!0);return}const w=[(i+a)/2,(s+o)/2];(b=u(this,Bh))==null||b.call(this,w,y,m)},yS=function(t){var e;t.touches.length>=2||(u(this,Fi)&&(u(this,Fi).abort(),S(this,Fi,null),(e=u(this,jh))==null||e.call(this)),u(this,Mi)&&(me(t),S(this,Mi,null),S(this,qa,!1)))};let qp=G0;var no,kr,Jt,Fe,ru,Us,Uh,ro,ze,io,zi,Hs,Hh,so,Ln,$h,ao,Bi,ii,iu,su,or,oo,Wh,hg,wt,Mv,Vh,Fv,tp,wS,AS,zv,ep,Bv,bS,SS,ES,jv,xS,Uv,CS,TS,kS,Hv,_c;const Ct=class Ct{constructor(t){k(this,wt);k(this,no,null);k(this,kr,null);k(this,Jt,null);k(this,Fe,null);k(this,ru,!1);k(this,Us,null);k(this,Uh,"");k(this,ro,!1);k(this,ze,null);k(this,io,null);k(this,zi,null);k(this,Hs,null);k(this,Hh,"");k(this,so,!1);k(this,Ln,null);k(this,$h,!1);k(this,ao,!1);k(this,Bi,!1);k(this,ii,null);k(this,iu,0);k(this,su,0);k(this,or,null);k(this,oo,null);it(this,"isSelected",!1);it(this,"_isCopy",!1);it(this,"_editToolbar",null);it(this,"_initialOptions",Object.create(null));it(this,"_initialData",null);it(this,"_isVisible",!0);it(this,"_uiManager",null);it(this,"_focusEventsAllowed",!0);k(this,Wh,!1);k(this,hg,Ct._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:i,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[s,a];const[o,l]=this.parentDimensions;this.x=t.x/o,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Ct.prototype._resizeWithKeyboard,e=sl.TRANSLATE_SMALL,n=sl.TRANSLATE_BIG;return kt(this,"_resizerKeyboardManager",new rf([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Ct.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return kt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new rT({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Ct._l10n??(Ct._l10n=t),Ct._l10nResizer||(Ct._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ct._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Ct._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Wt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,Wh)}set _isDraggable(t){var e;S(this,Wh,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,hg)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):I(this,wt,_c).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(u(this,so)?S(this,so,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,i){const[s,a]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(t+n)/s,this.y=(e+i)/a,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,i]=this.parentDimensions;this.setAt(t*n,e*i,this.width*n,this.height*i),this._onTranslated()}translate(t,e){I(this,wt,Mv).call(this,this.parentDimensions,t,e)}translateInPage(t,e){u(this,Ln)||S(this,Ln,[this.x,this.y,this.width,this.height]),I(this,wt,Mv).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){u(this,Ln)||S(this,Ln,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,s]}=this;if(this.x+=t/i,this.y+=e/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[l,c]=this.getBaseTranslation();a+=l,o+=c;const{style:h}=n;h.left=`${(100*a).toFixed(2)}%`,h.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!u(this,Ln)&&(u(this,Ln)[0]!==this.x||u(this,Ln)[1]!==this.y)}get _hasBeenResized(){return!!u(this,Ln)&&(u(this,Ln)[2]!==this.width||u(this,Ln)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Ct,i=n/t,s=n/e;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,i]}=this;let{x:s,y:a,width:o,height:l}=this;if(o*=n,l*=i,s*=n,a*=i,this._mustFixPosition)switch(t){case 0:s=dn(s,0,n-o),a=dn(a,0,i-l);break;case 90:s=dn(s,0,n-l),a=dn(a,o,i);break;case 180:s=dn(s,o,n),a=dn(a,l,i);break;case 270:s=dn(s,l,n),a=dn(a,0,i-o);break}this.x=s/=n,this.y=a/=i;const[c,h]=this.getBaseTranslation();s+=c,a+=h,e.left=`${(100*s).toFixed(2)}%`,e.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return I(n=Ct,Vh,Fv).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return I(n=Ct,Vh,Fv).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,i]=this.parentDimensions,{style:s}=this.div;s.width=`${(100*t/n).toFixed(2)}%`,u(this,ro)||(s.height=`${(100*e/i).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,i=n.endsWith("%"),s=!u(this,ro)&&e.endsWith("%");if(i&&s)return;const[a,o]=this.parentDimensions;i||(t.width=`${(100*parseFloat(n)/a).toFixed(2)}%`),!u(this,ro)&&!s&&(t.height=`${(100*parseFloat(e)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=u(this,Jt))==null||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||u(this,ao))return this._editToolbar;this._editToolbar=new kv(this),this.div.append(this._editToolbar.render()),this._editToolbar.addButton("comment",this.addCommentButton());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=u(this,Jt))==null||t.destroy())}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return u(this,Jt)||(Jp.initialize(Ct._l10n),S(this,Jt,new Jp(this)),u(this,no)&&(u(this,Jt).data=u(this,no),S(this,no,null))),u(this,Jt)}get altTextData(){var t;return(t=u(this,Jt))==null?void 0:t.data}set altTextData(t){u(this,Jt)&&(u(this,Jt).data=t)}get guessedAltText(){var t;return(t=u(this,Jt))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=u(this,Jt))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=u(this,Jt))==null?void 0:e.serialize(t)}hasAltText(){return!!u(this,Jt)&&!u(this,Jt).isEmpty()}hasAltTextData(){var t;return((t=u(this,Jt))==null?void 0:t.hasData())??!1}addCommentButton(){return u(this,Fe)?u(this,Fe):S(this,Fe,new If(this))}get commentColor(){return null}get comment(){const t=u(this,Fe);return{text:t.data.text,date:t.data.date,deleted:t.isDeleted(),color:this.commentColor}}set comment(t){u(this,Fe)||S(this,Fe,new If(this)),u(this,Fe).data=t}setCommentData(t){u(this,Fe)||S(this,Fe,new If(this)),u(this,Fe).setInitialText(t)}get hasEditedComment(){var t;return(t=u(this,Fe))==null?void 0:t.hasBeenEdited()}async editComment(){u(this,Fe)||S(this,Fe,new If(this)),u(this,Fe).edit()}addComment(t){this.hasEditedComment&&(t.popup={contents:this.comment.text,deleted:this.comment.deleted})}render(){var a;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=u(this,ru)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),I(this,wt,Uv).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),iS(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(u(this,oo)||S(this,oo,new qp({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:I(this,wt,bS).bind(this),onPinching:I(this,wt,SS).bind(this),onPinchEnd:I(this,wt,ES).bind(this),signal:this._uiManager._signal}))),(a=this._uiManager._editorUndoBar)==null||a.hide(),t}pointerdown(t){const{isMac:e}=Xe.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(S(this,so,!0),this._isDraggable){I(this,wt,xS).call(this,t);return}I(this,wt,jv).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){u(this,ii)&&clearTimeout(u(this,ii)),S(this,ii,setTimeout(()=>{var t;S(this,ii,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const i=this.parentScale,[s,a]=this.pageDimensions,[o,l]=this.pageTranslation,c=t/i,h=e/i,d=this.x*s,f=this.y*a,p=this.width*s,v=this.height*a;switch(n){case 0:return[d+c+o,a-f-h-v+l,d+c+p+o,a-f-h+l];case 90:return[d+h+o,a-f+c+l,d+h+v+o,a-f+c+p+l];case 180:return[d-c-p+o,a-f+h+l,d-c+o,a-f+h+v+l];case 270:return[d-h-v+o,a-f-c-p+l,d-h+o,a-f-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,i,s,a]=t,o=s-n,l=a-i;switch(this.rotation){case 0:return[n,e-a,o,l];case 90:return[n,e-i,l,o];case 180:return[s,e-i,o,l];case 270:return[s,e-a,l,o];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),S(this,ao,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),S(this,ao,!1),!0):!1}isInEditMode(){return u(this,ao)}shouldGetKeyboardEvents(){return u(this,Bi)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:s,innerWidth:a}=window;return e<a&&i>0&&t<s&&n>0}rebuild(){I(this,wt,Uv).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){Wt("An editor must be serializable")}static async deserialize(t,e,n){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId});i.rotation=t.rotation,S(i,no,t.accessibilityData),i._isCopy=t.isCopy||!1;const[s,a]=i.pageDimensions,[o,l,c,h]=i.getRectInCurrentCoords(t.rect,a);return i.x=o/s,i.y=l/a,i.width=c/s,i.height=h/a,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=u(this,Hs))==null||t.abort(),S(this,Hs,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),u(this,ii)&&(clearTimeout(u(this,ii)),S(this,ii,null)),I(this,wt,_c).call(this),this.removeEditToolbar(),u(this,or)){for(const n of u(this,or).values())clearTimeout(n);S(this,or,null)}this.parent=null,(e=u(this,oo))==null||e.destroy(),S(this,oo,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(I(this,wt,wS).call(this),u(this,ze).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),S(this,zi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=u(this,ze).children;if(!u(this,kr)){S(this,kr,Array.from(e));const a=I(this,wt,CS).bind(this),o=I(this,wt,TS).bind(this),l=this._uiManager._signal;for(const c of u(this,kr)){const h=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",a,{signal:l}),c.addEventListener("blur",o,{signal:l}),c.addEventListener("focus",I(this,wt,kS).bind(this,h),{signal:l}),c.setAttribute("data-l10n-id",Ct._l10nResizer[h])}}const n=u(this,kr)[0];let i=0;for(const a of e){if(a===n)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(u(this,kr).length/4);if(s!==i){if(s<i)for(let o=0;o<i-s;o++)u(this,ze).append(u(this,ze).firstChild);else if(s>i)for(let o=0;o<s-i;o++)u(this,ze).firstChild.before(u(this,ze).lastChild);let a=0;for(const o of e){const c=u(this,kr)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",Ct._l10nResizer[c])}}I(this,wt,Hv).call(this,0),S(this,Bi,!0),u(this,ze).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){u(this,Bi)&&I(this,wt,Bv).call(this,u(this,Hh),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){I(this,wt,_c).call(this),this.div.focus()}select(){var t,e,n;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,s;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(e=this._editToolbar)==null||e.show(),(n=u(this,Jt))==null||n.toggleAltTextBadge(!1)}}unselect(){var t,e,n,i,s;this.isSelected&&(this.isSelected=!1,(t=u(this,ze))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(s=u(this,Jt))==null||s.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return u(this,$h)}set isEditing(t){S(this,$h,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){S(this,ro,!0);const n=t/e,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){u(this,or)||S(this,or,new Map);const{action:n}=t;let i=u(this,or).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),u(this,or).delete(n),u(this,or).size===0&&S(this,or,null)},Ct._telemetryTimeout),u(this,or).set(n,i);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),S(this,ru,!1)}disable(){this.div&&(this.div.tabIndex=-1),S(this,ru,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};no=new WeakMap,kr=new WeakMap,Jt=new WeakMap,Fe=new WeakMap,ru=new WeakMap,Us=new WeakMap,Uh=new WeakMap,ro=new WeakMap,ze=new WeakMap,io=new WeakMap,zi=new WeakMap,Hs=new WeakMap,Hh=new WeakMap,so=new WeakMap,Ln=new WeakMap,$h=new WeakMap,ao=new WeakMap,Bi=new WeakMap,ii=new WeakMap,iu=new WeakMap,su=new WeakMap,or=new WeakMap,oo=new WeakMap,Wh=new WeakMap,hg=new WeakMap,wt=new WeakSet,Mv=function([t,e],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Vh=new WeakSet,Fv=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},tp=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},wS=function(){if(u(this,ze))return;S(this,ze,document.createElement("div")),u(this,ze).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const i=document.createElement("div");u(this,ze).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",I(this,wt,AS).bind(this,n),{signal:e}),i.addEventListener("contextmenu",Ar,{signal:e}),i.tabIndex=-1}this.div.prepend(u(this,ze))},AS=function(t,e){var h;e.preventDefault();const{isMac:n}=Xe.platform;if(e.button!==0||e.ctrlKey&&n)return;(h=u(this,Jt))==null||h.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,S(this,io,[e.screenX,e.screenY]);const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",I(this,wt,Bv).bind(this,t),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",me,{passive:!1,signal:a}),window.addEventListener("contextmenu",Ar,{signal:a}),S(this,zi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const c=()=>{var d;s.abort(),this.parent.togglePointerEvents(!0),(d=u(this,Jt))==null||d.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=o,this.div.style.cursor=l,I(this,wt,ep).call(this)};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})},zv=function(t,e,n,i){this.width=n,this.height=i,this.x=t,this.y=e;const[s,a]=this.parentDimensions;this.setDims(s*n,a*i),this.fixAndSetPosition(),this._onResized()},ep=function(){if(!u(this,zi))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:i}=u(this,zi);S(this,zi,null);const s=this.x,a=this.y,o=this.width,l=this.height;s===t&&a===e&&o===n&&l===i||this.addCommands({cmd:I(this,wt,zv).bind(this,s,a,o,l),undo:I(this,wt,zv).bind(this,t,e,n,i),mustExec:!0})},Bv=function(t,e){const[n,i]=this.parentDimensions,s=this.x,a=this.y,o=this.width,l=this.height,c=Ct.MIN_SIZE/n,h=Ct.MIN_SIZE/i,d=I(this,wt,tp).call(this,this.rotation),f=(X,F)=>[d[0]*X+d[2]*F,d[1]*X+d[3]*F],p=I(this,wt,tp).call(this,360-this.rotation),v=(X,F)=>[p[0]*X+p[2]*F,p[1]*X+p[3]*F];let g,A,m=!1,y=!1;switch(t){case"topLeft":m=!0,g=(X,F)=>[0,0],A=(X,F)=>[X,F];break;case"topMiddle":g=(X,F)=>[X/2,0],A=(X,F)=>[X/2,F];break;case"topRight":m=!0,g=(X,F)=>[X,0],A=(X,F)=>[0,F];break;case"middleRight":y=!0,g=(X,F)=>[X,F/2],A=(X,F)=>[0,F/2];break;case"bottomRight":m=!0,g=(X,F)=>[X,F],A=(X,F)=>[0,0];break;case"bottomMiddle":g=(X,F)=>[X/2,F],A=(X,F)=>[X/2,0];break;case"bottomLeft":m=!0,g=(X,F)=>[0,F],A=(X,F)=>[X,0];break;case"middleLeft":y=!0,g=(X,F)=>[0,F/2],A=(X,F)=>[X,F/2];break}const w=g(o,l),b=A(o,l);let E=f(...b);const T=Ct._round(s+E[0]),R=Ct._round(a+E[1]);let P=1,_=1,N,B;if(e.fromKeyboard)({deltaX:N,deltaY:B}=e);else{const{screenX:X,screenY:F}=e,[W,H]=u(this,io);[N,B]=this.screenToPageTranslation(X-W,F-H),u(this,io)[0]=X,u(this,io)[1]=F}if([N,B]=v(N/n,B/i),m){const X=Math.hypot(o,l);P=_=Math.max(Math.min(Math.hypot(b[0]-w[0]-N,b[1]-w[1]-B)/X,1/o,1/l),c/o,h/l)}else y?P=dn(Math.abs(b[0]-w[0]-N),c,1)/o:_=dn(Math.abs(b[1]-w[1]-B),h,1)/l;const O=Ct._round(o*P),M=Ct._round(l*_);E=f(...A(O,M));const x=T-E[0],$=R-E[1];u(this,Ln)||S(this,Ln,[this.x,this.y,this.width,this.height]),this.width=O,this.height=M,this.x=x,this.y=$,this.setDims(n*O,i*M),this.fixAndSetPosition(),this._onResizing()},bS=function(){var t;S(this,zi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=u(this,Jt))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},SS=function(t,e,n){let s=.7*(n/e)+1-.7;if(s===1)return;const a=I(this,wt,tp).call(this,this.rotation),o=(T,R)=>[a[0]*T+a[2]*R,a[1]*T+a[3]*R],[l,c]=this.parentDimensions,h=this.x,d=this.y,f=this.width,p=this.height,v=Ct.MIN_SIZE/l,g=Ct.MIN_SIZE/c;s=Math.max(Math.min(s,1/f,1/p),v/f,g/p);const A=Ct._round(f*s),m=Ct._round(p*s);if(A===f&&m===p)return;u(this,Ln)||S(this,Ln,[h,d,f,p]);const y=o(f/2,p/2),w=Ct._round(h+y[0]),b=Ct._round(d+y[1]),E=o(A/2,m/2);this.x=w-E[0],this.y=b-E[1],this.width=A,this.height=m,this.setDims(l*A,c*m),this.fixAndSetPosition(),this._onResizing()},ES=function(){var t;(t=u(this,Jt))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),I(this,wt,ep).call(this)},jv=function(t){const{isMac:e}=Xe.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},xS=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,s=this._uiManager.combinedSignal(i),a={capture:!0,passive:!1,signal:s},o=c=>{i.abort(),S(this,Us,null),S(this,so,!1),this._uiManager.endDragSession()||I(this,wt,jv).call(this,c),n&&this._onStopDragging()};e&&(S(this,iu,t.clientX),S(this,su,t.clientY),S(this,Us,t.pointerId),S(this,Uh,t.pointerType),window.addEventListener("pointermove",c=>{n||(n=!0,this._onStartDragging());const{clientX:h,clientY:d,pointerId:f}=c;if(f!==u(this,Us)){me(c);return}const[p,v]=this.screenToPageTranslation(h-u(this,iu),d-u(this,su));S(this,iu,h),S(this,su,d),this._uiManager.dragSelectedEditors(p,v)},a),window.addEventListener("touchmove",me,a),window.addEventListener("pointerdown",c=>{c.pointerType===u(this,Uh)&&(u(this,oo)||c.isPrimary)&&o(c),me(c)},a));const l=c=>{if(!u(this,Us)||u(this,Us)===c.pointerId){o(c);return}me(c)};window.addEventListener("pointerup",l,{signal:s}),window.addEventListener("blur",l,{signal:s})},Uv=function(){if(u(this,Hs)||!this.div)return;S(this,Hs,new AbortController);const t=this._uiManager.combinedSignal(u(this,Hs));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},CS=function(t){Ct._resizerKeyboardManager.exec(this,t)},TS=function(t){var e;u(this,Bi)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==u(this,ze)&&I(this,wt,_c).call(this)},kS=function(t){S(this,Hh,u(this,Bi)?t:"")},Hv=function(t){if(u(this,kr))for(const e of u(this,kr))e.tabIndex=t},_c=function(){S(this,Bi,!1),I(this,wt,Hv).call(this,-1),I(this,wt,ep).call(this)},k(Ct,Vh),it(Ct,"_l10n",null),it(Ct,"_l10nResizer",null),it(Ct,"_borderLineWidth",-1),it(Ct,"_colorManager",new Iv),it(Ct,"_zIndex",1),it(Ct,"_telemetryTimeout",1e3);let Yt=Ct;class rT extends Yt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const dw=3285377520,rr=4294901760,Gr=65535;class RS{constructor(t){this.h1=t?t&4294967295:dw,this.h2=t?t&4294967295:dw}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let g=0,A=t.length;g<A;g++){const m=t.charCodeAt(g);m<=255?e[n++]=m:(e[n++]=m>>>8,e[n++]=m&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,s=n-i*4,a=new Uint32Array(e.buffer,0,i);let o=0,l=0,c=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&Gr,v=f&Gr;for(let g=0;g<i;g++)g&1?(o=a[g],o=o*d&rr|o*p&Gr,o=o<<15|o>>>17,o=o*f&rr|o*v&Gr,c^=o,c=c<<13|c>>>19,c=c*5+3864292196):(l=a[g],l=l*d&rr|l*p&Gr,l=l<<15|l>>>17,l=l*f&rr|l*v&Gr,h^=l,h=h<<13|h>>>19,h=h*5+3864292196);switch(o=0,s){case 3:o^=e[i*4+2]<<16;case 2:o^=e[i*4+1]<<8;case 1:o^=e[i*4],o=o*d&rr|o*p&Gr,o=o<<15|o>>>17,o=o*f&rr|o*v&Gr,i&1?c^=o:h^=o}this.h1=c,this.h2=h}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&rr|t*36045&Gr,e=e*4283543511&rr|((e<<16|t>>>16)*2950163797&rr)>>>16,t^=e>>>1,t=t*444984403&rr|t*60499&Gr,e=e*3301882366&rr|((e<<16|t>>>16)*3120437893&rr)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const $v=Object.freeze({map:null,hash:"",transfer:void 0});var lo,uo,Be,dg,IS;class z0{constructor(){k(this,dg);k(this,lo,!1);k(this,uo,null);k(this,Be,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=u(this,Be).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return u(this,Be).get(t)}remove(t){if(u(this,Be).delete(t),u(this,Be).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of u(this,Be).values())if(e instanceof Yt)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=u(this,Be).get(t);let i=!1;if(n!==void 0)for(const[s,a]of Object.entries(e))n[s]!==a&&(i=!0,n[s]=a);else i=!0,u(this,Be).set(t,e);i&&I(this,dg,IS).call(this),e instanceof Yt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return u(this,Be).has(t)}get size(){return u(this,Be).size}resetModified(){u(this,lo)&&(S(this,lo,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new _S(this)}get serializable(){if(u(this,Be).size===0)return $v;const t=new Map,e=new RS,n=[],i=Object.create(null);let s=!1;for(const[a,o]of u(this,Be)){const l=o instanceof Yt?o.serialize(!1,i):o;l&&(t.set(a,l),e.update(`${a}:${JSON.stringify(l)}`),s||(s=!!l.bitmap))}if(s)for(const a of t.values())a.bitmap&&n.push(a.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:$v}get editorStats(){let t=null;const e=new Map;for(const n of u(this,Be).values()){if(!(n instanceof Yt))continue;const i=n.telemetryFinalData;if(!i)continue;const{type:s}=i;e.has(s)||e.set(s,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const a=t[s]||(t[s]=new Map);for(const[o,l]of Object.entries(i)){if(o==="type")continue;let c=a.get(o);c||(c=new Map,a.set(o,c));const h=c.get(l)??0;c.set(l,h+1)}}for(const[n,i]of e)t[n]=i.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){S(this,uo,null)}get modifiedIds(){if(u(this,uo))return u(this,uo);const t=[];for(const e of u(this,Be).values())!(e instanceof Yt)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return S(this,uo,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return u(this,Be).entries()}}lo=new WeakMap,uo=new WeakMap,Be=new WeakMap,dg=new WeakSet,IS=function(){u(this,lo)||(S(this,lo,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Gh;class _S extends z0{constructor(e){super();k(this,Gh);const{map:n,hash:i,transfer:s}=e.serializable,a=structuredClone(n,s?{transfer:s}:null);S(this,Gh,{map:a,hash:i,transfer:s})}get print(){Wt("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,Gh)}get modifiedIds(){return kt(this,"modifiedIds",{ids:new Set,hash:""})}}Gh=new WeakMap;var au;class iT{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){k(this,au,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),u(this,au).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||u(this,au).has(t.loadedName))){if(ye(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:a}=t,o=new FontFace(i,s,a);this.addNativeFontFace(o);try{await o.load(),u(this,au).add(i),n==null||n(t)}catch{At(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Wt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw At(`Failed to load font '${n.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return kt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return kt(this,"isSyncFontLoadingSupported",hn||Xe.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(ye(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const s=n.shift();setTimeout(s.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:e,callback:t};return n.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return kt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(b,E){return b.charCodeAt(E)<<24|b.charCodeAt(E+1)<<16|b.charCodeAt(E+2)<<8|b.charCodeAt(E+3)&255}function i(b,E,T,R){const P=b.substring(0,E),_=b.substring(E+T);return P+R+_}let s,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let c=0;function h(b,E){if(++c>30){At("Load test font never loaded."),E();return}if(l.font="30px "+b,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){E();return}setTimeout(h.bind(null,b,E))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,d.length,d);const v=16,g=1482184792;let A=n(f,v);for(s=0,a=d.length-3;s<a;s+=4)A=A-g+n(d,s)|0;s<d.length&&(A=A-g+n(d+"XXX",s)|0),f=i(f,v,4,HC(A));const m=`url(data:font/opentype;base64,${btoa(f)});`,y=`@font-face {font-family:"${d}";src:${m}}`;this.insertRule(y);const w=this._document.createElement("div");w.style.visibility="hidden",w.style.width=w.style.height="10px",w.style.position="absolute",w.style.top=w.style.left="0px";for(const b of[t.loadedName,d]){const E=this._document.createElement("span");E.textContent="Hi",E.style.fontFamily=b,w.append(E)}this._document.body.append(w),h(d,()=>{w.remove(),e.complete()})}}au=new WeakMap;class sT{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const n in t)this[n]=t[n];this._inspectFont=e}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Qb(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let i;try{i=t.get(n)}catch(a){At(`getPathGenerator - ignoring character: "${a}".`)}const s=new Path2D(i||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=s}}function aT(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(hn)return r;const t=URL.parse(r,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function oT(r){if(hn&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return tf(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r==null?void 0:r.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function _f(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}const Wv=r=>typeof r=="object"&&Number.isInteger(r==null?void 0:r.num)&&r.num>=0&&Number.isInteger(r==null?void 0:r.gen)&&r.gen>=0,lT=r=>typeof r=="object"&&typeof(r==null?void 0:r.name)=="string",uT=XC.bind(null,Wv,lT);var ji,fg;class cT{constructor(){k(this,ji,new Map);k(this,fg,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};u(this,fg).then(()=>{for(const[i]of u(this,ji))i.call(this,n)})}addEventListener(t,e,n=null){let i=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:s}=n;if(s.aborted){At("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(t,e);i=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}u(this,ji).set(e,i)}removeEventListener(t,e){const n=u(this,ji).get(e);n==null||n(),u(this,ji).delete(e)}terminate(){for(const[,t]of u(this,ji))t==null||t();u(this,ji).clear()}}ji=new WeakMap,fg=new WeakMap;const Pf={DATA:1,ERROR:2},pe={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function fw(){}function wn(r){if(r instanceof Ta||r instanceof xv||r instanceof uw||r instanceof Zp||r instanceof Em)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||Wt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new Ta(r.message);case"InvalidPDFException":return new xv(r.message);case"PasswordException":return new uw(r.message,r.code);case"ResponseException":return new Zp(r.message,r.status,r.missing);case"UnknownErrorException":return new Em(r.message,r.details)}return new Em(r.message,r.toString())}var ou,vr,PS,OS,LS,np;class Pc{constructor(t,e,n){k(this,vr);k(this,ou,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",I(this,vr,PS).bind(this),{signal:u(this,ou).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(a){s.reject(a)}return s.promise}sendWithStream(t,e,n,i){const s=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const h=Promise.withResolvers();return this.streamControllers[s]={controller:c,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:t,streamId:s,data:e,desiredSize:c.desiredSize},i),h.promise},pull:c=>{const h=Promise.withResolvers();return this.streamControllers[s].pullCall=h,l.postMessage({sourceName:a,targetName:o,stream:pe.PULL,streamId:s,desiredSize:c.desiredSize}),h.promise},cancel:c=>{ye(c instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[s].cancelCall=h,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:pe.CANCEL,streamId:s,reason:wn(c)}),h.promise}},n)}destroy(){var t;(t=u(this,ou))==null||t.abort(),S(this,ou,null)}}ou=new WeakMap,vr=new WeakSet,PS=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){I(this,vr,LS).call(this,t);return}if(t.callback){const n=t.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===Pf.DATA)i.resolve(t.data);else if(t.callback===Pf.ERROR)i.reject(wn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,i=t.sourceName,s=this.comObj;Promise.try(e,t.data).then(function(a){s.postMessage({sourceName:n,targetName:i,callback:Pf.DATA,callbackId:t.callbackId,data:a})},function(a){s.postMessage({sourceName:n,targetName:i,callback:Pf.ERROR,callbackId:t.callbackId,reason:wn(a)})});return}if(t.streamId){I(this,vr,OS).call(this,t);return}e(t.data)},OS=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,s=this.comObj,a=this,o=this.actionHandler[t.action],l={enqueue(c,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:i,stream:pe.ENQUEUE,streamId:e,chunk:c},d)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:pe.CLOSE,streamId:e}),delete a.streamSinks[e])},error(c){ye(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:pe.ERROR,streamId:e,reason:wn(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,Promise.try(o,t.data,l).then(function(){s.postMessage({sourceName:n,targetName:i,stream:pe.START_COMPLETE,streamId:e,success:!0})},function(c){s.postMessage({sourceName:n,targetName:i,stream:pe.START_COMPLETE,streamId:e,reason:wn(c)})})},LS=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,s=this.comObj,a=this.streamControllers[e],o=this.streamSinks[e];switch(t.stream){case pe.START_COMPLETE:t.success?a.startCall.resolve():a.startCall.reject(wn(t.reason));break;case pe.PULL_COMPLETE:t.success?a.pullCall.resolve():a.pullCall.reject(wn(t.reason));break;case pe.PULL:if(!o){s.postMessage({sourceName:n,targetName:i,stream:pe.PULL_COMPLETE,streamId:e,success:!0});break}o.desiredSize<=0&&t.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=t.desiredSize,Promise.try(o.onPull||fw).then(function(){s.postMessage({sourceName:n,targetName:i,stream:pe.PULL_COMPLETE,streamId:e,success:!0})},function(c){s.postMessage({sourceName:n,targetName:i,stream:pe.PULL_COMPLETE,streamId:e,reason:wn(c)})});break;case pe.ENQUEUE:if(ye(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(t.chunk);break;case pe.CLOSE:if(ye(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),I(this,vr,np).call(this,a,e);break;case pe.ERROR:ye(a,"error should have stream controller"),a.controller.error(wn(t.reason)),I(this,vr,np).call(this,a,e);break;case pe.CANCEL_COMPLETE:t.success?a.cancelCall.resolve():a.cancelCall.reject(wn(t.reason)),I(this,vr,np).call(this,a,e);break;case pe.CANCEL:if(!o)break;const l=wn(t.reason);Promise.try(o.onCancel||fw,l).then(function(){s.postMessage({sourceName:n,targetName:i,stream:pe.CANCEL_COMPLETE,streamId:e,success:!0})},function(c){s.postMessage({sourceName:n,targetName:i,stream:pe.CANCEL_COMPLETE,streamId:e,reason:wn(c)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},np=async function(t,e){var n,i,s;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(i=t.pullCall)==null?void 0:i.promise,(s=t.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[e]};var Xh;class NS{constructor({enableHWA:t=!1}){k(this,Xh,!1);S(this,Xh,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!u(this,Xh)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Wt("Abstract method `_createCanvas` called.")}}Xh=new WeakMap;class hT extends NS{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class DS{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Wt("Abstract method `_fetch` called.")}}class pw extends DS{async _fetch(t){const e=await ef(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):tf(e)}}Ot(2489);class MS{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,i,s){return"none"}destroy(t=!1){}}var co,lu,Ui,Hi,tn,ho,fo,ht,Je,Oc,pl,rp,gl,FS,Vv,ml,Lc,Nc,Gv,Dc;class dT extends MS{constructor({docId:e,ownerDocument:n=globalThis.document}){super();k(this,ht);k(this,co);k(this,lu);k(this,Ui);k(this,Hi);k(this,tn);k(this,ho);k(this,fo,0);S(this,Hi,e),S(this,tn,n)}addFilter(e){if(!e)return"none";let n=u(this,ht,Je).get(e);if(n)return n;const[i,s,a]=I(this,ht,rp).call(this,e),o=e.length===1?i:`${i}${s}${a}`;if(n=u(this,ht,Je).get(o),n)return u(this,ht,Je).set(e,n),n;const l=`g_${u(this,Hi)}_transfer_map_${sn(this,fo)._++}`,c=I(this,ht,gl).call(this,l);u(this,ht,Je).set(e,c),u(this,ht,Je).set(o,c);const h=I(this,ht,ml).call(this,l);return I(this,ht,Nc).call(this,i,s,a,h),c}addHCMFilter(e,n){var v;const i=`${e}-${n}`,s="base";let a=u(this,ht,Oc).get(s);if((a==null?void 0:a.key)===i||(a?((v=a.filter)==null||v.remove(),a.key=i,a.url="none",a.filter=null):(a={key:i,url:"none",filter:null},u(this,ht,Oc).set(s,a)),!e||!n))return a.url;const o=I(this,ht,Dc).call(this,e);e=vt.makeHexColor(...o);const l=I(this,ht,Dc).call(this,n);if(n=vt.makeHexColor(...l),u(this,ht,pl).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return a.url;const c=new Array(256);for(let g=0;g<=255;g++){const A=g/255;c[g]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const h=c.join(","),d=`g_${u(this,Hi)}_hcm_filter`,f=a.filter=I(this,ht,ml).call(this,d);I(this,ht,Nc).call(this,h,h,h,f),I(this,ht,Vv).call(this,f);const p=(g,A)=>{const m=o[g]/255,y=l[g]/255,w=new Array(A+1);for(let b=0;b<=A;b++)w[b]=m+b/A*(y-m);return w.join(",")};return I(this,ht,Nc).call(this,p(0,5),p(1,5),p(2,5),f),a.url=I(this,ht,gl).call(this,d),a.url}addAlphaFilter(e){let n=u(this,ht,Je).get(e);if(n)return n;const[i]=I(this,ht,rp).call(this,[e]),s=`alpha_${i}`;if(n=u(this,ht,Je).get(s),n)return u(this,ht,Je).set(e,n),n;const a=`g_${u(this,Hi)}_alpha_map_${sn(this,fo)._++}`,o=I(this,ht,gl).call(this,a);u(this,ht,Je).set(e,o),u(this,ht,Je).set(s,o);const l=I(this,ht,ml).call(this,a);return I(this,ht,Gv).call(this,i,l),o}addLuminosityFilter(e){let n=u(this,ht,Je).get(e||"luminosity");if(n)return n;let i,s;if(e?([i]=I(this,ht,rp).call(this,[e]),s=`luminosity_${i}`):s="luminosity",n=u(this,ht,Je).get(s),n)return u(this,ht,Je).set(e,n),n;const a=`g_${u(this,Hi)}_luminosity_map_${sn(this,fo)._++}`,o=I(this,ht,gl).call(this,a);u(this,ht,Je).set(e,o),u(this,ht,Je).set(s,o);const l=I(this,ht,ml).call(this,a);return I(this,ht,FS).call(this,l),e&&I(this,ht,Gv).call(this,i,l),o}addHighlightHCMFilter(e,n,i,s,a){var y;const o=`${n}-${i}-${s}-${a}`;let l=u(this,ht,Oc).get(e);if((l==null?void 0:l.key)===o||(l?((y=l.filter)==null||y.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},u(this,ht,Oc).set(e,l)),!n||!i))return l.url;const[c,h]=[n,i].map(I(this,ht,Dc).bind(this));let d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,v]=[s,a].map(I(this,ht,Dc).bind(this));f<d&&([d,f,p,v]=[f,d,v,p]),u(this,ht,pl).style.color="";const g=(w,b,E)=>{const T=new Array(256),R=(f-d)/E,P=w/255,_=(b-w)/(255*E);let N=0;for(let B=0;B<=E;B++){const O=Math.round(d+B*R),M=P+B*_;for(let x=N;x<=O;x++)T[x]=M;N=O+1}for(let B=N;B<256;B++)T[B]=T[N-1];return T.join(",")},A=`g_${u(this,Hi)}_hcm_${e}_filter`,m=l.filter=I(this,ht,ml).call(this,A);return I(this,ht,Vv).call(this,m),I(this,ht,Nc).call(this,g(p[0],v[0],5),g(p[1],v[1],5),g(p[2],v[2],5),m),l.url=I(this,ht,gl).call(this,A),l.url}destroy(e=!1){var n,i,s,a;e&&((n=u(this,ho))!=null&&n.size)||((i=u(this,Ui))==null||i.parentNode.parentNode.remove(),S(this,Ui,null),(s=u(this,lu))==null||s.clear(),S(this,lu,null),(a=u(this,ho))==null||a.clear(),S(this,ho,null),S(this,fo,0))}}co=new WeakMap,lu=new WeakMap,Ui=new WeakMap,Hi=new WeakMap,tn=new WeakMap,ho=new WeakMap,fo=new WeakMap,ht=new WeakSet,Je=function(){return u(this,lu)||S(this,lu,new Map)},Oc=function(){return u(this,ho)||S(this,ho,new Map)},pl=function(){if(!u(this,Ui)){const e=u(this,tn).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=u(this,tn).createElementNS(Si,"svg");i.setAttribute("width",0),i.setAttribute("height",0),S(this,Ui,u(this,tn).createElementNS(Si,"defs")),e.append(i),i.append(u(this,Ui)),u(this,tn).body.append(e)}return u(this,Ui)},rp=function(e){if(e.length===1){const c=e[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=c[f]/255;const d=h.join(",");return[d,d,d]}const[n,i,s]=e,a=new Array(256),o=new Array(256),l=new Array(256);for(let c=0;c<256;c++)a[c]=n[c]/255,o[c]=i[c]/255,l[c]=s[c]/255;return[a.join(","),o.join(","),l.join(",")]},gl=function(e){if(u(this,co)===void 0){S(this,co,"");const n=u(this,tn).URL;n!==u(this,tn).baseURI&&(Wg(n)?At('#createUrl: ignore "data:"-URL for performance reasons.'):S(this,co,Yb(n,"")))}return`url(${u(this,co)}#${e})`},FS=function(e){const n=u(this,tn).createElementNS(Si,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},Vv=function(e){const n=u(this,tn).createElementNS(Si,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},ml=function(e){const n=u(this,tn).createElementNS(Si,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),u(this,ht,pl).append(n),n},Lc=function(e,n,i){const s=u(this,tn).createElementNS(Si,n);s.setAttribute("type","discrete"),s.setAttribute("tableValues",i),e.append(s)},Nc=function(e,n,i,s){const a=u(this,tn).createElementNS(Si,"feComponentTransfer");s.append(a),I(this,ht,Lc).call(this,a,"feFuncR",e),I(this,ht,Lc).call(this,a,"feFuncG",n),I(this,ht,Lc).call(this,a,"feFuncB",i)},Gv=function(e,n){const i=u(this,tn).createElementNS(Si,"feComponentTransfer");n.append(i),I(this,ht,Lc).call(this,i,"feFuncA",e)},Dc=function(e){return u(this,ht,pl).style.color=e,Vg(getComputedStyle(u(this,ht,pl)).getPropertyValue("color"))};class zS{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Wt("Abstract method `_fetch` called.")}}class gw extends zS{async _fetch(t){const e=await ef(t,"arraybuffer");return new Uint8Array(e)}}class BS{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Wt("Abstract method `_fetch` called.")}}class mw extends BS{async _fetch(t){const e=await ef(t,"arraybuffer");return new Uint8Array(e)}}var _w;if(hn){let r;try{const t=process.getBuiltinModule("module").createRequire(import.meta.url);try{r=t("@napi-rs/canvas")}catch(e){At(`Cannot load "@napi-rs/canvas" package: "${e}".`)}}catch(t){At(`Cannot access the \`require\` function: "${t}".`)}globalThis.DOMMatrix||(r!=null&&r.DOMMatrix?globalThis.DOMMatrix=r.DOMMatrix:At("Cannot polyfill `DOMMatrix`, rendering may be broken.")),globalThis.ImageData||(r!=null&&r.ImageData?globalThis.ImageData=r.ImageData:At("Cannot polyfill `ImageData`, rendering may be broken.")),globalThis.Path2D||(r!=null&&r.Path2D?globalThis.Path2D=r.Path2D:At("Cannot polyfill `Path2D`, rendering may be broken.")),(_w=globalThis.navigator)!=null&&_w.language||(globalThis.navigator={language:"en-US",platform:"",userAgent:""})}async function B0(r){const e=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(e)}class fT extends MS{}class pT extends NS{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class gT extends DS{async _fetch(t){return B0(t)}}class mT extends zS{async _fetch(t){return B0(t)}}class vT extends BS{async _fetch(t){return B0(t)}}const $e={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Xv(r,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,n),r.clip(i)}class j0{isModifyingCurrentTransform(){return!1}getPattern(){Wt("Abstract method `getPattern` called.")}}class yT extends j0{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,i){let s;if(i===$e.STROKE||i===$e.FILL){const a=e.current.getClippedPathBoundingBox(i,re(t))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,c=e.cachedCanvases.getCanvas("pattern",o,l),h=c.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),n=vt.transform(n,[1,0,0,1,a[0],a[1]]),h.transform(...e.baseTransform),this.matrix&&h.transform(...this.matrix),Xv(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),s=t.createPattern(c.canvas,"no-repeat");const d=new DOMMatrix(n);s.setTransform(d)}else Xv(t,this._bbox),s=this._createGradient(t);return s}}function Tm(r,t,e,n,i,s,a,o){const l=t.coords,c=t.colors,h=r.data,d=r.width*4;let f;l[e+1]>l[n+1]&&(f=e,e=n,n=f,f=s,s=a,a=f),l[n+1]>l[i+1]&&(f=n,n=i,i=f,f=a,a=o,o=f),l[e+1]>l[n+1]&&(f=e,e=n,n=f,f=s,s=a,a=f);const p=(l[e]+t.offsetX)*t.scaleX,v=(l[e+1]+t.offsetY)*t.scaleY,g=(l[n]+t.offsetX)*t.scaleX,A=(l[n+1]+t.offsetY)*t.scaleY,m=(l[i]+t.offsetX)*t.scaleX,y=(l[i+1]+t.offsetY)*t.scaleY;if(v>=y)return;const w=c[s],b=c[s+1],E=c[s+2],T=c[a],R=c[a+1],P=c[a+2],_=c[o],N=c[o+1],B=c[o+2],O=Math.round(v),M=Math.round(y);let x,$,X,F,W,H,Z,j;for(let z=O;z<=M;z++){if(z<A){const K=z<v?0:(v-z)/(v-A);x=p-(p-g)*K,$=w-(w-T)*K,X=b-(b-R)*K,F=E-(E-P)*K}else{let K;z>y?K=1:A===y?K=0:K=(A-z)/(A-y),x=g-(g-m)*K,$=T-(T-_)*K,X=R-(R-N)*K,F=P-(P-B)*K}let st;z<v?st=0:z>y?st=1:st=(v-z)/(v-y),W=p-(p-m)*st,H=w-(w-_)*st,Z=b-(b-N)*st,j=E-(E-B)*st;const tt=Math.round(Math.min(x,W)),et=Math.round(Math.max(x,W));let J=d*z+tt*4;for(let K=tt;K<=et;K++)st=(x-K)/(x-W),st<0?st=0:st>1&&(st=1),h[J++]=$-($-H)*st|0,h[J++]=X-(X-Z)*st|0,h[J++]=F-(F-j)*st|0,h[J++]=255}}function wT(r,t,e){const n=t.coords,i=t.colors;let s,a;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(n.length/o)-1,c=o-1;for(s=0;s<l;s++){let h=s*o;for(let d=0;d<c;d++,h++)Tm(r,e,n[h],n[h+1],n[h+o],i[h],i[h+1],i[h+o]),Tm(r,e,n[h+o+1],n[h+1],n[h+o],i[h+o+1],i[h+1],i[h+o])}break;case"triangles":for(s=0,a=n.length;s<a;s+=3)Tm(r,e,n[s],n[s+1],n[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}class AT extends j0{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-o,h=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(c*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*t[1]*1.1)),3e3),p=c/d,v=h/f,g={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/p,scaleY:1/v},A=d+2*2,m=f+2*2,y=n.getCanvas("mesh",A,m),w=y.context,b=w.createImageData(d,f);if(e){const T=b.data;for(let R=0,P=T.length;R<P;R+=4)T[R]=e[0],T[R+1]=e[1],T[R+2]=e[2],T[R+3]=255}for(const T of this._figures)wT(b,T,g);return w.putImageData(b,2,2),{canvas:y.canvas,offsetX:o-2*p,offsetY:l-2*v,scaleX:p,scaleY:v}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,i){Xv(t,this._bbox);const s=new Float32Array(2);if(i===$e.SHADING)vt.singularValueDecompose2dScale(re(t),s);else if(this.matrix){vt.singularValueDecompose2dScale(this.matrix,s);const[o,l]=s;vt.singularValueDecompose2dScale(e.baseTransform,s),s[0]*=o,s[1]*=l}else vt.singularValueDecompose2dScale(e.baseTransform,s);const a=this._createMeshCanvas(s,i===$e.SHADING?null:this._background,e.cachedCanvases);return i!==$e.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(a.offsetX,a.offsetY),t.scale(a.scaleX,a.scaleY),t.createPattern(a.canvas,"no-repeat")}}class bT extends j0{getPattern(){return"hotpink"}}function ST(r){switch(r[0]){case"RadialAxial":return new yT(r);case"Mesh":return new AT(r);case"Dummy":return new bT}throw new Error(`Unknown IR type: ${r[0]}`)}const vw={COLORED:1,UNCOLORED:2},pg=class pg{constructor(t,e,n,i){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:i,tilingType:s,color:a,canvasGraphicsFactory:o}=this;let{xstep:l,ystep:c}=this;l=Math.abs(l),c=Math.abs(c),$g("TilingType: "+s);const h=e[0],d=e[1],f=e[2],p=e[3],v=f-h,g=p-d,A=new Float32Array(2);vt.singularValueDecompose2dScale(this.matrix,A);const[m,y]=A;vt.singularValueDecompose2dScale(this.baseTransform,A);const w=m*A[0],b=y*A[1];let E=v,T=g,R=!1,P=!1;const _=Math.ceil(l*w),N=Math.ceil(c*b),B=Math.ceil(v*w),O=Math.ceil(g*b);_>=B?E=l:R=!0,N>=O?T=c:P=!0;const M=this.getSizeAndScale(E,this.ctx.canvas.width,w),x=this.getSizeAndScale(T,this.ctx.canvas.height,b),$=t.cachedCanvases.getCanvas("pattern",M.size,x.size),X=$.context,F=o.createCanvasGraphics(X);if(F.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(F,i,a),X.translate(-M.scale*h,-x.scale*d),F.transform(M.scale,0,0,x.scale,0,0),X.save(),this.clipBbox(F,h,d,f,p),F.baseTransform=re(F.ctx),F.executeOperatorList(n),F.endDrawing(),X.restore(),R||P){const W=$.canvas;R&&(E=l),P&&(T=c);const H=this.getSizeAndScale(E,this.ctx.canvas.width,w),Z=this.getSizeAndScale(T,this.ctx.canvas.height,b),j=H.size,z=Z.size,st=t.cachedCanvases.getCanvas("pattern-workaround",j,z),tt=st.context,et=R?Math.floor(v/l):0,J=P?Math.floor(g/c):0;for(let K=0;K<=et;K++)for(let Q=0;Q<=J;Q++)tt.drawImage(W,j*K,z*Q,j,z,0,0,j,z);return{canvas:st.canvas,scaleX:H.scale,scaleY:Z.scale,offsetX:h,offsetY:d}}return{canvas:$.canvas,scaleX:M.scale,scaleY:x.scale,offsetX:h,offsetY:d}}getSizeAndScale(t,e,n){const i=Math.max(pg.MAX_PATTERN_SIZE,e);let s=Math.ceil(t*n);return s>=i?s=i:n=s/t,{scale:n,size:s}}clipBbox(t,e,n,i,s){const a=i-e,o=s-n;t.ctx.rect(e,n,a,o),vt.axialAlignedBoundingBox([e,n,i,s],re(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const i=t.ctx,s=t.current;switch(e){case vw.COLORED:const{fillStyle:a,strokeStyle:o}=this.ctx;i.fillStyle=s.fillColor=a,i.strokeStyle=s.strokeColor=o;break;case vw.UNCOLORED:i.fillStyle=i.strokeStyle=n,s.fillColor=s.strokeColor=n;break;default:throw new UC(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,i){let s=n;i!==$e.SHADING&&(s=vt.transform(s,e.baseTransform),this.matrix&&(s=vt.transform(s,this.matrix)));const a=this.createPatternCanvas(e);let o=new DOMMatrix(s);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=t.createPattern(a.canvas,"repeat");return l.setTransform(o),l}};it(pg,"MAX_PATTERN_SIZE",3e3);let Yv=pg;function ET({src:r,srcPos:t=0,dest:e,width:n,height:i,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const o=Xe.isLittleEndian?4278190080:255,[l,c]=a?[s,o]:[o,s],h=n>>3,d=n&7,f=r.length;e=new Uint32Array(e.buffer);let p=0;for(let v=0;v<i;v++){for(const A=t+h;t<A;t++){const m=t<f?r[t]:255;e[p++]=m&128?c:l,e[p++]=m&64?c:l,e[p++]=m&32?c:l,e[p++]=m&16?c:l,e[p++]=m&8?c:l,e[p++]=m&4?c:l,e[p++]=m&2?c:l,e[p++]=m&1?c:l}if(d===0)continue;const g=t<f?r[t++]:255;for(let A=0;A<d;A++)e[p++]=g&1<<7-A?c:l}return{srcPos:t,destPos:p}}const yw=16,ww=100,xT=15,Aw=10,xn=16,km=new DOMMatrix,Yn=new Float32Array(2),Ol=new Float32Array([1/0,1/0,-1/0,-1/0]);function CT(r,t){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){t.save(),this.__originalSave()},r.restore=function(){t.restore(),this.__originalRestore()},r.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},r.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},r.transform=function(e,n,i,s,a,o){t.transform(e,n,i,s,a,o),this.__originalTransform(e,n,i,s,a,o)},r.setTransform=function(e,n,i,s,a,o){t.setTransform(e,n,i,s,a,o),this.__originalSetTransform(e,n,i,s,a,o)},r.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},r.rotate=function(e){t.rotate(e),this.__originalRotate(e)},r.clip=function(e){t.clip(e),this.__originalClip(e)},r.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},r.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},r.bezierCurveTo=function(e,n,i,s,a,o){t.bezierCurveTo(e,n,i,s,a,o),this.__originalBezierCurveTo(e,n,i,s,a,o)},r.rect=function(e,n,i,s){t.rect(e,n,i,s),this.__originalRect(e,n,i,s)},r.closePath=function(){t.closePath(),this.__originalClosePath()},r.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class TT{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Of(r,t,e,n,i,s,a,o,l,c){const[h,d,f,p,v,g]=re(r);if(d===0&&f===0){const y=a*h+v,w=Math.round(y),b=o*p+g,E=Math.round(b),T=(a+l)*h+v,R=Math.abs(Math.round(T)-w)||1,P=(o+c)*p+g,_=Math.abs(Math.round(P)-E)||1;return r.setTransform(Math.sign(h),0,0,Math.sign(p),w,E),r.drawImage(t,e,n,i,s,0,0,R,_),r.setTransform(h,d,f,p,v,g),[R,_]}if(h===0&&p===0){const y=o*f+v,w=Math.round(y),b=a*d+g,E=Math.round(b),T=(o+c)*f+v,R=Math.abs(Math.round(T)-w)||1,P=(a+l)*d+g,_=Math.abs(Math.round(P)-E)||1;return r.setTransform(0,Math.sign(d),Math.sign(f),0,w,E),r.drawImage(t,e,n,i,s,0,0,_,R),r.setTransform(h,d,f,p,v,g),[_,R]}r.drawImage(t,e,n,i,s,a,o,l,c);const A=Math.hypot(h,d),m=Math.hypot(f,p);return[A*l,m*c]}class bw{constructor(t,e){it(this,"alphaIsShape",!1);it(this,"fontSize",0);it(this,"fontSizeScale",1);it(this,"textMatrix",null);it(this,"textMatrixScale",1);it(this,"fontMatrix",Ev);it(this,"leading",0);it(this,"x",0);it(this,"y",0);it(this,"lineX",0);it(this,"lineY",0);it(this,"charSpacing",0);it(this,"wordSpacing",0);it(this,"textHScale",1);it(this,"textRenderingMode",Qe.FILL);it(this,"textRise",0);it(this,"fillColor","#000000");it(this,"strokeColor","#000000");it(this,"patternFill",!1);it(this,"patternStroke",!1);it(this,"fillAlpha",1);it(this,"strokeAlpha",1);it(this,"lineWidth",1);it(this,"activeSMask",null);it(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Ol.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=$e.FILL,e=null){const n=this.minMax.slice();if(t===$e.STROKE){e||Wt("Stroke bounding box must include transform."),vt.singularValueDecompose2dScale(e,Yn);const i=Yn[0]*this.lineWidth/2,s=Yn[1]*this.lineWidth/2;n[0]-=i,n[1]-=s,n[2]+=i,n[3]+=s}return n}updateClipFromPath(){const t=vt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Ol,0)}getClippedPathBoundingBox(t=$e.FILL,e=null){return vt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Sw(r,t){if(t instanceof ImageData){r.putImageData(t,0,0);return}const e=t.height,n=t.width,i=e%xn,s=(e-i)/xn,a=i===0?s:s+1,o=r.createImageData(n,xn);let l=0,c;const h=t.data,d=o.data;let f,p,v,g;if(t.kind===Yf.GRAYSCALE_1BPP){const A=h.byteLength,m=new Uint32Array(d.buffer,0,d.byteLength>>2),y=m.length,w=n+7>>3,b=4294967295,E=Xe.isLittleEndian?4278190080:255;for(f=0;f<a;f++){for(v=f<s?xn:i,c=0,p=0;p<v;p++){const T=A-l;let R=0;const P=T>w?n:T*8-7,_=P&-8;let N=0,B=0;for(;R<_;R+=8)B=h[l++],m[c++]=B&128?b:E,m[c++]=B&64?b:E,m[c++]=B&32?b:E,m[c++]=B&16?b:E,m[c++]=B&8?b:E,m[c++]=B&4?b:E,m[c++]=B&2?b:E,m[c++]=B&1?b:E;for(;R<P;R++)N===0&&(B=h[l++],N=128),m[c++]=B&N?b:E,N>>=1}for(;c<y;)m[c++]=0;r.putImageData(o,0,f*xn)}}else if(t.kind===Yf.RGBA_32BPP){for(p=0,g=n*xn*4,f=0;f<s;f++)d.set(h.subarray(l,l+g)),l+=g,r.putImageData(o,0,p),p+=xn;f<a&&(g=n*i*4,d.set(h.subarray(l,l+g)),r.putImageData(o,0,p))}else if(t.kind===Yf.RGB_24BPP)for(v=xn,g=n*v,f=0;f<a;f++){for(f>=s&&(v=i,g=n*v),c=0,p=g;p--;)d[c++]=h[l++],d[c++]=h[l++],d[c++]=h[l++],d[c++]=255;r.putImageData(o,0,f*xn)}else throw new Error(`bad image kind: ${t.kind}`)}function Ew(r,t){if(t.bitmap){r.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,i=e%xn,s=(e-i)/xn,a=i===0?s:s+1,o=r.createImageData(n,xn);let l=0;const c=t.data,h=o.data;for(let d=0;d<a;d++){const f=d<s?xn:i;({srcPos:l}=ET({src:c,srcPos:l,dest:h,width:n,height:f,nonBlackColor:0})),r.putImageData(o,0,d*xn)}}function yc(r,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)r[n]!==void 0&&(t[n]=r[n]);r.setLineDash!==void 0&&(t.setLineDash(r.getLineDash()),t.lineDashOffset=r.lineDashOffset)}function Lf(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);const{filter:t}=r;t!=="none"&&t!==""&&(r.filter="none")}function xw(r,t){if(t)return!0;vt.singularValueDecompose2dScale(r,Yn);const e=Math.fround(wi.pixelRatio*ka.PDF_TO_CSS_UNITS);return Yn[0]<=e&&Yn[1]<=e}const kT=["butt","round","square"],RT=["miter","round","bevel"],IT={},Cw={};var Hr,Kv,Zv,Qv;const X0=class X0{constructor(t,e,n,i,s,{optionalContentConfig:a,markedContentStack:o=null},l,c){k(this,Hr);this.ctx=t,this.current=new bw(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new TT(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:i=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,n){const l=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...re(this.compositeCtx))}this.ctx.save(),Lf(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=re(this.ctx)}executeOperatorList(t,e,n,i){const s=t.argsArray,a=t.fnArray;let o=e||0;const l=s.length;if(l===o)return o;const c=l-o>Aw&&typeof n=="function",h=c?Date.now()+xT:0;let d=0;const f=this.commonObjs,p=this.objs;let v;for(;;){if(i!==void 0&&o===i.nextBreakPoint)return i.breakIt(o,n),o;if(v=a[o],v!==Kp.dependency)this[v].apply(this,s[o]);else for(const g of s[o]){const A=g.startsWith("g_")?f:p;if(!A.has(g))return A.get(g,n),o}if(o++,o===l)return o;if(c&&++d>Aw){if(Date.now()>h)return n(),o;d=0}}}endDrawing(){I(this,Hr,Kv).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),I(this,Hr,Zv).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,i=t.height??t.displayHeight;let s=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),o=n,l=i,c="prescale1",h,d;for(;s>2&&o>1||a>2&&l>1;){let f=o,p=l;s>2&&o>1&&(f=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),s/=o/f),a>2&&l>1&&(p=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/p),h=this.cachedCanvases.getCanvas(c,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(t,0,0,o,l,0,0,f,p),t=h.canvas,o=f,l=p,c=c==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:o,paintHeight:l}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:i}=t,s=this.current.fillColor,a=this.current.patternFill,o=re(e);let l,c,h,d;if((t.bitmap||t.data)&&t.count>1){const _=t.bitmap||t.data.buffer;c=JSON.stringify(a?o:[o.slice(0,4),s]),l=this._cachedBitmapsMap.get(_),l||(l=new Map,this._cachedBitmapsMap.set(_,l));const N=l.get(c);if(N&&!a){const B=Math.round(Math.min(o[0],o[2])+o[4]),O=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:N,offsetX:B,offsetY:O}}h=N}h||(d=this.cachedCanvases.getCanvas("maskCanvas",n,i),Ew(d.context,t));let f=vt.transform(o,[1/n,0,0,-1/i,0,0]);f=vt.transform(f,[1,0,0,1,0,-i]);const p=Ol.slice();vt.axialAlignedBoundingBox([0,0,n,i],f,p);const[v,g,A,m]=p,y=Math.round(A-v)||1,w=Math.round(m-g)||1,b=this.cachedCanvases.getCanvas("fillCanvas",y,w),E=b.context,T=v,R=g;E.translate(-T,-R),E.transform(...f),h||(h=this._scaleImage(d.canvas,Vr(E)),h=h.img,l&&a&&l.set(c,h)),E.imageSmoothingEnabled=xw(re(E),t.interpolate),Of(E,h,0,0,h.width,h.height,0,0,n,i),E.globalCompositeOperation="source-in";const P=vt.transform(Vr(E),[1,0,0,1,-T,-R]);return E.fillStyle=a?s.getPattern(e,this,P,$e.FILL):s,E.fillRect(0,0,n,i),l&&!a&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,b.canvas)),{canvas:b.canvas,offsetX:Math.round(T),offsetY:Math.round(R)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=kT[t]}setLineJoin(t){this.ctx.lineJoin=RT[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx;const s=this.ctx=i.context;s.setTransform(this.suspendedCtx.getTransform()),yc(this.suspendedCtx,s),CT(s,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),yc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,i){const s=i[0],a=i[1],o=i[2]-s,l=i[3]-a;o===0||l===0||(this.genericComposeSMask(e.context,n,o,l,e.subtype,e.backdrop,e.transferMap,s,a,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,i,s,a,o,l,c,h,d){let f=t.canvas,p=l-h,v=c-d;if(a)if(p<0||v<0||p+n>f.width||v+i>f.height){const A=this.cachedCanvases.getCanvas("maskExtension",n,i),m=A.context;m.drawImage(f,-p,-v),m.globalCompositeOperation="destination-atop",m.fillStyle=a,m.fillRect(0,0,n,i),m.globalCompositeOperation="source-over",f=A.canvas,p=v=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const A=new Path2D;A.rect(p,v,n,i),t.clip(A),t.globalCompositeOperation="destination-atop",t.fillStyle=a,t.fillRect(p,v,n,i),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),s==="Alpha"&&o?e.filter=this.filterFactory.addAlphaFilter(o):s==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(o));const g=new Path2D;g.rect(l,c,n,i),e.clip(g),e.globalCompositeOperation="destination-in",e.drawImage(f,p,v,n,i,l,c,n,i),e.restore()}save(){this.inSMaskMode&&yc(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&yc(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,i,s,a){this.ctx.transform(t,e,n,i,s,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){let[i]=e;if(!n){i||(i=e[0]=new Path2D),this[t](i);return}if(!(i instanceof Path2D)){const s=e[0]=new Path2D;for(let a=0,o=i.length;a<o;)switch(i[a++]){case Rf.moveTo:s.moveTo(i[a++],i[a++]);break;case Rf.lineTo:s.lineTo(i[a++],i[a++]);break;case Rf.curveTo:s.bezierCurveTo(i[a++],i[a++],i[a++],i[a++],i[a++],i[a++]);break;case Rf.closePath:s.closePath();break;default:At(`Unrecognized drawing path operator: ${i[a-1]}`);break}i=s}vt.axialAlignedBoundingBox(n,re(this.ctx),this.current.minMax),this[t](i)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const n=this.ctx,i=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const s=i.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=i.getPattern(n,this,Vr(n),$e.STROKE),s){const a=new Path2D;a.addPath(t,n.getTransform().invertSelf().multiplySelf(s)),t=a}this.rescaleAndStroke(t,!1),n.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox($e.STROKE,re(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const n=this.ctx,i=this.current.fillColor,s=this.current.patternFill;let a=!1;if(s){const l=i.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=i.getPattern(n,this,Vr(n),$e.FILL),l){const c=new Path2D;c.addPath(t,n.getTransform().invertSelf().multiplySelf(l)),t=c}a=!0}const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(n.fill(t,"evenodd"),this.pendingEOFill=!1):n.fill(t)),a&&n.restore(),e&&this.consumePath(t,o)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=IT}eoClip(){this.pendingClip=Cw}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const n=new Path2D,i=e.getTransform().invertSelf();for(const{transform:s,x:a,y:o,fontSize:l,path:c}of t)c&&n.addPath(c,new DOMMatrix(s).preMultiplySelf(i).translate(a,o).scale(l,-l));e.clip(n),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var h;const n=this.commonObjs.get(t),i=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=n.fontMatrix||Ev,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&At("Invalid font matrix for font "+t),e<0?(e=-e,i.fontDirection=-1):i.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const s=n.loadedName||"sans-serif",a=((h=n.systemFontInfo)==null?void 0:h.css)||`"${s}", ${n.fallbackName}`;let o="normal";n.black?o="900":n.bold&&(o="bold");const l=n.italic?"italic":"normal";let c=e;e<yw?c=yw:e>ww&&(c=ww),this.current.fontSizeScale=e/c,this.ctx.font=`${l} ${o} ${c}px ${a}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,i,s){const a=this.ctx,o=this.current,l=o.font,c=o.textRenderingMode,h=o.fontSize/o.fontSizeScale,d=c&Qe.FILL_STROKE_MASK,f=!!(c&Qe.ADD_TO_PATH_FLAG),p=o.patternFill&&!l.missingFile,v=o.patternStroke&&!l.missingFile;let g;if((l.disableFontFace||f||p||v)&&!l.missingFile&&(g=l.getPathGenerator(this.commonObjs,t)),g&&(l.disableFontFace||p||v)){a.save(),a.translate(e,n),a.scale(h,-h);let A;if((d===Qe.FILL||d===Qe.FILL_STROKE)&&(i?(A=a.getTransform(),a.setTransform(...i),a.fill(I(this,Hr,Qv).call(this,g,A,i))):a.fill(g)),d===Qe.STROKE||d===Qe.FILL_STROKE)if(s){A||(A=a.getTransform()),a.setTransform(...s);const{a:m,b:y,c:w,d:b}=A,E=vt.inverseTransform(s),T=vt.transform([m,y,w,b,0,0],E);vt.singularValueDecompose2dScale(T,Yn),a.lineWidth*=Math.max(Yn[0],Yn[1])/h,a.stroke(I(this,Hr,Qv).call(this,g,A,s))}else a.lineWidth/=h,a.stroke(g);a.restore()}else(d===Qe.FILL||d===Qe.FILL_STROKE)&&a.fillText(t,e,n),(d===Qe.STROKE||d===Qe.FILL_STROKE)&&a.strokeText(t,e,n);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:re(a),x:e,y:n,fontSize:h,path:g})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return kt(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const i=e.fontSize;if(i===0)return;const s=this.ctx,a=e.fontSizeScale,o=e.charSpacing,l=e.wordSpacing,c=e.fontDirection,h=e.textHScale*c,d=t.length,f=n.vertical,p=f?1:-1,v=n.defaultVMetrics,g=i*e.fontMatrix[0],A=e.textRenderingMode===Qe.FILL&&!n.disableFontFace&&!e.patternFill;s.save(),e.textMatrix&&s.transform(...e.textMatrix),s.translate(e.x,e.y+e.textRise),c>0?s.scale(h,-1):s.scale(h,1);let m,y;if(e.patternFill){s.save();const R=e.fillColor.getPattern(s,this,Vr(s),$e.FILL);m=re(s),s.restore(),s.fillStyle=R}if(e.patternStroke){s.save();const R=e.strokeColor.getPattern(s,this,Vr(s),$e.STROKE);y=re(s),s.restore(),s.strokeStyle=R}let w=e.lineWidth;const b=e.textMatrixScale;if(b===0||w===0){const R=e.textRenderingMode&Qe.FILL_STROKE_MASK;(R===Qe.STROKE||R===Qe.FILL_STROKE)&&(w=this.getSinglePixelWidth())}else w/=b;if(a!==1&&(s.scale(a,a),w/=a),s.lineWidth=w,n.isInvalidPDFjsFont){const R=[];let P=0;for(const _ of t)R.push(_.unicode),P+=_.width;s.fillText(R.join(""),0,0),e.x+=P*g*h,s.restore(),this.compose();return}let E=0,T;for(T=0;T<d;++T){const R=t[T];if(typeof R=="number"){E+=p*R*i/1e3;continue}let P=!1;const _=(R.isSpace?l:0)+o,N=R.fontChar,B=R.accent;let O,M,x=R.width;if(f){const X=R.vmetric||v,F=-(R.vmetric?X[1]:x*.5)*g,W=X[2]*g;x=X?-X[0]:x,O=F/a,M=(E+W)/a}else O=E/a,M=0;if(n.remeasure&&x>0){const X=s.measureText(N).width*1e3/i*a;if(x<X&&this.isFontSubpixelAAEnabled){const F=x/X;P=!0,s.save(),s.scale(F,1),O/=F}else x!==X&&(O+=(x-X)/2e3*i/a)}if(this.contentVisible&&(R.isInFont||n.missingFile)){if(A&&!B)s.fillText(N,O,M);else if(this.paintChar(N,O,M,m,y),B){const X=O+i*B.offset.x/a,F=M-i*B.offset.y/a;this.paintChar(B.fontChar,X,F,m,y)}}const $=f?x*g-_*c:x*g+_*c;E+=$,P&&s.restore()}f?e.y-=E:e.x+=E*h,s.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,i=n.font,s=n.fontSize,a=n.fontDirection,o=i.vertical?1:-1,l=n.charSpacing,c=n.wordSpacing,h=n.textHScale*a,d=n.fontMatrix||Ev,f=t.length,p=n.textRenderingMode===Qe.INVISIBLE;let v,g,A,m;if(!(p||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),n.textMatrix&&e.transform(...n.textMatrix),e.translate(n.x,n.y+n.textRise),e.scale(h,a),v=0;v<f;++v){if(g=t[v],typeof g=="number"){m=o*g*s/1e3,this.ctx.translate(m,0),n.x+=m*h;continue}const y=(g.isSpace?c:0)+l,w=i.charProcOperatorList[g.operatorListId];w?this.contentVisible&&(this.save(),e.scale(s,s),e.transform(...d),this.executeOperatorList(w),this.restore()):At(`Type3 character "${g.operatorListId}" is not available.`);const b=[g.width,0];vt.applyTransform(b,d),A=b[0]*s+y,e.translate(A,0),n.x+=A*h}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,i,s,a){const o=new Path2D;o.rect(n,i,s-n,a-i),this.ctx.clip(o),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=this.baseTransform||re(this.ctx),i={createCanvasGraphics:s=>new X0(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new Yv(t,this.ctx,i,n)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=ST(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,Vr(e),$e.SHADING);const i=Vr(e);if(i){const{width:s,height:a}=e.canvas,o=Ol.slice();vt.axialAlignedBoundingBox([0,0,s,a],i,o);const[l,c,h,d]=o;this.ctx.fillRect(l,c,h-l,d-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Wt("Should not call beginInlineImage")}beginImageData(){Wt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=re(this.ctx),e)){vt.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[n,i,s,a]=e,o=new Path2D;o.rect(n,i,s-n,a-i),this.ctx.clip(o),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||$g("TODO: Support non-isolated groups."),t.knockout&&At("Knockout groups not supported.");const n=re(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=Ol.slice();vt.axialAlignedBoundingBox(t.bbox,re(e),i);const s=[0,0,e.canvas.width,e.canvas.height];i=vt.intersect(i,s)||[0,0,0,0];const a=Math.floor(i[0]),o=Math.floor(i[1]),l=Math.max(Math.ceil(i[2])-a,1),c=Math.max(Math.ceil(i[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,c]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,l,c),f=d.context;f.translate(-a,-o),f.transform(...n);let p=new Path2D;const[v,g,A,m]=t.bbox;if(p.rect(v,g,A-v,m-g),t.matrix){const y=new Path2D;y.addPath(p,new DOMMatrix(t.matrix)),p=y}f.clip(p),t.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:a,offsetY:o,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(a,o),e.save()),yc(e,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=re(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const s=Ol.slice();vt.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],i,s),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(t,e,n,i,s){if(I(this,Hr,Kv).call(this),Lf(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const a=e[2]-e[0],o=e[3]-e[1];if(s&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=a,e[3]=o,vt.singularValueDecompose2dScale(re(this.ctx),Yn);const{viewportScale:l}=this,c=Math.ceil(a*this.outputScaleX*l),h=Math.ceil(o*this.outputScaleY*l);this.annotationCanvas=this.canvasFactory.create(c,h);const{canvas:d,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(t,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(Yn[0],0,0,-Yn[1],0,o*Yn[1]),Lf(this.ctx)}else{Lf(this.ctx),this.endPath();const l=new Path2D;l.rect(e[0],e[1],a,o),this.ctx.clip(l)}}this.current=new bw(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),I(this,Hr,Zv).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,i=this._createMaskCanvas(t),s=i.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(s,i.offsetX,i.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,i=0,s,a){if(!this.contentVisible)return;t=this.getObject(t.data,t);const o=this.ctx;o.save();const l=re(o);o.transform(e,n,i,s,0,0);const c=this._createMaskCanvas(t);o.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let h=0,d=a.length;h<d;h+=2){const f=vt.transform(l,[e,n,i,s,a[h],a[h+1]]);o.drawImage(c.canvas,f[4],f[5])}o.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const s of t){const{data:a,width:o,height:l,transform:c}=s,h=this.cachedCanvases.getCanvas("maskCanvas",o,l),d=h.context;d.save();const f=this.getObject(a,s);Ew(d,f),d.globalCompositeOperation="source-in",d.fillStyle=i?n.getPattern(d,this,Vr(e),$e.FILL):n,d.fillRect(0,0,o,l),d.restore(),e.save(),e.transform(...c),e.scale(1,-1),Of(e,h.canvas,0,0,o,l,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){At("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,i){if(!this.contentVisible)return;const s=this.getObject(t);if(!s){At("Dependent image isn't ready yet");return}const a=s.width,o=s.height,l=[];for(let c=0,h=i.length;c<h;c+=2)l.push({transform:[e,0,0,n,i[c],i[c+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(s,l)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:i}=t,s=this.cachedCanvases.getCanvas("inlineImage",n,i),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(e,0,0),a.filter="none",s.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,i=this.ctx;this.save();const{filter:s}=i;s!=="none"&&s!==""&&(i.filter="none"),i.scale(1/e,-1/n);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{const c=this.cachedCanvases.getCanvas("inlineImage",e,n).context;Sw(c,t),a=this.applyTransferMapsToCanvas(c)}const o=this._scaleImage(a,Vr(i));i.imageSmoothingEnabled=xw(re(i),t.interpolate),Of(i,o.img,0,0,o.paintWidth,o.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const s=t.width,a=t.height,l=this.cachedCanvases.getCanvas("inlineImage",s,a).context;Sw(l,t),i=this.applyTransferMapsToCanvas(l)}for(const s of e)n.save(),n.transform(...s.transform),n.scale(1,-1),Of(n,i,s.x,s.y,s.w,s.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(n||(this.pendingClip===Cw?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=re(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:i,d:s}=this.ctx.getTransform();let a,o;if(n===0&&i===0){const l=Math.abs(e),c=Math.abs(s);if(l===c)if(t===0)a=o=1/l;else{const h=l*t;a=o=h<1?1/h:1}else if(t===0)a=1/l,o=1/c;else{const h=l*t,d=c*t;a=h<1?1/h:1,o=d<1?1/d:1}}else{const l=Math.abs(e*s-n*i),c=Math.hypot(e,n),h=Math.hypot(i,s);if(t===0)a=h/l,o=c/l;else{const d=t*l;a=h>d?h/d:1,o=c>d?c/d:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:i}}=this,[s,a]=this.getScaleForStroking();if(s===a){n.lineWidth=(i||1)*s,n.stroke(t);return}const o=n.getLineDash();e&&n.save(),n.scale(s,a),km.a=1/s,km.d=1/a;const l=new Path2D;if(l.addPath(t,km),o.length>0){const c=Math.max(s,a);n.setLineDash(o.map(h=>h/c)),n.lineDashOffset/=c}n.lineWidth=i||1,n.stroke(l),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Hr=new WeakSet,Kv=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Zv=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},Qv=function(t,e,n){const i=new Path2D;return i.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),i};let Ul=X0;for(const r in Kp)Ul.prototype[r]!==void 0&&(Ul.prototype[Kp[r]]=Ul.prototype[r]);var Yh,Kh;class mi{static get workerPort(){return u(this,Yh)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");S(this,Yh,t)}static get workerSrc(){return u(this,Kh)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");S(this,Kh,t)}}Yh=new WeakMap,Kh=new WeakMap,k(mi,Yh,null),k(mi,Kh,"");var uu,Zh;class _T{constructor({parsedData:t,rawData:e}){k(this,uu);k(this,Zh);S(this,uu,t),S(this,Zh,e)}getRaw(){return u(this,Zh)}get(t){return u(this,uu).get(t)??null}[Symbol.iterator](){return u(this,uu).entries()}}uu=new WeakMap,Zh=new WeakMap;const vl=Symbol("INTERNAL");var Qh,Jh,qh,cu;class PT{constructor(t,{name:e,intent:n,usage:i,rbGroups:s}){k(this,Qh,!1);k(this,Jh,!1);k(this,qh,!1);k(this,cu,!0);S(this,Qh,!!(t&Gn.DISPLAY)),S(this,Jh,!!(t&Gn.PRINT)),this.name=e,this.intent=n,this.usage=i,this.rbGroups=s}get visible(){if(u(this,qh))return u(this,cu);if(!u(this,cu))return!1;const{print:t,view:e}=this.usage;return u(this,Qh)?(e==null?void 0:e.viewState)!=="OFF":u(this,Jh)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==vl&&Wt("Internal method `_setVisible` called."),S(this,qh,n),S(this,cu,e)}}Qh=new WeakMap,Jh=new WeakMap,qh=new WeakMap,cu=new WeakMap;var $s,Ht,hu,du,td,Jv;class OT{constructor(t,e=Gn.DISPLAY){k(this,td);k(this,$s,null);k(this,Ht,new Map);k(this,hu,null);k(this,du,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,S(this,du,t.order);for(const n of t.groups)u(this,Ht).set(n.id,new PT(e,n));if(t.baseState==="OFF")for(const n of u(this,Ht).values())n._setVisible(vl,!1);for(const n of t.on)u(this,Ht).get(n)._setVisible(vl,!0);for(const n of t.off)u(this,Ht).get(n)._setVisible(vl,!1);S(this,hu,this.getHash())}}isVisible(t){if(u(this,Ht).size===0)return!0;if(!t)return $g("Optional content group not defined."),!0;if(t.type==="OCG")return u(this,Ht).has(t.id)?u(this,Ht).get(t.id).visible:(At(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return I(this,td,Jv).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!u(this,Ht).has(e))return At(`Optional content group not found: ${e}`),!0;if(u(this,Ht).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!u(this,Ht).has(e))return At(`Optional content group not found: ${e}`),!0;if(!u(this,Ht).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!u(this,Ht).has(e))return At(`Optional content group not found: ${e}`),!0;if(!u(this,Ht).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!u(this,Ht).has(e))return At(`Optional content group not found: ${e}`),!0;if(u(this,Ht).get(e).visible)return!1}return!0}return At(`Unknown optional content policy ${t.policy}.`),!0}return At(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var s;const i=u(this,Ht).get(t);if(!i){At(`Optional content group not found: ${t}`);return}if(n&&e&&i.rbGroups.length)for(const a of i.rbGroups)for(const o of a)o!==t&&((s=u(this,Ht).get(o))==null||s._setVisible(vl,!1,!0));i._setVisible(vl,!!e,!0),S(this,$s,null)}setOCGState({state:t,preserveRB:e}){let n;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const s=u(this,Ht).get(i);if(s)switch(n){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!s.visible,e);break}}S(this,$s,null)}get hasInitialVisibility(){return u(this,hu)===null||this.getHash()===u(this,hu)}getOrder(){return u(this,Ht).size?u(this,du)?u(this,du).slice():[...u(this,Ht).keys()]:null}getGroup(t){return u(this,Ht).get(t)||null}getHash(){if(u(this,$s)!==null)return u(this,$s);const t=new RS;for(const[e,n]of u(this,Ht))t.update(`${e}:${n.visible}`);return S(this,$s,t.hexdigest())}[Symbol.iterator](){return u(this,Ht).entries()}}$s=new WeakMap,Ht=new WeakMap,hu=new WeakMap,du=new WeakMap,td=new WeakSet,Jv=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let i=1;i<e;i++){const s=t[i];let a;if(Array.isArray(s))a=I(this,td,Jv).call(this,s);else if(u(this,Ht).has(s))a=u(this,Ht).get(s).visible;else return At(`Optional content group not found: ${s}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};class LT{constructor(t,{disableRange:e=!1,disableStream:n=!1}){ye(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:s,progressiveDone:a,contentDispositionFilename:o}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(s==null?void 0:s.length)>0){const l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),t.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),t.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(s){return s._begin!==t?!1:(s._enqueue(n),!0)});ye(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,i,s;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(s=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||s.call(i,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ye(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new NT(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new DT(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class NT{constructor(t,e,n=!1,i=null){this._stream=t,this._done=n||!1,this._filename=F0(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class DT{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function MT(r){let t=!0,e=n("filename\\*","i").exec(r);if(e){e=e[1];let h=o(e);return h=unescape(h),h=l(h),h=c(h),s(h)}if(e=a(r),e){const h=c(e);return s(h)}if(e=n("filename","i").exec(r),e){e=e[1];let h=o(e);return h=c(h),s(h)}function n(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=tf(d);d=f.decode(p),t=!1}catch{}}return d}function s(h){return t&&/[\x80-\xff]/.test(h)&&(h=i("utf-8",h),t&&(h=i("iso-8859-1",h))),h}function a(h){const d=[];let f;const p=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,g,A,m]=f;if(g=parseInt(g,10),g in d){if(g===0)break;continue}d[g]=[A,m]}const v=[];for(let g=0;g<d.length&&g in d;++g){let[A,m]=d[g];m=o(m),A&&(m=unescape(m),g===0&&(m=l(m))),v.push(m)}return v.join("")}function o(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function l(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),v=h.slice(d+1).replace(/^[^']*'/,"");return i(f,v)}function c(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,v){if(p==="q"||p==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,A){return String.fromCharCode(parseInt(A,16))}),i(f,v);try{v=atob(v)}catch{}return i(f,v)})}return""}function jS(r,t){const e=new Headers;if(!r||!t||typeof t!="object")return e;for(const n in t){const i=t[n];i!==void 0&&e.append(n,i)}return e}function Gg(r){var t;return((t=URL.parse(r))==null?void 0:t.origin)??null}function US({responseHeaders:r,isHttp:t,rangeChunkSize:e,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(r.get("Content-Length"),10);return!Number.isInteger(s)||(i.suggestedLength=s,s<=2*e)||n||!t||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function HS(r){const t=r.get("Content-Disposition");if(t){let e=MT(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(F0(e))return e}return null}function sf(r,t){return new Zp(`Unexpected server response (${r}) while retrieving PDF "${t}".`,r,r===404||r===0&&t.startsWith("file:"))}function $S(r){return r===200||r===206}function WS(r,t,e){return{method:"GET",headers:r,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function VS(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(At(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class FT{constructor(t){it(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=jS(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ye(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new zT(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new BT(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class zT{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),i=e.url;fetch(i,WS(n,this._withCredentials,this._abortController)).then(s=>{if(t._responseOrigin=Gg(s.url),!$S(s.status))throw sf(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();const a=s.headers,{allowRangeRequests:o,suggestedLength:l}=US({responseHeaders:a,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=HS(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ta("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:VS(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class BT{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const s=new Headers(t.headers);s.append("Range",`bytes=${e}-${n-1}`);const a=i.url;fetch(a,WS(s,this._withCredentials,this._abortController)).then(o=>{const l=Gg(o.url);if(l!==t._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${t._responseOrigin}".`);if(!$S(o.status))throw sf(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:VS(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const Rm=200,Im=206;function jT(r){const t=r.response;return typeof t!="string"?t:tf(t).buffer}class UT{constructor({url:t,httpHeaders:e,withCredentials:n}){it(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=jS(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[s,a]of this.headers)e.setRequestHeader(s,a);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=Im):i.expectedStatus=Rm,e.responseType="arraybuffer",ye(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var i;const n=this.pendingRequests[t];n&&((i=n.onProgress)==null||i.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){n.onError(i.status);return}const s=i.status||Rm;if(!(s===Rm&&n.expectedStatus===Im)&&s!==n.expectedStatus){n.onError(i.status);return}const o=jT(i);if(s===Im){const l=i.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?n.onDone({begin:parseInt(c[1],10),chunk:o}):(At('Missing or invalid "Content-Range" header.'),n.onError(0))}else o?n.onDone({begin:0,chunk:o}):n.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class HT{constructor(t){this._source=t,this._manager=new UT(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ye(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new $T(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new WT(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class $T{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Gg(e.responseURL);const n=e.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[l,...c]=o.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:a}=US({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=HS(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=sf(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class WT{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=Gg((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=sf(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const VT=/^[a-z][a-z0-9\-+.]+:/i;function GT(r){if(VT.test(r))return new URL(r);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(r))}class XT{constructor(t){this.source=t,this.url=GT(t.url),ye(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ye(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new YT(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new KT(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class YT{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=sf(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ta("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class KT{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=t.source;this._isStreamingSupported=!i.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const wc=Symbol("INITIAL_DATA");var Nn,ed,qv;class GS{constructor(){k(this,ed);k(this,Nn,Object.create(null))}get(t,e=null){if(e){const i=I(this,ed,qv).call(this,t);return i.promise.then(()=>e(i.data)),null}const n=u(this,Nn)[t];if(!n||n.data===wc)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=u(this,Nn)[t];return!!e&&e.data!==wc}delete(t){const e=u(this,Nn)[t];return!e||e.data===wc?!1:(delete u(this,Nn)[t],!0)}resolve(t,e=null){const n=I(this,ed,qv).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in u(this,Nn)){const{data:n}=u(this,Nn)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}S(this,Nn,Object.create(null))}*[Symbol.iterator](){for(const t in u(this,Nn)){const{data:e}=u(this,Nn)[t];e!==wc&&(yield[t,e])}}}Nn=new WeakMap,ed=new WeakSet,qv=function(t){var e;return(e=u(this,Nn))[t]||(e[t]={...Promise.withResolvers(),data:wc})};const ZT=1e5,Tw=30;var Pw,Ws,Sn,nd,rd,po,$i,id,sd,go,fu,pu,Vs,gu,ad,mu,mo,od,ld,vu,vo,ud,Gs,yu,vs,XS,YS,ty,Jn,ip,ey,KS,ZS;const Ae=class Ae{constructor({textContentSource:t,container:e,viewport:n}){k(this,vs);k(this,Ws,Promise.withResolvers());k(this,Sn,null);k(this,nd,!1);k(this,rd,!!((Pw=globalThis.FontInspector)!=null&&Pw.enabled));k(this,po,null);k(this,$i,null);k(this,id,0);k(this,sd,0);k(this,go,null);k(this,fu,null);k(this,pu,0);k(this,Vs,0);k(this,gu,Object.create(null));k(this,ad,[]);k(this,mu,null);k(this,mo,[]);k(this,od,new WeakMap);k(this,ld,null);var l;if(t instanceof ReadableStream)S(this,mu,t);else if(typeof t=="object")S(this,mu,new ReadableStream({start(c){c.enqueue(t),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');S(this,Sn,S(this,fu,e)),S(this,Vs,n.scale*wi.pixelRatio),S(this,pu,n.rotation),S(this,$i,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:s,pageX:a,pageY:o}=n.rawDims;S(this,ld,[1,0,0,-1,-a,o+s]),S(this,sd,i),S(this,id,s),I(l=Ae,Jn,KS).call(l),il(e,n),u(this,Ws).promise.finally(()=>{u(Ae,yu).delete(this),S(this,$i,null),S(this,gu,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Xe.platform;return kt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{u(this,go).read().then(({value:e,done:n})=>{if(n){u(this,Ws).resolve();return}u(this,po)??S(this,po,e.lang),Object.assign(u(this,gu),e.styles),I(this,vs,XS).call(this,e.items),t()},u(this,Ws).reject)};return S(this,go,u(this,mu).getReader()),u(Ae,yu).add(this),t(),u(this,Ws).promise}update({viewport:t,onBefore:e=null}){var s;const n=t.scale*wi.pixelRatio,i=t.rotation;if(i!==u(this,pu)&&(e==null||e(),S(this,pu,i),il(u(this,fu),{rotation:i})),n!==u(this,Vs)){e==null||e(),S(this,Vs,n);const a={div:null,properties:null,ctx:I(s=Ae,Jn,ip).call(s,u(this,po))};for(const o of u(this,mo))a.properties=u(this,od).get(o),a.div=o,I(this,vs,ty).call(this,a)}}cancel(){var e;const t=new Ta("TextLayer task cancelled.");(e=u(this,go))==null||e.cancel(t).catch(()=>{}),S(this,go,null),u(this,Ws).reject(t)}get textDivs(){return u(this,mo)}get textContentItemsStr(){return u(this,ad)}static cleanup(){if(!(u(this,yu).size>0)){u(this,vu).clear();for(const{canvas:t}of u(this,vo).values())t.remove();u(this,vo).clear()}}};Ws=new WeakMap,Sn=new WeakMap,nd=new WeakMap,rd=new WeakMap,po=new WeakMap,$i=new WeakMap,id=new WeakMap,sd=new WeakMap,go=new WeakMap,fu=new WeakMap,pu=new WeakMap,Vs=new WeakMap,gu=new WeakMap,ad=new WeakMap,mu=new WeakMap,mo=new WeakMap,od=new WeakMap,ld=new WeakMap,vu=new WeakMap,vo=new WeakMap,ud=new WeakMap,Gs=new WeakMap,yu=new WeakMap,vs=new WeakSet,XS=function(t){var i,s;if(u(this,nd))return;(s=u(this,$i)).ctx??(s.ctx=I(i=Ae,Jn,ip).call(i,u(this,po)));const e=u(this,mo),n=u(this,ad);for(const a of t){if(e.length>ZT){At("Ignoring additional textDivs for performance reasons."),S(this,nd,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=u(this,Sn);S(this,Sn,document.createElement("span")),u(this,Sn).classList.add("markedContent"),a.id&&u(this,Sn).setAttribute("id",`${a.id}`),o.append(u(this,Sn))}else a.type==="endMarkedContent"&&S(this,Sn,u(this,Sn).parentNode);continue}n.push(a.str),I(this,vs,YS).call(this,a)}},YS=function(t){var g;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};u(this,mo).push(e);const i=vt.transform(u(this,ld),t.transform);let s=Math.atan2(i[1],i[0]);const a=u(this,gu)[t.fontName];a.vertical&&(s+=Math.PI/2);let o=u(this,rd)&&a.fontSubstitution||a.fontFamily;o=Ae.fontFamilyMap.get(o)||o;const l=Math.hypot(i[2],i[3]),c=l*I(g=Ae,Jn,ZS).call(g,o,a,u(this,po));let h,d;s===0?(h=i[4],d=i[5]-c):(h=i[4]+c*Math.sin(s),d=i[5]-c*Math.cos(s));const f="calc(var(--total-scale-factor) *",p=e.style;u(this,Sn)===u(this,fu)?(p.left=`${(100*h/u(this,sd)).toFixed(2)}%`,p.top=`${(100*d/u(this,id)).toFixed(2)}%`):(p.left=`${f}${h.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(u(Ae,Gs)*l).toFixed(2)}px)`,p.fontFamily=o,n.fontSize=l,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,u(this,rd)&&(e.dataset.fontName=a.fontSubstitutionLoadedName||t.fontName),s!==0&&(n.angle=s*(180/Math.PI));let v=!1;if(t.str.length>1)v=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const A=Math.abs(t.transform[0]),m=Math.abs(t.transform[3]);A!==m&&Math.max(A,m)/Math.min(A,m)>1.5&&(v=!0)}if(v&&(n.canvasWidth=a.vertical?t.height:t.width),u(this,od).set(e,n),u(this,$i).div=e,u(this,$i).properties=n,I(this,vs,ty).call(this,u(this,$i)),n.hasText&&u(this,Sn).append(e),n.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),u(this,Sn).append(A)}},ty=function(t){var o;const{div:e,properties:n,ctx:i}=t,{style:s}=e;let a="";if(u(Ae,Gs)>1&&(a=`scale(${1/u(Ae,Gs)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:l}=s,{canvasWidth:c,fontSize:h}=n;I(o=Ae,Jn,ey).call(o,i,h*u(this,Vs),l);const{width:d}=i.measureText(e.textContent);d>0&&(a=`scaleX(${c*u(this,Vs)/d}) ${a}`)}n.angle!==0&&(a=`rotate(${n.angle}deg) ${a}`),a.length>0&&(s.transform=a)},Jn=new WeakSet,ip=function(t=null){let e=u(this,vo).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,vo).set(t,e),u(this,ud).set(e,{size:0,family:""})}return e},ey=function(t,e,n){const i=u(this,ud).get(t);e===i.size&&n===i.family||(t.font=`${e}px ${n}`,i.size=e,i.family=n)},KS=function(){if(u(this,Gs)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),S(this,Gs,t.getBoundingClientRect().height),t.remove()},ZS=function(t,e,n){const i=u(this,vu).get(t);if(i)return i;const s=I(this,Jn,ip).call(this,n);s.canvas.width=s.canvas.height=Tw,I(this,Jn,ey).call(this,s,Tw,t);const a=s.measureText(""),o=a.fontBoundingBoxAscent,l=Math.abs(a.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let c=.8;return o?c=o/(o+l):(Xe.platform.isFirefox&&At("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?c=e.ascent:e.descent&&(c=1+e.descent)),u(this,vu).set(t,c),c},k(Ae,Jn),k(Ae,vu,new Map),k(Ae,vo,new Map),k(Ae,ud,new WeakMap),k(Ae,Gs,null),k(Ae,yu,new Set);let vh=Ae;class yh{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function i(s){var l;if(!s)return;let a=null;const o=s.name;if(o==="#text")a=s.value;else if(yh.shouldBuildText(o))(l=s==null?void 0:s.attributes)!=null&&l.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&e.push({str:a}),!!s.children)for(const c of s.children)i(c)}return i(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const QT=100;function QS(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const t=new ny,{docId:e}=t,n=r.url?aT(r.url):null,i=r.data?oT(r.data):null,s=r.httpHeaders||null,a=r.withCredentials===!0,o=r.password??null,l=r.range instanceof JS?r.range:null,c=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16;let h=r.worker instanceof wh?r.worker:null;const d=r.verbosity,f=typeof r.docBaseUrl=="string"&&!Wg(r.docBaseUrl)?r.docBaseUrl:null,p=_f(r.cMapUrl),v=r.cMapPacked!==!1,g=r.CMapReaderFactory||(hn?gT:pw),A=_f(r.iccUrl),m=_f(r.standardFontDataUrl),y=r.StandardFontDataFactory||(hn?mT:gw),w=_f(r.wasmUrl),b=r.WasmFactory||(hn?vT:mw),E=r.stopAtErrors!==!0,T=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,R=r.isEvalSupported!==!1,P=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!hn,_=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!hn&&(Xe.platform.isFirefox||!globalThis.chrome),N=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,B=typeof r.disableFontFace=="boolean"?r.disableFontFace:hn,O=r.fontExtraProperties===!0,M=r.enableXfa===!0,x=r.ownerDocument||globalThis.document,$=r.disableRange===!0,X=r.disableStream===!0,F=r.disableAutoFetch===!0,W=r.pdfBug===!0,H=r.CanvasFactory||(hn?pT:hT),Z=r.FilterFactory||(hn?fT:dT),j=r.enableHWA===!0,z=r.useWasm!==!1,st=l?l.length:r.length??NaN,tt=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!hn&&!B,et=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(g===pw&&y===gw&&b===mw&&p&&m&&w&&Tc(p,document.baseURI)&&Tc(m,document.baseURI)&&Tc(w,document.baseURI)),J=null;zC(d);const K={canvasFactory:new H({ownerDocument:x,enableHWA:j}),filterFactory:new Z({docId:e,ownerDocument:x}),cMapReaderFactory:et?null:new g({baseUrl:p,isCompressed:v}),standardFontDataFactory:et?null:new y({baseUrl:m}),wasmFactory:et?null:new b({baseUrl:w})};h||(h=wh.create({verbosity:d,port:mi.workerPort}),t._worker=h);const Q={docId:e,apiVersion:"5.4.54",data:i,password:o,disableAutoFetch:F,rangeChunkSize:c,length:st,docBaseUrl:f,enableXfa:M,evaluatorOptions:{maxImageSize:T,disableFontFace:B,ignoreErrors:E,isEvalSupported:R,isOffscreenCanvasSupported:P,isImageDecoderSupported:_,canvasMaxAreaInBytes:N,fontExtraProperties:O,useSystemFonts:tt,useWasm:z,useWorkerFetch:et,cMapUrl:p,iccUrl:A,standardFontDataUrl:m,wasmUrl:w}},ct={ownerDocument:x,pdfBug:W,styleElement:J,loadingParams:{disableAutoFetch:F,enableXfa:M}};return h.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const bt=h.messageHandler.sendWithPromise("GetDocRequest",Q,i?[i.buffer]:null);let ut;if(l)ut=new LT(l,{disableRange:$,disableStream:X});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Rt=Tc(n)?FT:hn?XT:HT;ut=new Rt({url:n,length:st,httpHeaders:s,withCredentials:a,rangeChunkSize:c,disableRange:$,disableStream:X})}return bt.then(Rt=>{if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const It=new Pc(e,Rt,h.port),C=new tk(It,t,ut,ct,K,j);t._transport=C,It.send("Ready",null)})}).catch(t._capability.reject),t}var gg;const mg=class mg{constructor(){it(this,"_capability",Promise.withResolvers());it(this,"_transport",null);it(this,"_worker",null);it(this,"docId",`d${sn(mg,gg)._++}`);it(this,"destroyed",!1);it(this,"onPassword",null);it(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,n,i;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(s){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,s}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};gg=new WeakMap,k(mg,gg,0);let ny=mg;var yo,cd,hd,dd,fd;class JS{constructor(t,e,n=!1,i=null){k(this,yo,Promise.withResolvers());k(this,cd,[]);k(this,hd,[]);k(this,dd,[]);k(this,fd,[]);this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(t){u(this,fd).push(t)}addProgressListener(t){u(this,dd).push(t)}addProgressiveReadListener(t){u(this,hd).push(t)}addProgressiveDoneListener(t){u(this,cd).push(t)}onDataRange(t,e){for(const n of u(this,fd))n(t,e)}onDataProgress(t,e){u(this,yo).promise.then(()=>{for(const n of u(this,dd))n(t,e)})}onDataProgressiveRead(t){u(this,yo).promise.then(()=>{for(const e of u(this,hd))e(t)})}onDataProgressiveDone(){u(this,yo).promise.then(()=>{for(const t of u(this,cd))t()})}transportReady(){u(this,yo).resolve()}requestDataRange(t,e){Wt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}yo=new WeakMap,cd=new WeakMap,hd=new WeakMap,dd=new WeakMap,fd=new WeakMap;class JT{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return kt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Wi,wo,Mc;class qT{constructor(t,e,n,i=!1){k(this,wo);k(this,Wi,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new hw:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new GS,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:s=!1}={}){return new nf({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:s})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return kt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:i="display",annotationMode:s=Cs.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:h=null,printAnnotationStorage:d=null,isEditing:f=!1}){var E,T;(E=this._stats)==null||E.time("Overall");const p=this._transport.getRenderingIntent(i,s,d,f),{renderingIntent:v,cacheKey:g}=p;S(this,Wi,!1),l||(l=this._transport.getOptionalContentConfig(v));let A=this._intentStates.get(g);A||(A=Object.create(null),this._intentStates.set(g,A)),A.streamReaderCancelTimeout&&(clearTimeout(A.streamReaderCancelTimeout),A.streamReaderCancelTimeout=null);const m=!!(v&Gn.PRINT);A.displayReadyCapability||(A.displayReadyCapability=Promise.withResolvers(),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(T=this._stats)==null||T.time("Page Request"),this._pumpOperatorList(p));const y=R=>{var P;A.renderTasks.delete(w),m&&S(this,Wi,!0),I(this,wo,Mc).call(this),R?(w.capability.reject(R),this._abortOperatorList({intentState:A,reason:R instanceof Error?R:new Error(R)})):w.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(P=globalThis.Stats)!=null&&P.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},w=new ry({callback:y,params:{canvas:e,canvasContext:t,viewport:n,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:A.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!m,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA});(A.renderTasks||(A.renderTasks=new Set)).add(w);const b=w.task;return Promise.all([A.displayReadyCapability.promise,l]).then(([R,P])=>{var _;if(this.destroyed){y();return}if((_=this._stats)==null||_.time("Rendering"),!(P.renderingIntent&v))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");w.initializeGraphics({transparency:R,optionalContentConfig:P}),w.operatorListChanged()}).catch(y),b}getOperatorList({intent:t="display",annotationMode:e=Cs.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){var c;function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(t,e,n,i,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>yh.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,i){function s(){a.read().then(function({value:l,done:c}){if(c){n(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),s()},i)}const a=e.getReader(),o={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),S(this,Wi,!1),Promise.all(t)}cleanup(t=!1){S(this,Wi,!0);const e=I(this,wo,Mc).call(this);return t&&e&&this._stats&&(this._stats=new hw),e}_startRenderPage(t,e){var i,s;const n=this._intentStates.get(e);n&&((i=this._stats)==null||i.timeEnd("Page Request"),(s=n.displayReadyCapability)==null||s.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&I(this,wo,Mc).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:i}){const{map:s,transfer:a}=n,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:s,modifiedIds:i},a).getReader(),c=this._intentStates.get(e);c.streamReader=l;const h=()=>{l.read().then(({value:d,done:f})=>{if(f){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,c),h())},d=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const f of c.renderTasks)f.operatorListChanged();I(this,wo,Mc).call(this)}if(c.displayReadyCapability)c.displayReadyCapability.reject(d);else if(c.opListReadCapability)c.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof M0){let i=QT;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new Ta(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,s]of this._intentStates)if(s===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}Wi=new WeakMap,wo=new WeakSet,Mc=function(){if(!u(this,Wi)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),S(this,Wi,!1),!0};var Xs,Rr,Vi,Ao,vg,bo,So,pn,sp,qS,tE,Fc,wu,ap;const Qt=class Qt{constructor({name:t=null,port:e=null,verbosity:n=BC()}={}){k(this,pn);k(this,Xs,Promise.withResolvers());k(this,Rr,null);k(this,Vi,null);k(this,Ao,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(u(Qt,So).has(e))throw new Error("Cannot use more than one PDFWorker per port.");u(Qt,So).set(e,this),I(this,pn,qS).call(this,e)}else I(this,pn,tE).call(this)}get promise(){return u(this,Xs).promise}get port(){return u(this,Vi)}get messageHandler(){return u(this,Rr)}destroy(){var t,e;this.destroyed=!0,(t=u(this,Ao))==null||t.terminate(),S(this,Ao,null),u(Qt,So).delete(u(this,Vi)),S(this,Vi,null),(e=u(this,Rr))==null||e.destroy(),S(this,Rr,null)}static create(t){const e=u(this,So).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Qt(t)}static get workerSrc(){if(mi.workerSrc)return mi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return kt(this,"_setupFakeWorkerGlobal",(async()=>u(this,wu,ap)?u(this,wu,ap):(await import(this.workerSrc)).WorkerMessageHandler)())}};Xs=new WeakMap,Rr=new WeakMap,Vi=new WeakMap,Ao=new WeakMap,vg=new WeakMap,bo=new WeakMap,So=new WeakMap,pn=new WeakSet,sp=function(){u(this,Xs).resolve(),u(this,Rr).send("configure",{verbosity:this.verbosity})},qS=function(t){S(this,Vi,t),S(this,Rr,new Pc("main","worker",t)),u(this,Rr).on("ready",()=>{}),I(this,pn,sp).call(this)},tE=function(){if(u(Qt,bo)||u(Qt,wu,ap)){I(this,pn,Fc).call(this);return}let{workerSrc:t}=Qt;try{Qt._isSameOrigin(window.location,t)||(t=Qt._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new Pc("main","worker",e),i=()=>{s.abort(),n.destroy(),e.terminate(),this.destroyed?u(this,Xs).reject(new Error("Worker was destroyed")):I(this,pn,Fc).call(this)},s=new AbortController;e.addEventListener("error",()=>{u(this,Ao)||i()},{signal:s.signal}),n.on("test",o=>{if(s.abort(),this.destroyed||!o){i();return}S(this,Rr,n),S(this,Vi,e),S(this,Ao,e),I(this,pn,sp).call(this)}),n.on("ready",o=>{if(s.abort(),this.destroyed){i();return}try{a()}catch{I(this,pn,Fc).call(this)}});const a=()=>{const o=new Uint8Array;n.send("test",o,[o.buffer])};a();return}catch{$g("The worker has been disabled.")}I(this,pn,Fc).call(this)},Fc=function(){u(Qt,bo)||(At("Setting up fake worker."),S(Qt,bo,!0)),Qt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){u(this,Xs).reject(new Error("Worker was destroyed"));return}const e=new cT;S(this,Vi,e);const n=`fake${sn(Qt,vg)._++}`,i=new Pc(n+"_worker",n,e);t.setup(i,e),S(this,Rr,new Pc(n,n+"_worker",e)),I(this,pn,sp).call(this)}).catch(t=>{u(this,Xs).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},wu=new WeakSet,ap=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},k(Qt,wu),k(Qt,vg,0),k(Qt,bo,!1),k(Qt,So,new WeakMap),hn&&(S(Qt,bo,!0),mi.workerSrc||(mi.workerSrc="./pdf.worker.mjs")),Qt._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const i=new URL(e,n);return n.origin===i.origin},Qt._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Qt.fromPort=t=>{if(QC("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Qt.create(t)};let wh=Qt;var Gi,si,Au,bu,Xi,Eo,zc;class tk{constructor(t,e,n,i,s,a){k(this,Eo);k(this,Gi,new Map);k(this,si,new Map);k(this,Au,new Map);k(this,bu,new Map);k(this,Xi,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new GS,this.fontLoader=new iT({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}get annotationStorage(){return kt(this,"annotationStorage",new z0)}getRenderingIntent(t,e=Cs.ENABLE,n=null,i=!1,s=!1){let a=Gn.DISPLAY,o=$v;switch(t){case"any":a=Gn.ANY;break;case"display":break;case"print":a=Gn.PRINT;break;default:At(`getRenderingIntent - invalid intent: ${t}`)}const l=a&Gn.PRINT&&n instanceof _S?n:this.annotationStorage;switch(e){case Cs.DISABLE:a+=Gn.ANNOTATIONS_DISABLE;break;case Cs.ENABLE:break;case Cs.ENABLE_FORMS:a+=Gn.ANNOTATIONS_FORMS;break;case Cs.ENABLE_STORAGE:a+=Gn.ANNOTATIONS_STORAGE,o=l.serializable;break;default:At(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(a+=Gn.IS_EDITING),s&&(a+=Gn.OPLIST);const{ids:c,hash:h}=l.modifiedIds,d=[a,o.hash,h];return{renderingIntent:a,cacheKey:d.join("_"),annotationStorageSerializable:o,modifiedIds:c}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=u(this,Xi))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of u(this,si).values())t.push(i._destroy());u(this,si).clear(),u(this,Au).clear(),u(this,bu).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var i,s;this.commonObjs.clear(),this.fontLoader.clear(),u(this,Gi).clear(),this.filterFactory.destroy(),vh.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new Ta("Worker was terminated.")),(s=this.messageHandler)==null||s.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,i)=>{ye(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},i.onPull=()=>{this._fullReader.read().then(function({value:s,done:a}){if(a){i.close();return}ye(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{this._fullReader.cancel(s),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("ReaderHeadersReady",async n=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:s,contentLength:a}=this._fullReader;return(!i||!s)&&(this._lastProgress&&((o=e.onProgress)==null||o.call(e,this._lastProgress)),this._fullReader.onProgress=l=>{var c;(c=e.onProgress)==null||c.call(e,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:i,isRangeSupported:s,contentLength:a}}),t.on("GetRangeReader",(n,i)=>{ye(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(n.begin,n.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:a,done:o}){if(o){i.close();return}ye(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{s.cancel(a),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new JT(n,this))}),t.on("DocException",n=>{e._capability.reject(wn(n))}),t.on("PasswordRequest",n=>{S(this,Xi,Promise.withResolvers());try{if(!e.onPassword)throw wn(n);const i=s=>{s instanceof Error?u(this,Xi).reject(s):u(this,Xi).resolve({password:s})};e.onPassword(i,n.code)}catch(i){u(this,Xi).reject(i)}return u(this,Xi).promise}),t.on("DataLoaded",n=>{var i;(i=e.onProgress)==null||i.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;u(this,si).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,i,s])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in s){const h=s.error;At(`Error during font loading: ${h}`),this.commonObjs.resolve(n,h);break}const o=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(h,d)=>globalThis.FontInspector.fontAdded(h,d):null,l=new sT(s,o);this.fontLoader.bind(l).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!l.fontExtraProperties&&l.data&&(l.data=null),this.commonObjs.resolve(n,l)});break;case"CopyLocalImage":const{imageRef:c}=s;ye(c,"The imageRef must be defined.");for(const h of u(this,si).values())for(const[,d]of h.objs)if((d==null?void 0:d.ref)===c)return d.dataLen?(this.commonObjs.resolve(n,structuredClone(d)),d.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,s);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([n,i,s,a])=>{var l;if(this.destroyed)return;const o=u(this,si).get(i);if(!o.objs.has(n)){if(o._intentStates.size===0){(l=a==null?void 0:a.bitmap)==null||l.close();return}switch(s){case"Image":case"Pattern":o.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),t.on("DocProgress",n=>{var i;this.destroyed||(i=e.onProgress)==null||i.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&At("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=u(this,Au).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&u(this,bu).set(s.refStr,t);const a=new qT(e,s,this,this._params.pdfBug);return u(this,si).set(e,a),a});return u(this,Au).set(e,i),i}getPageIndex(t){return Wv(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return I(this,Eo,zc).call(this,"GetFieldObjects")}hasJSActions(){return I(this,Eo,zc).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return I(this,Eo,zc).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return I(this,Eo,zc).call(this,"GetOptionalContentConfig").then(e=>new OT(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=u(this,Gi).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(i=>{var s,a;return{info:i[0],metadata:i[1]?new _T(i[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return u(this,Gi).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of u(this,si).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),u(this,Gi).clear(),this.filterFactory.destroy(!0),vh.cleanup()}}cachedPageNumber(t){if(!Wv(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return u(this,bu).get(e)??null}}Gi=new WeakMap,si=new WeakMap,Au=new WeakMap,bu=new WeakMap,Xi=new WeakMap,Eo=new WeakSet,zc=function(t,e=null){const n=u(this,Gi).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise(t,e);return u(this,Gi).set(t,i),i};var Ys;class ek{constructor(t){k(this,Ys,null);it(this,"onContinue",null);it(this,"onError",null);S(this,Ys,t)}get promise(){return u(this,Ys).capability.promise}cancel(t=0){u(this,Ys).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=u(this,Ys).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=u(this,Ys);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Ys=new WeakMap;var Ks,xo;const ja=class ja{constructor({callback:t,params:e,objs:n,commonObjs:i,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null,enableHWA:p=!1}){k(this,Ks,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new ek(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=p}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var o,l;if(this.cancelled)return;if(this._canvas){if(u(ja,xo).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(ja,xo).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:i,background:s}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Ul(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:n,transparency:t,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(t=null,e=0){var n,i,s;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),u(this,Ks)&&(window.cancelAnimationFrame(u(this,Ks)),S(this,Ks,null)),u(ja,xo).delete(this._canvas),t||(t=new M0(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(s=(i=this.task).onError)==null||s.call(i,t)}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?S(this,Ks,window.requestAnimationFrame(()=>{S(this,Ks,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(ja,xo).delete(this._canvas),this.callback())))}};Ks=new WeakMap,xo=new WeakMap,k(ja,xo,new WeakSet);let ry=ja;const nk="5.4.54",rk="295fb3ec4";var Dn,Co,Su,Ee,pd,Eu,Yi,gd,Zs,Ir,md,$t,iy,sy,ay,Ma,eE,As;const An=class An{constructor({editor:t=null,uiManager:e=null}){k(this,$t);k(this,Dn,null);k(this,Co,null);k(this,Su);k(this,Ee,null);k(this,pd,!1);k(this,Eu,!1);k(this,Yi,null);k(this,gd);k(this,Zs,null);k(this,Ir,null);var n,i;t?(S(this,Eu,!1),S(this,Yi,t)):S(this,Eu,!0),S(this,Ir,(t==null?void 0:t._uiManager)||e),S(this,gd,u(this,Ir)._eventBus),S(this,Su,((n=t==null?void 0:t.color)==null?void 0:n.toUpperCase())||((i=u(this,Ir))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),u(An,md)||S(An,md,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return kt(this,"_keyboardManager",new rf([[["Escape","mac+Escape"],An.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],An.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],An.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],An.prototype._moveToPrevious],[["Home","mac+Home"],An.prototype._moveToBeginning],[["End","mac+End"],An.prototype._moveToEnd]]))}renderButton(){const t=S(this,Dn,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",u(this,Yi)&&(t.ariaControls=`${u(this,Yi).id}_colorpicker_dropdown`);const e=u(this,Ir)._signal;t.addEventListener("click",I(this,$t,Ma).bind(this),{signal:e}),t.addEventListener("keydown",I(this,$t,ay).bind(this),{signal:e});const n=S(this,Co,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=u(this,Su),t.append(n),t}renderMainDropdown(){const t=S(this,Ee,I(this,$t,iy).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===u(this,Dn)){I(this,$t,Ma).call(this,t);return}const e=t.target.getAttribute("data-color");e&&I(this,$t,sy).call(this,e,t)}_moveToNext(t){var e,n;if(!u(this,$t,As)){I(this,$t,Ma).call(this,t);return}if(t.target===u(this,Dn)){(e=u(this,Ee).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=u(this,Ee))==null?void 0:e.firstChild)||t.target===u(this,Dn)){u(this,$t,As)&&this._hideDropdownFromKeyboard();return}u(this,$t,As)||I(this,$t,Ma).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!u(this,$t,As)){I(this,$t,Ma).call(this,t);return}(e=u(this,Ee).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!u(this,$t,As)){I(this,$t,Ma).call(this,t);return}(e=u(this,Ee).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=u(this,Ee))==null||t.classList.add("hidden"),u(this,Dn).ariaExpanded="false",(e=u(this,Zs))==null||e.abort(),S(this,Zs,null)}_hideDropdownFromKeyboard(){var t;if(!u(this,Eu)){if(!u(this,$t,As)){(t=u(this,Yi))==null||t.unselect();return}this.hideDropdown(),u(this,Dn).focus({preventScroll:!0,focusVisible:u(this,pd)})}}updateColor(t){if(u(this,Co)&&(u(this,Co).style.backgroundColor=t),!u(this,Ee))return;const e=u(this,Ir).highlightColors.values();for(const n of u(this,Ee).children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;(t=u(this,Dn))==null||t.remove(),S(this,Dn,null),S(this,Co,null),(e=u(this,Ee))==null||e.remove(),S(this,Ee,null)}};Dn=new WeakMap,Co=new WeakMap,Su=new WeakMap,Ee=new WeakMap,pd=new WeakMap,Eu=new WeakMap,Yi=new WeakMap,gd=new WeakMap,Zs=new WeakMap,Ir=new WeakMap,md=new WeakMap,$t=new WeakSet,iy=function(){const t=document.createElement("div"),e=u(this,Ir)._signal;t.addEventListener("contextmenu",Ar,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),u(this,Yi)&&(t.id=`${u(this,Yi).id}_colorpicker_dropdown`);for(const[n,i]of u(this,Ir).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=n,s.setAttribute("data-l10n-id",u(An,md)[n]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=i,s.ariaSelected=i===u(this,Su),s.addEventListener("click",I(this,$t,sy).bind(this,i),{signal:e}),t.append(s)}return t.addEventListener("keydown",I(this,$t,ay).bind(this),{signal:e}),t},sy=function(t,e){e.stopPropagation(),u(this,gd).dispatch("switchannotationeditorparams",{source:this,type:Pt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},ay=function(t){An._keyboardManager.exec(this,t)},Ma=function(t){if(u(this,$t,As)){this.hideDropdown();return}if(S(this,pd,t.detail===0),u(this,Zs)||(S(this,Zs,new AbortController),window.addEventListener("pointerdown",I(this,$t,eE).bind(this),{signal:u(this,Ir).combinedSignal(u(this,Zs))})),u(this,Dn).ariaExpanded="true",u(this,Ee)){u(this,Ee).classList.remove("hidden");return}const e=S(this,Ee,I(this,$t,iy).call(this));u(this,Dn).append(e)},eE=function(t){var e;(e=u(this,Ee))!=null&&e.contains(t.target)||this.hideDropdown()},As=function(){return u(this,Ee)&&!u(this,Ee).classList.contains("hidden")},k(An,md,null);let tg=An;var ai,vd,xu,yd;const Ua=class Ua{constructor(t){k(this,ai,null);k(this,vd,null);k(this,xu,null);S(this,vd,t),S(this,xu,t._uiManager),u(Ua,yd)||S(Ua,yd,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(u(this,ai))return u(this,ai);const{editorType:t,colorType:e,colorValue:n}=u(this,vd),i=S(this,ai,document.createElement("input"));return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",u(Ua,yd)[t]),i.addEventListener("input",()=>{u(this,xu).updateParams(e,i.value)},{signal:u(this,xu)._signal}),i}update(t){u(this,ai)&&(u(this,ai).value=t)}destroy(){var t;(t=u(this,ai))==null||t.remove(),S(this,ai,null)}hideDropdown(){}};ai=new WeakMap,vd=new WeakMap,xu=new WeakMap,yd=new WeakMap,k(Ua,yd,null);let eg=Ua;Ot(531);function kw(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function Ac(r){return Math.max(0,Math.min(255,255*r))}class Rw{static CMYK_G([t,e,n,i]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Ac(t),[t,t,t]}static G_HTML([t]){const e=kw(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Ac)}static RGB_HTML(t){return`#${t.map(kw).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,n+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,n,i]){return[Ac(1-Math.min(1,t+i)),Ac(1-Math.min(1,n+i)),Ac(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const i=1-t,s=1-e,a=1-n,o=Math.min(i,s,a);return["CMYK",i,s,a,o]}}class ik{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Wt("Abstract method `_createSVG` called.")}}class ng extends ik{_createSVG(t){return document.createElementNS(Si,t)}}class nE{static setupStorage(t,e,n,i,s){const a=i.getValue(e,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(t.textContent=a.value),s==="print")break;t.addEventListener("input",o=>{i.setValue(e,{value:o.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?t.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&t.removeAttribute("checked"),s==="print")break;t.addEventListener("change",o=>{i.setValue(e,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&t.setAttribute("value",a.value),s==="print")break;t.addEventListener("input",o=>{i.setValue(e,{value:o.target.value})})}break;case"select":if(a.value!==null){t.setAttribute("value",a.value);for(const o of n.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}t.addEventListener("input",o=>{const l=o.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(e,{value:c})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:i,linkService:s}){const{attributes:a}=e,o=t instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${i}`);for(const[l,c]of Object.entries(a))if(c!=null)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!o||l!=="href"&&l!=="newWindow")&&t.setAttribute(l,c)}o&&s.addLinkAttributes(t,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(t,a.dataId,e,n)}static render(t){var d,f;const e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,s=t.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:s,linkService:n});const o=s!=="richText",l=t.div;if(l.append(a),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=p}o&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(i.children.length===0){if(i.value){const p=document.createTextNode(i.value);a.append(p),o&&yh.shouldBuildText(i.name)&&c.push(p)}return{textDivs:c}}const h=[[i,-1,a]];for(;h.length>0;){const[p,v,g]=h.at(-1);if(v+1===p.children.length){h.pop();continue}const A=p.children[++h.at(-1)[1]];if(A===null)continue;const{name:m}=A;if(m==="#text"){const w=document.createTextNode(A.value);c.push(w),g.append(w);continue}const y=(d=A==null?void 0:A.attributes)!=null&&d.xmlns?document.createElementNS(A.attributes.xmlns,m):document.createElement(m);if(g.append(y),A.attributes&&this.setAttributes({html:y,element:A,storage:e,intent:s,linkService:n}),((f=A.children)==null?void 0:f.length)>0)h.push([A,-1,y]);else if(A.value){const w=document.createTextNode(A.value);o&&yh.shouldBuildText(m)&&c.push(w),y.append(w)}}for(const p of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:c}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const sk=9,al=new WeakSet,ak=new Date().getTimezoneOffset()*60*1e3;class Iw{static create(t){switch(t.data.annotationType){case ge.LINK:return new U0(t);case ge.TEXT:return new ok(t);case ge.WIDGET:switch(t.data.fieldType){case"Tx":return new lk(t);case"Btn":return t.data.radioButton?new sE(t):t.data.checkBox?new ck(t):new hk(t);case"Ch":return new dk(t);case"Sig":return new uk(t)}return new cl(t);case ge.POPUP:return new ly(t);case ge.FREETEXT:return new cE(t);case ge.LINE:return new pk(t);case ge.SQUARE:return new gk(t);case ge.CIRCLE:return new mk(t);case ge.POLYLINE:return new hE(t);case ge.CARET:return new yk(t);case ge.INK:return new H0(t);case ge.POLYGON:return new vk(t);case ge.HIGHLIGHT:return new dE(t);case ge.UNDERLINE:return new wk(t);case ge.SQUIGGLY:return new Ak(t);case ge.STRIKEOUT:return new bk(t);case ge.STAMP:return new fE(t);case ge.FILEATTACHMENT:return new Sk(t);default:return new fe(t)}}}var To,Cu,Ki,wd,oy;const Y0=class Y0{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){k(this,wd);k(this,To,null);k(this,Cu,!1);k(this,Ki,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t!=null&&t.str||e!=null&&e.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Y0._hasPopupData(this.data)}updateEdited(t){var s;if(!this.container)return;t.rect&&(u(this,To)||S(this,To,{rect:this.data.rect.slice(0)}));const{rect:e,popup:n}=t;e&&I(this,wd,oy).call(this,e);let i=((s=u(this,Ki))==null?void 0:s.popup)||this.popup;!i&&(n!=null&&n.text)&&(this._createPopup(n),i=u(this,Ki).popup),i&&(i.updateEdited(t),n!=null&&n.deleted&&(i.remove(),S(this,Ki,null),this.popup=null))}resetEdited(){var t;u(this,To)&&(I(this,wd,oy).call(this,u(this,To).rect),(t=u(this,Ki))==null||t.popup.resetEdited(),S(this,To,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",e.id),!(this instanceof cl)&&!(this instanceof U0)&&(s.tabIndex=0);const{style:a}=s;if(a.zIndex=this.parent.zIndex++,e.alternativeText&&(s.title=e.alternativeText),e.noRotate&&s.classList.add("norotate"),!e.rect||this instanceof ly){const{rotation:g}=e;return!e.hasOwnCanvas&&g!==0&&this.setRotation(g,s),s}const{width:o,height:l}=this;if(!t&&e.borderStyle.width>0){a.borderWidth=`${e.borderStyle.width}px`;const g=e.borderStyle.horizontalCornerRadius,A=e.borderStyle.verticalCornerRadius;if(g>0||A>0){const y=`calc(${g}px * var(--total-scale-factor)) / calc(${A}px * var(--total-scale-factor))`;a.borderRadius=y}else if(this instanceof sE){const y=`calc(${o}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;a.borderRadius=y}switch(e.borderStyle.style){case dl.SOLID:a.borderStyle="solid";break;case dl.DASHED:a.borderStyle="dashed";break;case dl.BEVELED:At("Unimplemented border style: beveled");break;case dl.INSET:At("Unimplemented border style: inset");break;case dl.UNDERLINE:a.borderBottomStyle="solid";break}const m=e.borderColor||null;m?(S(this,Cu,!0),a.borderColor=vt.makeHexColor(m[0]|0,m[1]|0,m[2]|0)):a.borderWidth=0}const c=vt.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=i.rawDims;a.left=`${100*(c[0]-f)/h}%`,a.top=`${100*(c[1]-p)/d}%`;const{rotation:v}=e;return e.hasOwnCanvas||v===0?(a.width=`${100*o/h}%`,a.height=`${100*l/d}%`):this.setRotation(v,s),s}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:s,height:a}=this;t%180!==0&&([s,a]=[a,s]),e.style.width=`${100*s/n}%`,e.style.height=`${100*a/i}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,i)=>{const s=i.detail[e],a=s[0],o=s.slice(1);i.target.style[n]=Rw[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[n]:Rw[`${a}_rgb`](o)})};return kt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const i of Object.keys(e.detail)){const s=t[i]||n[i];s==null||s(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[i,s]of Object.entries(e)){const a=n[i];if(a){const o={detail:{[i]:s},target:t};a(o),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,i,s]=this.data.rect.map(g=>Math.fround(g));if(t.length===8){const[g,A,m,y]=t.subarray(2,6);if(i===g&&s===A&&e===m&&n===y)return}const{style:a}=this.container;let o;if(u(this,Cu)){const{borderColor:g,borderWidth:A}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}const l=i-e,c=s-n,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),v=`clippath_${this.data.id}`;p.setAttribute("id",v),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let g=2,A=t.length;g<A;g+=8){const m=t[g],y=t[g+1],w=t[g+2],b=t[g+3],E=h.createElement("rect"),T=(w-e)/l,R=(s-y)/c,P=(m-w)/l,_=(y-b)/c;E.setAttribute("x",T),E.setAttribute("y",R),E.setAttribute("width",P),E.setAttribute("height",_),p.append(E),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${T}" y="${R}" width="${P}" height="${_}"/>`)}u(this,Cu)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(d),this.container.style.clipPath=`url(#${v})`}_createPopup(t=null){const{data:e}=this;let n,i;t?(n={str:t.text},i=t.date):(n=e.contentsObj,i=e.modificationDate);const s=S(this,Ki,new ly({data:{color:e.color,titleObj:e.titleObj,modificationDate:i,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent.div.append(s.render())}get hasPopupElement(){return!!(u(this,Ki)||this.popup||this.data.popupRef)}render(){Wt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:s,id:a,exportValues:o}of i){if(s===-1||a===e)continue;const l=typeof o=="string"?o:null,c=document.querySelector(`[data-element-id="${a}"]`);if(c&&!al.has(c)){At(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:l,domElement:c})}return n}for(const i of document.getElementsByName(t)){const{exportValue:s}=i,a=i.getAttribute("data-element-id");a!==e&&al.has(i)&&n.push({id:a,exportValue:s,domElement:i})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};To=new WeakMap,Cu=new WeakMap,Ki=new WeakMap,wd=new WeakSet,oy=function(t){const{container:{style:e},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}}}=this;n==null||n.splice(0,4,...t),e.left=`${100*(t[0]-o)/s}%`,e.top=`${100*(a-t[3]+l)/a}%`,i===0?(e.width=`${100*(t[2]-t[0])/s}%`,e.height=`${100*(t[3]-t[1])/a}%`):this.setRotation(i)};let fe=Y0;var Kn,Fa,rE,iE;class U0 extends fe{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});k(this,Kn);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let s=!1;return e.url?(n.addLinkAttributes(i,e.url,e.newWindow),s=!0):e.action?(this._bindNamedAction(i,e.action,e.overlaidText),s=!0):e.attachment?(I(this,Kn,rE).call(this,i,e.attachment,e.overlaidText,e.attachmentDest),s=!0):e.setOCGState?(I(this,Kn,iE).call(this,i,e.setOCGState,e.overlaidText),s=!0):e.dest?(this._bindLink(i,e.dest,e.overlaidText),s=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),s=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(i,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(i),this.container}_bindLink(e,n,i=""){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&I(this,Kn,Fa).call(this),i&&(e.title=i)}_bindNamedAction(e,n,i=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),i&&(e.title=i),I(this,Kn,Fa).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(n.actions)){const a=i.get(s);a&&(e[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:s}}),!1})}n.overlaidText&&(e.title=n.overlaidText),e.onclick||(e.onclick=()=>!1),I(this,Kn,Fa).call(this)}_bindResetFormAction(e,n){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),I(this,Kn,Fa).call(this),!this._fieldObjects){At('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{var d;i==null||i();const{fields:s,refs:a,include:o}=n,l=[];if(s.length!==0||a.length!==0){const f=new Set(a);for(const p of s){const v=this._fieldObjects[p]||[];for(const{id:g}of v)f.add(g)}for(const p of Object.values(this._fieldObjects))for(const v of p)f.has(v.id)===o&&l.push(v)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const c=this.annotationStorage,h=[];for(const f of l){const{id:p}=f;switch(h.push(p),f.type){case"text":{const g=f.defaultValue||"";c.setValue(p,{value:g});break}case"checkbox":case"radiobutton":{const g=f.defaultValue===f.exportValues;c.setValue(p,{value:g});break}case"combobox":case"listbox":{const g=f.defaultValue||"";c.setValue(p,{value:g});break}default:continue}const v=document.querySelector(`[data-element-id="${p}"]`);if(v){if(!al.has(v)){At(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}Kn=new WeakSet,Fa=function(){this.container.setAttribute("data-internal-link","")},rE=function(e,n,i="",s=null){e.href=this.linkService.getAnchorUrl(""),n.description?e.title=n.description:i&&(e.title=i),e.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(n.content,n.filename,s),!1},I(this,Kn,Fa).call(this)},iE=function(e,n,i=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),i&&(e.title=i),I(this,Kn,Fa).call(this)};class ok extends fe{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class cl extends fe{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Xe.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,i,s){n.includes("mouse")?t.addEventListener(n,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):t.addEventListener(n,a=>{var o;if(n==="blur"){if(!e.focused||!a.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}s&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(a)}}))})}_setEventListeners(t,e,n,i){var s,a,o;for(const[l,c]of n)(c==="Action"||(s=this.data.actions)!=null&&s[c])&&((c==="Focus"||c==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,l,c,i),c==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(t,e,"blur","Blur",null):c==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":vt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||sk,s=t.style;let a;const o=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o),h=Math.round(c/(Sm*i))||1,d=c/h;a=Math.min(i,l(d/Sm))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(i,l(c/Sm))}s.fontSize=`calc(${a}px * var(--total-scale-factor))`,s.color=vt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(s.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class lk extends cl{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,i){const s=this.annotationStorage;for(const a of this._getElementsByName(t.name,t.id))a.domElement&&(a.domElement[e]=n),s.setValue(a.id,{[i]:n})}render(){var i,s;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let o=a.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let c=a.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=c??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",c??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),al.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:d,datetimeType:f,timeStep:p}=this.data,v=!!f&&this.enableScripting;d&&(n.title=d),this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",A=>{t.setValue(e,{value:A.target.value}),this.setPropertyOnSiblings(n,"value",A.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",A=>{const m=this.data.defaultFieldValue??"";n.value=h.userValue=m,h.formattedValue=null});let g=A=>{const{formattedValue:m}=h;m!=null&&(A.target.value=m),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",m=>{var w;if(h.focused)return;const{target:y}=m;if(v&&(y.type=f,p&&(y.step=p)),h.userValue){const b=h.userValue;if(v)if(f==="time"){const E=new Date(b),T=[E.getHours(),E.getMinutes(),E.getSeconds()];y.value=T.map(R=>R.toString().padStart(2,"0")).join(":")}else y.value=new Date(b-ak).toISOString().split(f==="date"?"T":".",1)[0];else y.value=b}h.lastCommittedValue=y.value,h.commitKey=1,(w=this.data.actions)!=null&&w.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",m=>{this.showElementAndHideCanvas(m.target);const y={value(w){h.userValue=w.detail.value??"",v||t.setValue(e,{value:h.userValue.toString()}),w.target.value=h.userValue},formattedValue(w){const{formattedValue:b}=w.detail;h.formattedValue=b,b!=null&&w.target!==document.activeElement&&(w.target.value=b);const E={formattedValue:b};v&&(E.value=b),t.setValue(e,E)},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{var R;const{charLimit:b}=w.detail,{target:E}=w;if(b===0){E.removeAttribute("maxLength");return}E.setAttribute("maxLength",b);let T=h.userValue;!T||T.length<=b||(T=T.slice(0,b),E.value=h.userValue=T,t.setValue(e,{value:T}),(R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,willCommit:!0,commitKey:1,selStart:E.selectionStart,selEnd:E.selectionEnd}}))}};this._dispatchEventFromSandbox(y,m)}),n.addEventListener("keydown",m=>{var b;h.commitKey=1;let y=-1;if(m.key==="Escape"?y=0:m.key==="Enter"&&!this.data.multiLine?y=2:m.key==="Tab"&&(h.commitKey=3),y===-1)return;const{value:w}=m.target;h.lastCommittedValue!==w&&(h.lastCommittedValue=w,h.userValue=w,(b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:y,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}))});const A=g;g=null,n.addEventListener("blur",m=>{var b,E;if(!h.focused||!m.relatedTarget)return;(b=this.data.actions)!=null&&b.Blur||(h.focused=!1);const{target:y}=m;let{value:w}=y;if(v){if(w&&f==="time"){const T=w.split(":").map(R=>parseInt(R,10));w=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),y.step=""}else w=new Date(w).valueOf();y.type="text"}h.userValue=w,h.lastCommittedValue!==w&&((E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:h.commitKey,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}})),A(m)}),(s=this.data.actions)!=null&&s.Keystroke&&n.addEventListener("beforeinput",m=>{var _;h.lastCommittedValue=null;const{data:y,target:w}=m,{value:b,selectionStart:E,selectionEnd:T}=w;let R=E,P=T;switch(m.inputType){case"deleteWordBackward":{const N=b.substring(0,E).match(/\w*[^\w]*$/);N&&(R-=N[0].length);break}case"deleteWordForward":{const N=b.substring(E).match(/^[^\w]*\w*/);N&&(P+=N[0].length);break}case"deleteContentBackward":E===T&&(R-=1);break;case"deleteContentForward":E===T&&(P+=1);break}m.preventDefault(),(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:b,change:y||"",willCommit:!1,selStart:R,selEnd:P}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],m=>m.target.value)}if(g&&n.addEventListener("blur",g),this.data.comb){const m=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${m}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class uk extends cl{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class ck extends cl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return al.add(s),s.setAttribute("data-element-id",n),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=e.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",e.exportValue),s.tabIndex=0,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const c of this._getElementsByName(o,n)){const h=l&&c.exportValue===e.exportValue;c.domElement&&(c.domElement.checked=h),t.setValue(c.id,{value:h})}t.setValue(n,{value:l})}),s.addEventListener("resetform",a=>{const o=e.defaultFieldValue||"Off";a.target.checked=o===e.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",t.setValue(n,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class sE extends cl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(n,{value:i})),i)for(const a of this._getElementsByName(e.fieldName,n))t.setValue(a.id,{value:!1});const s=document.createElement("input");if(al.add(s),s.setAttribute("data-element-id",n),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=e.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const c of this._getElementsByName(o,n))t.setValue(c.id,{value:!1});t.setValue(n,{value:l})}),s.addEventListener("resetform",a=>{const o=e.defaultFieldValue;a.target.checked=o!=null&&o===e.buttonValue}),this.enableScripting&&this.hasJSActions){const a=e.buttonValue;s.addEventListener("updatefromsandbox",o=>{const l={value:c=>{const h=a===c.detail.value;for(const d of this._getElementsByName(c.target.name)){const f=h&&d.id===n;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class hk extends U0{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class dk extends cl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");al.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,n.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),s=!1),i.append(d)}let a=null;if(s){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),i.prepend(h),a=()=>{h.remove(),i.removeEventListener("input",a),a=null},i.addEventListener("input",a)}const o=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=i;return p?Array.prototype.filter.call(f,v=>v.selected).map(v=>v[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let l=o(!1);const c=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",h=>{const d={value(f){a==null||a();const p=f.detail.value,v=new Set(Array.isArray(p)?p:[p]);for(const g of i.options)g.selected=v.has(g.value);t.setValue(e,{value:o(!0)}),l=o(!1)},multipleSelection(f){i.multiple=!0},remove(f){const p=i.options,v=f.detail.remove;p[v].selected=!1,i.remove(v),p.length>0&&Array.prototype.findIndex.call(p,A=>A.selected)===-1&&(p[0].selected=!0),t.setValue(e,{value:o(!0),items:c(f)}),l=o(!1)},clear(f){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),l=o(!1)},insert(f){const{index:p,displayValue:v,exportValue:g}=f.detail.insert,A=i.children[p],m=document.createElement("option");m.textContent=v,m.value=g,A?A.before(m):i.append(m),t.setValue(e,{value:o(!0),items:c(f)}),l=o(!1)},items(f){const{items:p}=f.detail;for(;i.length!==0;)i.remove(0);for(const v of p){const{displayValue:g,exportValue:A}=v,m=document.createElement("option");m.textContent=g,m.value=A,i.append(m)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:o(!0),items:c(f)}),l=o(!1)},indices(f){const p=new Set(f.detail.indices);for(const v of f.target.options)v.selected=p.has(v.index);t.setValue(e,{value:o(!0)}),l=o(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),i.addEventListener("input",h=>{var p;const d=o(!0),f=o(!1);t.setValue(e,{value:d}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:l,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):i.addEventListener("input",function(h){t.setValue(e,{value:o(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class ly extends fe{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:fe._hasPopupData(e)}),this.elements=n,this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=new fk({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",n.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(i=>`${D0}${i}`).join(",")),this.container}}var Tu,yg,wg,ku,Ru,oe,Zi,Qs,Iu,Ad,_u,oi,Mn,Js,Qi,bd,Ji,Pu,ko,qs,Ft,op,lp,uy,aE,oE,lE,uE,up,cp,cy;class fk{constructor({container:t,color:e,elements:n,titleObj:i,modificationDate:s,contentsObj:a,richText:o,parent:l,rect:c,parentRect:h,open:d}){k(this,Ft);k(this,Tu,I(this,Ft,lE).bind(this));k(this,yg,I(this,Ft,cy).bind(this));k(this,wg,I(this,Ft,cp).bind(this));k(this,ku,I(this,Ft,up).bind(this));k(this,Ru,null);k(this,oe,null);k(this,Zi,null);k(this,Qs,null);k(this,Iu,null);k(this,Ad,null);k(this,_u,null);k(this,oi,!1);k(this,Mn,null);k(this,Js,null);k(this,Qi,null);k(this,bd,null);k(this,Ji,null);k(this,Pu,null);k(this,ko,null);k(this,qs,!1);S(this,oe,t),S(this,Pu,i),S(this,Zi,a),S(this,Ji,o),S(this,Ad,l),S(this,Ru,e),S(this,bd,c),S(this,_u,h),S(this,Iu,n),S(this,Qs,Qp.toDateObject(s)),this.trigger=n.flatMap(f=>f.getElementsToTriggerPopup()),I(this,Ft,op).call(this),u(this,oe).hidden=!0,d&&I(this,Ft,up).call(this)}render(){var i;if(u(this,Mn))return;const t=S(this,Mn,document.createElement("div"));if(t.className="popup",u(this,Ru)){const s=t.style.outlineColor=vt.makeHexColor(...u(this,Ru));t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const e=document.createElement("span");if(e.className="header",(i=u(this,Pu))!=null&&i.str){const s=document.createElement("span");s.className="title",e.append(s),{dir:s.dir,str:s.textContent}=u(this,Pu)}if(t.append(e),u(this,Qs)){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,Qs).valueOf()})),s.dateTime=u(this,Qs).toISOString(),e.append(s)}const n=u(this,Ft,lp);if(n)nE.render({xfaHtml:n,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(u(this,Zi));t.append(s)}u(this,oe).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const i=t.split(/(?:\r\n?|\n)/);for(let s=0,a=i.length;s<a;++s){const o=i[s];n.append(document.createTextNode(o)),s<a-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popup:e,deleted:n}){var i;if(n||e!=null&&e.deleted){this.remove();return}I(this,Ft,op).call(this),u(this,ko)||S(this,ko,{contentsObj:u(this,Zi),richText:u(this,Ji)}),t&&S(this,Qi,null),e&&(S(this,Ji,I(this,Ft,oE).call(this,e.text)),S(this,Qs,Qp.toDateObject(e.date)),S(this,Zi,null)),(i=u(this,Mn))==null||i.remove(),S(this,Mn,null)}resetEdited(){var t;u(this,ko)&&({contentsObj:sn(this,Zi)._,richText:sn(this,Ji)._}=u(this,ko),S(this,ko,null),(t=u(this,Mn))==null||t.remove(),S(this,Mn,null),S(this,Qi,null))}remove(){var t,e;(t=u(this,Js))==null||t.abort(),S(this,Js,null),(e=u(this,Mn))==null||e.remove(),S(this,Mn,null),S(this,qs,!1),S(this,oi,!1);for(const n of this.trigger)n.classList.remove("popupTriggerArea")}forceHide(){S(this,qs,this.isVisible),u(this,qs)&&(u(this,oe).hidden=!0)}maybeShow(){I(this,Ft,op).call(this),u(this,qs)&&(u(this,Mn)||I(this,Ft,cp).call(this),S(this,qs,!1),u(this,oe).hidden=!1)}get isVisible(){return u(this,oe).hidden===!1}}Tu=new WeakMap,yg=new WeakMap,wg=new WeakMap,ku=new WeakMap,Ru=new WeakMap,oe=new WeakMap,Zi=new WeakMap,Qs=new WeakMap,Iu=new WeakMap,Ad=new WeakMap,_u=new WeakMap,oi=new WeakMap,Mn=new WeakMap,Js=new WeakMap,Qi=new WeakMap,bd=new WeakMap,Ji=new WeakMap,Pu=new WeakMap,ko=new WeakMap,qs=new WeakMap,Ft=new WeakSet,op=function(){var e;if(u(this,Js))return;S(this,Js,new AbortController);const{signal:t}=u(this,Js);for(const n of this.trigger)n.addEventListener("click",u(this,ku),{signal:t}),n.addEventListener("mouseenter",u(this,wg),{signal:t}),n.addEventListener("mouseleave",u(this,yg),{signal:t}),n.classList.add("popupTriggerArea");for(const n of u(this,Iu))(e=n.container)==null||e.addEventListener("keydown",u(this,Tu),{signal:t})},lp=function(){const t=u(this,Ji),e=u(this,Zi);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&u(this,Ji).html||null},uy=function(){var t,e,n;return((n=(e=(t=u(this,Ft,lp))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},aE=function(){var t,e,n;return((n=(e=(t=u(this,Ft,lp))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},oE=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:u(this,Ft,aE),fontSize:u(this,Ft,uy)?`calc(${u(this,Ft,uy)}px * var(--total-scale-factor))`:""}};for(const s of t.split(`
`))e.push({name:"span",value:s,attributes:i});return n},lE=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&u(this,oi))&&I(this,Ft,up).call(this)},uE=function(){if(u(this,Qi)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:i,pageY:s}}}=u(this,Ad);let a=!!u(this,_u),o=a?u(this,_u):u(this,bd);for(const v of u(this,Iu))if(!o||vt.intersect(v.data.rect,o)!==null){o=v.data.rect,a=!0;break}const l=vt.normalizeRect([o[0],t[3]-o[1]+t[1],o[2],t[3]-o[3]+t[1]]),h=a?o[2]-o[0]+5:0,d=l[0]+h,f=l[1];S(this,Qi,[100*(d-i)/e,100*(f-s)/n]);const{style:p}=u(this,oe);p.left=`${u(this,Qi)[0]}%`,p.top=`${u(this,Qi)[1]}%`},up=function(){S(this,oi,!u(this,oi)),u(this,oi)?(I(this,Ft,cp).call(this),u(this,oe).addEventListener("click",u(this,ku)),u(this,oe).addEventListener("keydown",u(this,Tu))):(I(this,Ft,cy).call(this),u(this,oe).removeEventListener("click",u(this,ku)),u(this,oe).removeEventListener("keydown",u(this,Tu)))},cp=function(){u(this,Mn)||this.render(),this.isVisible?u(this,oi)&&u(this,oe).classList.add("focused"):(I(this,Ft,uE).call(this),u(this,oe).hidden=!1,u(this,oe).style.zIndex=parseInt(u(this,oe).style.zIndex)+1e3)},cy=function(){u(this,oe).classList.remove("focused"),!(u(this,oi)||!this.isVisible)&&(u(this,oe).hidden=!0,u(this,oe).style.zIndex=parseInt(u(this,oe).style.zIndex)-1e3)};class cE extends fe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Et.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Sd;class pk extends fe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});k(this,Sd,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:i}=this,s=this.svgFactory.create(n,i,!0),a=S(this,Sd,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Sd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Sd=new WeakMap;var Ed;class gk extends fe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});k(this,Ed,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:i}=this,s=this.svgFactory.create(n,i,!0),a=e.borderStyle.width,o=S(this,Ed,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",n-a),o.setAttribute("height",i-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Ed)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ed=new WeakMap;var xd;class mk extends fe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});k(this,xd,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:i}=this,s=this.svgFactory.create(n,i,!0),a=e.borderStyle.width,o=S(this,xd,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",n/2),o.setAttribute("cy",i/2),o.setAttribute("rx",n/2-a/2),o.setAttribute("ry",i/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,xd)}addHighlightArea(){this.container.classList.add("highlightArea")}}xd=new WeakMap;var Cd;class hE extends fe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});k(this,Cd,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:i,popupRef:s},width:a,height:o}=this;if(!n)return this.container;const l=this.svgFactory.create(a,o,!0);let c=[];for(let d=0,f=n.length;d<f;d+=2){const p=n[d]-e[0],v=e[3]-n[d+1];c.push(`${p},${v}`)}c=c.join(" ");const h=S(this,Cd,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",c),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Cd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Cd=new WeakMap;class vk extends hE{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class yk extends fe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Td,Ro,kd,hy;class H0 extends fe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});k(this,kd);k(this,Td,null);k(this,Ro,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Et.HIGHLIGHT:Et.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:i,borderStyle:s,popupRef:a}}=this,{transform:o,width:l,height:c}=I(this,kd,hy).call(this,n,e),h=this.svgFactory.create(l,c,!0),d=S(this,Td,this.svgFactory.createElement("svg:g"));h.append(d),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",o);for(let f=0,p=i.length;f<p;f++){const v=this.svgFactory.createElement(this.svgElementName);u(this,Ro).push(v),v.setAttribute("points",i[f].join(",")),d.append(v)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:i,rect:s}=e,a=u(this,Td);if(n>=0&&a.setAttribute("stroke-width",n||1),i)for(let o=0,l=u(this,Ro).length;o<l;o++)u(this,Ro)[o].setAttribute("points",i[o].join(","));if(s){const{transform:o,width:l,height:c}=I(this,kd,hy).call(this,this.data.rotation,s);a.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return u(this,Ro)}addHighlightArea(){this.container.classList.add("highlightArea")}}Td=new WeakMap,Ro=new WeakMap,kd=new WeakSet,hy=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class dE extends fe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Et.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class wk extends fe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class Ak extends fe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class bk extends fe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class fE extends fe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Et.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Rd,Id,dy;class Sk extends fe{constructor(e){var i;super(e,{isRenderable:!0});k(this,Id);k(this,Rd,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",I(this,Id,dy).bind(this)),S(this,Rd,i);const{isMac:s}=Xe.platform;return e.addEventListener("keydown",a=>{a.key==="Enter"&&(s?a.metaKey:a.ctrlKey)&&I(this,Id,dy).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return u(this,Rd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rd=new WeakMap,Id=new WeakSet,dy=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var _d,Io,ta,Pd,_a,py,gy;const K0=class K0{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:i,page:s,viewport:a,structTreeLayer:o}){k(this,_a);k(this,_d,null);k(this,Io,null);k(this,ta,new Map);k(this,Pd,null);this.div=t,S(this,_d,e),S(this,Io,n),S(this,Pd,o||null),this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return u(this,ta).size>0}async render(t){var a;const{annotations:e}=t,n=this.div;il(n,this.viewport);const i=new Map,s={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new ng,annotationStorage:t.annotationStorage||new z0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const o of e){if(o.noHTML)continue;const l=o.annotationType===ge.POPUP;if(l){const d=i.get(o.id);if(!d)continue;s.elements=d}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;s.data=o;const c=Iw.create(s);if(!c.isRenderable)continue;if(!l&&o.popupRef){const d=i.get(o.popupRef);d?d.push(c):i.set(o.popupRef,[c])}const h=c.render();o.hidden&&(h.style.visibility="hidden"),await I(this,_a,py).call(this,h,o.id,s.elements),c._isEditable&&(u(this,ta).set(c.data.id,c),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(c))}I(this,_a,gy).call(this)}async addLinkAnnotations(t,e){const n={data:null,layer:this.div,linkService:e,svgFactory:new ng,parent:this};for(const i of t){i.borderStyle||(i.borderStyle=K0._defaultBorderStyle),n.data=i;const s=Iw.create(n);if(!s.isRenderable)continue;const a=s.render();await I(this,_a,py).call(this,a,i.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,il(e,{rotation:t.rotation}),I(this,_a,gy).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(u(this,ta).values())}getEditableAnnotation(t){return u(this,ta).get(t)}static get _defaultBorderStyle(){return kt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:dl.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};_d=new WeakMap,Io=new WeakMap,ta=new WeakMap,Pd=new WeakMap,_a=new WeakSet,py=async function(t,e,n){var o,l;const i=t.firstChild||t,s=i.id=`${D0}${e}`,a=await((o=u(this,Pd))==null?void 0:o.getAriaAttributes(s));if(a)for(const[c,h]of a)i.setAttribute(c,h);n?n.at(-1).container.after(t):(this.div.append(t),(l=u(this,_d))==null||l.moveElementInDOM(this.div,t,i,!1))},gy=function(){var e;if(!u(this,Io))return;const t=this.div;for(const[n,i]of u(this,Io)){const s=t.querySelector(`[data-annotation-id="${n}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:a}=s;a?a.nodeName==="CANVAS"?a.replaceWith(i):a.classList.contains("annotationContent")?a.after(i):a.before(i):s.append(i);const o=u(this,ta).get(n);o&&(o._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(n,s.id,i),o._hasNoCanvas=!1):o.canvas=i)}u(this,Io).clear()};let fy=K0;const Nf=/\r\n?|\n/g;var lr,Fn,Od,_o,zn,we,pE,gE,mE,hp,ds,dp,fp,vE,vy,yE;const Gt=class Gt extends Yt{constructor(e){super({...e,name:"freeTextEditor"});k(this,we);k(this,lr);k(this,Fn,"");k(this,Od,`${this.id}-editor`);k(this,_o,null);k(this,zn);it(this,"_colorPicker",null);S(this,lr,e.color||Gt._defaultColor||Yt._defaultLineColor),S(this,zn,e.fontSize||Gt._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const e=Gt.prototype,n=a=>a.isEmpty(),i=sl.TRANSLATE_SMALL,s=sl.TRANSLATE_BIG;return kt(this,"_keyboardManager",new rf([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[s,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,s],checker:n}]]))}static initialize(e,n){Yt.initialize(e,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Pt.FREETEXT_SIZE:Gt._defaultFontSize=n;break;case Pt.FREETEXT_COLOR:Gt._defaultColor=n;break}}updateParams(e,n){switch(e){case Pt.FREETEXT_SIZE:I(this,we,pE).call(this,n);break;case Pt.FREETEXT_COLOR:I(this,we,gE).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Pt.FREETEXT_SIZE,Gt._defaultFontSize],[Pt.FREETEXT_COLOR,Gt._defaultColor||Yt._defaultLineColor]]}get propertiesToUpdate(){return[[Pt.FREETEXT_SIZE,u(this,zn)],[Pt.FREETEXT_COLOR,u(this,lr)]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new eg(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Pt.FREETEXT_COLOR}get colorValue(){return u(this,lr)}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Gt._internalPadding*e,-(Gt._internalPadding+u(this,zn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),S(this,_o,new AbortController);const e=this._uiManager.combinedSignal(u(this,_o));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,Od)),this._isDraggable=!0,(e=u(this,_o))==null||e.abort(),S(this,_o,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=u(this,Fn),n=S(this,Fn,I(this,we,mE).call(this).trimEnd());if(e===n)return;const i=s=>{if(S(this,Fn,s),!s){this.remove();return}I(this,we,fp).call(this),this._uiManager.rebuild(this),I(this,we,hp).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(e)},mustExec:!1}),I(this,we,hp).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Gt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,Od)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${u(this,zn)}px * var(--total-scale-factor))`,i.color=u(this,lr),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[h,d]=this.pageDimensions,[f,p]=this.pageTranslation;let v,g;switch(this.rotation){case 0:v=e+(o[0]-f)/h,g=n+this.height-(o[1]-p)/d;break;case 90:v=e+(o[0]-f)/h,g=n-(o[1]-p)/d,[l,c]=[c,-l];break;case 180:v=e-this.width+(o[0]-f)/h,g=n-(o[1]-p)/d,[l,c]=[-l,-c];break;case 270:v=e+(o[0]-f-this.height*d)/h,g=n+(o[1]-p-this.width*h)/d,[l,c]=[-c,l];break}this.setAt(v*s,g*a,l,c)}else this._moveAfterPaste(e,n);I(this,we,fp).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var v,g,A;const n=e.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const s=I(v=Gt,ds,vy).call(v,n.getData("text")||"").replaceAll(Nf,`
`);if(!s)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!s.includes(`
`)){o.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:c}=o,h=[],d=[];if(l.nodeType===Node.TEXT_NODE){const m=l.parentElement;if(d.push(l.nodeValue.slice(c).replaceAll(Nf,"")),m!==this.editorDiv){let y=h;for(const w of this.editorDiv.childNodes){if(w===m){y=d;continue}y.push(I(g=Gt,ds,dp).call(g,w))}}h.push(l.nodeValue.slice(0,c).replaceAll(Nf,""))}else if(l===this.editorDiv){let m=h,y=0;for(const w of this.editorDiv.childNodes)y++===c&&(m=d),m.push(I(A=Gt,ds,dp).call(A,w))}S(this,Fn,`${h.join(`
`)}${s}${d.join(`
`)}`),I(this,we,fp).call(this);const f=new Range;let p=Math.sumPrecise(h.map(m=>m.length));for(const{firstChild:m}of this.editorDiv.childNodes)if(m.nodeType===Node.TEXT_NODE){const y=m.nodeValue.length;if(p<=y){f.setStart(m,p),f.setEnd(m,p);break}p-=y}a.removeAllRanges(),a.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(e,n,i){var o;let s=null;if(e instanceof cE){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:h,rotation:d,id:f,popupRef:p,contentsObj:v},textContent:g,textPosition:A,parent:{page:{pageNumber:m}}}=e;if(!g||g.length===0)return null;s=e={annotationType:Et.FREETEXT,color:Array.from(c),fontSize:l,value:g.join(`
`),position:A,pageIndex:m-1,rect:h.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:p,comment:(v==null?void 0:v.str)||null}}const a=await super.deserialize(e,n,i);return S(a,zn,e.fontSize),S(a,lr,vt.makeHexColor(...e.color)),S(a,Fn,I(o=Gt,ds,vy).call(o,e.value)),a._initialData=s,e.comment&&a.setCommentData(e.comment),a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Gt._internalPadding*this.parentScale,i=this.getRect(n,n),s=Yt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:u(this,lr)),a={annotationType:Et.FREETEXT,color:s,fontSize:u(this,zn),value:I(this,we,vE).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(a),e?(a.isCopy=!0,a):this.annotationElementId&&!I(this,we,yE).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e),{style:i}=n;i.fontSize=`calc(${u(this,zn)}px * var(--total-scale-factor))`,i.color=u(this,lr),n.replaceChildren();for(const o of u(this,Fn).split(`
`)){const l=document.createElement("div");l.append(o?document.createTextNode(o):document.createElement("br")),n.append(l)}const s=Gt._internalPadding*this.parentScale,a={rect:this.getRect(s,s)};return a.popup=this.hasEditedComment?this.comment:{text:u(this,Fn)},e.updateEdited(a),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};lr=new WeakMap,Fn=new WeakMap,Od=new WeakMap,_o=new WeakMap,zn=new WeakMap,we=new WeakSet,pE=function(e){const n=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-u(this,zn))*this.parentScale),S(this,zn,s),I(this,we,hp).call(this)},i=u(this,zn);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Pt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},gE=function(e){const n=s=>{var a;S(this,lr,this.editorDiv.style.color=s),(a=this._colorPicker)==null||a.update(s)},i=u(this,lr);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Pt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},mE=function(){var i;const e=[];this.editorDiv.normalize();let n=null;for(const s of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(e.push(I(i=Gt,ds,dp).call(i,s)),n=s);return e.join(`
`)},hp=function(){const[e,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:s,div:a}=this,o=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",s.div.append(this.div),i=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/n):(this.width=i.height/e,this.height=i.width/n),this.fixAndSetPosition()},ds=new WeakSet,dp=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Nf,"")},fp=function(){if(this.editorDiv.replaceChildren(),!!u(this,Fn))for(const e of u(this,Fn).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},vE=function(){return u(this,Fn).replaceAll(""," ")},vy=function(e){return e.replaceAll(" ","")},yE=function(e){const{value:n,fontSize:i,color:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==n||e.fontSize!==i||e.color.some((o,l)=>o!==s[l])||e.pageIndex!==a},k(Gt,ds),it(Gt,"_freeTextDefaultContent",""),it(Gt,"_internalPadding",0),it(Gt,"_defaultColor",null),it(Gt,"_defaultFontSize",10),it(Gt,"_type","freetext"),it(Gt,"_editorType",Et.FREETEXT);let my=Gt;class dt{toSVGPath(){Wt("Abstract method `toSVGPath` must be implemented.")}get box(){Wt("Abstract getter `box` must be implemented.")}serialize(t,e){Wt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,i,s,a){a||(a=new Float32Array(t.length));for(let o=0,l=t.length;o<l;o+=2)a[o]=e+t[o]*i,a[o+1]=n+t[o+1]*s;return a}static _rescaleAndSwap(t,e,n,i,s,a){a||(a=new Float32Array(t.length));for(let o=0,l=t.length;o<l;o+=2)a[o]=e+t[o+1]*i,a[o+1]=n+t[o]*s;return a}static _translate(t,e,n,i){i||(i=new Float32Array(t.length));for(let s=0,a=t.length;s<a;s+=2)i[s]=e+t[s],i[s+1]=n+t[s+1];return i}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,i,s){switch(s){case 90:return[1-e/n,t/i];case 180:return[1-t/n,1-e/i];case 270:return[e/n,1-t/i];default:return[t/n,e/i]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,i,s,a){return[(t+5*n)/6,(e+5*i)/6,(5*n+s)/6,(5*i+a)/6,(n+s)/2,(i+a)/2]}}it(dt,"PRECISION",1e-4);var Bn,_r,Ou,Lu,li,Tt,Po,Oo,Ld,Nd,Nu,Du,ea,Dd,Ag,bg,Te,Bc,wE,AE,bE,SE,EE,xE;const ki=class ki{constructor({x:t,y:e},n,i,s,a,o=0){k(this,Te);k(this,Bn);k(this,_r,[]);k(this,Ou);k(this,Lu);k(this,li,[]);k(this,Tt,new Float32Array(18));k(this,Po);k(this,Oo);k(this,Ld);k(this,Nd);k(this,Nu);k(this,Du);k(this,ea,[]);S(this,Bn,n),S(this,Du,s*i),S(this,Lu,a),u(this,Tt).set([NaN,NaN,NaN,NaN,t,e],6),S(this,Ou,o),S(this,Nd,u(ki,Dd)*i),S(this,Ld,u(ki,bg)*i),S(this,Nu,i),u(this,ea).push(t,e)}isEmpty(){return isNaN(u(this,Tt)[8])}add({x:t,y:e}){var _;S(this,Po,t),S(this,Oo,e);const[n,i,s,a]=u(this,Bn);let[o,l,c,h]=u(this,Tt).subarray(8,12);const d=t-c,f=e-h,p=Math.hypot(d,f);if(p<u(this,Ld))return!1;const v=p-u(this,Nd),g=v/p,A=g*d,m=g*f;let y=o,w=l;o=c,l=h,c+=A,h+=m,(_=u(this,ea))==null||_.push(t,e);const b=-m/v,E=A/v,T=b*u(this,Du),R=E*u(this,Du);return u(this,Tt).set(u(this,Tt).subarray(2,8),0),u(this,Tt).set([c+T,h+R],4),u(this,Tt).set(u(this,Tt).subarray(14,18),12),u(this,Tt).set([c-T,h-R],16),isNaN(u(this,Tt)[6])?(u(this,li).length===0&&(u(this,Tt).set([o+T,l+R],2),u(this,li).push(NaN,NaN,NaN,NaN,(o+T-n)/s,(l+R-i)/a),u(this,Tt).set([o-T,l-R],14),u(this,_r).push(NaN,NaN,NaN,NaN,(o-T-n)/s,(l-R-i)/a)),u(this,Tt).set([y,w,o,l,c,h],6),!this.isEmpty()):(u(this,Tt).set([y,w,o,l,c,h],6),Math.abs(Math.atan2(w-l,y-o)-Math.atan2(m,A))<Math.PI/2?([o,l,c,h]=u(this,Tt).subarray(2,6),u(this,li).push(NaN,NaN,NaN,NaN,((o+c)/2-n)/s,((l+h)/2-i)/a),[o,l,y,w]=u(this,Tt).subarray(14,18),u(this,_r).push(NaN,NaN,NaN,NaN,((y+o)/2-n)/s,((w+l)/2-i)/a),!0):([y,w,o,l,c,h]=u(this,Tt).subarray(0,6),u(this,li).push(((y+5*o)/6-n)/s,((w+5*l)/6-i)/a,((5*o+c)/6-n)/s,((5*l+h)/6-i)/a,((o+c)/2-n)/s,((l+h)/2-i)/a),[c,h,o,l,y,w]=u(this,Tt).subarray(12,18),u(this,_r).push(((y+5*o)/6-n)/s,((w+5*l)/6-i)/a,((5*o+c)/6-n)/s,((5*l+h)/6-i)/a,((o+c)/2-n)/s,((l+h)/2-i)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const t=u(this,li),e=u(this,_r);if(isNaN(u(this,Tt)[6])&&!this.isEmpty())return I(this,Te,wE).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);I(this,Te,bE).call(this,n);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return I(this,Te,AE).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,i,s,a){return new CE(t,e,n,i,s,a)}getOutlines(){var d;const t=u(this,li),e=u(this,_r),n=u(this,Tt),[i,s,a,o]=u(this,Bn),l=new Float32Array((((d=u(this,ea))==null?void 0:d.length)??0)+2);for(let f=0,p=l.length-2;f<p;f+=2)l[f]=(u(this,ea)[f]-i)/a,l[f+1]=(u(this,ea)[f+1]-s)/o;if(l[l.length-2]=(u(this,Po)-i)/a,l[l.length-1]=(u(this,Oo)-s)/o,isNaN(n[6])&&!this.isEmpty())return I(this,Te,SE).call(this,l);const c=new Float32Array(u(this,li).length+24+u(this,_r).length);let h=t.length;for(let f=0;f<h;f+=2){if(isNaN(t[f])){c[f]=c[f+1]=NaN;continue}c[f]=t[f],c[f+1]=t[f+1]}h=I(this,Te,xE).call(this,c,h);for(let f=e.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(e[f+p])){c[h]=c[h+1]=NaN,h+=2;continue}c[h]=e[f+p],c[h+1]=e[f+p+1],h+=2}return I(this,Te,EE).call(this,c,h),this.newFreeDrawOutline(c,l,u(this,Bn),u(this,Nu),u(this,Ou),u(this,Lu))}};Bn=new WeakMap,_r=new WeakMap,Ou=new WeakMap,Lu=new WeakMap,li=new WeakMap,Tt=new WeakMap,Po=new WeakMap,Oo=new WeakMap,Ld=new WeakMap,Nd=new WeakMap,Nu=new WeakMap,Du=new WeakMap,ea=new WeakMap,Dd=new WeakMap,Ag=new WeakMap,bg=new WeakMap,Te=new WeakSet,Bc=function(){const t=u(this,Tt).subarray(4,6),e=u(this,Tt).subarray(16,18),[n,i,s,a]=u(this,Bn);return[(u(this,Po)+(t[0]-e[0])/2-n)/s,(u(this,Oo)+(t[1]-e[1])/2-i)/a,(u(this,Po)+(e[0]-t[0])/2-n)/s,(u(this,Oo)+(e[1]-t[1])/2-i)/a]},wE=function(){const[t,e,n,i]=u(this,Bn),[s,a,o,l]=I(this,Te,Bc).call(this);return`M${(u(this,Tt)[2]-t)/n} ${(u(this,Tt)[3]-e)/i} L${(u(this,Tt)[4]-t)/n} ${(u(this,Tt)[5]-e)/i} L${s} ${a} L${o} ${l} L${(u(this,Tt)[16]-t)/n} ${(u(this,Tt)[17]-e)/i} L${(u(this,Tt)[14]-t)/n} ${(u(this,Tt)[15]-e)/i} Z`},AE=function(t){const e=u(this,_r);t.push(`L${e[4]} ${e[5]} Z`)},bE=function(t){const[e,n,i,s]=u(this,Bn),a=u(this,Tt).subarray(4,6),o=u(this,Tt).subarray(16,18),[l,c,h,d]=I(this,Te,Bc).call(this);t.push(`L${(a[0]-e)/i} ${(a[1]-n)/s} L${l} ${c} L${h} ${d} L${(o[0]-e)/i} ${(o[1]-n)/s}`)},SE=function(t){const e=u(this,Tt),[n,i,s,a]=u(this,Bn),[o,l,c,h]=I(this,Te,Bc).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-n)/s,(e[3]-i)/a,NaN,NaN,NaN,NaN,(e[4]-n)/s,(e[5]-i)/a,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,c,h,NaN,NaN,NaN,NaN,(e[16]-n)/s,(e[17]-i)/a,NaN,NaN,NaN,NaN,(e[14]-n)/s,(e[15]-i)/a],0),this.newFreeDrawOutline(d,t,u(this,Bn),u(this,Nu),u(this,Ou),u(this,Lu))},EE=function(t,e){const n=u(this,_r);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},xE=function(t,e){const n=u(this,Tt).subarray(4,6),i=u(this,Tt).subarray(16,18),[s,a,o,l]=u(this,Bn),[c,h,d,f]=I(this,Te,Bc).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-s)/o,(n[1]-a)/l,NaN,NaN,NaN,NaN,c,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(i[0]-s)/o,(i[1]-a)/l],e),e+=24},k(ki,Dd,8),k(ki,Ag,2),k(ki,bg,u(ki,Dd)+u(ki,Ag));let rg=ki;var Mu,Lo,qi,Md,jn,Fd,he,Sg,TE;class CE extends dt{constructor(e,n,i,s,a,o){super();k(this,Sg);k(this,Mu);k(this,Lo,new Float32Array(4));k(this,qi);k(this,Md);k(this,jn);k(this,Fd);k(this,he);S(this,he,e),S(this,jn,n),S(this,Mu,i),S(this,Fd,s),S(this,qi,a),S(this,Md,o),this.lastPoint=[NaN,NaN],I(this,Sg,TE).call(this,o);const[l,c,h,d]=u(this,Lo);for(let f=0,p=e.length;f<p;f+=2)e[f]=(e[f]-l)/h,e[f+1]=(e[f+1]-c)/d;for(let f=0,p=n.length;f<p;f+=2)n[f]=(n[f]-l)/h,n[f+1]=(n[f+1]-c)/d}toSVGPath(){const e=[`M${u(this,he)[4]} ${u(this,he)[5]}`];for(let n=6,i=u(this,he).length;n<i;n+=6){if(isNaN(u(this,he)[n])){e.push(`L${u(this,he)[n+4]} ${u(this,he)[n+5]}`);continue}e.push(`C${u(this,he)[n]} ${u(this,he)[n+1]} ${u(this,he)[n+2]} ${u(this,he)[n+3]} ${u(this,he)[n+4]} ${u(this,he)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,i,s],a){const o=i-e,l=s-n;let c,h;switch(a){case 0:c=dt._rescale(u(this,he),e,s,o,-l),h=dt._rescale(u(this,jn),e,s,o,-l);break;case 90:c=dt._rescaleAndSwap(u(this,he),e,n,o,l),h=dt._rescaleAndSwap(u(this,jn),e,n,o,l);break;case 180:c=dt._rescale(u(this,he),i,n,-o,l),h=dt._rescale(u(this,jn),i,n,-o,l);break;case 270:c=dt._rescaleAndSwap(u(this,he),i,s,-o,-l),h=dt._rescaleAndSwap(u(this,jn),i,s,-o,-l);break}return{outline:Array.from(c),points:[Array.from(h)]}}get box(){return u(this,Lo)}newOutliner(e,n,i,s,a,o=0){return new rg(e,n,i,s,a,o)}getNewOutline(e,n){const[i,s,a,o]=u(this,Lo),[l,c,h,d]=u(this,Mu),f=a*h,p=o*d,v=i*h+l,g=s*d+c,A=this.newOutliner({x:u(this,jn)[0]*f+v,y:u(this,jn)[1]*p+g},u(this,Mu),u(this,Fd),e,u(this,Md),n??u(this,qi));for(let m=2;m<u(this,jn).length;m+=2)A.add({x:u(this,jn)[m]*f+v,y:u(this,jn)[m+1]*p+g});return A.getOutlines()}}Mu=new WeakMap,Lo=new WeakMap,qi=new WeakMap,Md=new WeakMap,jn=new WeakMap,Fd=new WeakMap,he=new WeakMap,Sg=new WeakSet,TE=function(e){const n=u(this,he);let i=n[4],s=n[5];const a=[i,s,i,s];let o=i,l=s;const c=e?Math.max:Math.min;for(let d=6,f=n.length;d<f;d+=6){const p=n[d+4],v=n[d+5];if(isNaN(n[d]))vt.pointBoundingBox(p,v,a),l<v?(o=p,l=v):l===v&&(o=c(o,p));else{const g=[1/0,1/0,-1/0,-1/0];vt.bezierBoundingBox(i,s,...n.slice(d,d+6),g),vt.rectBoundingBox(...g,a),l<g[3]?(o=g[2],l=g[3]):l===g[3]&&(o=c(o,g[2]))}i=p,s=v}const h=u(this,Lo);h[0]=a[0]-u(this,qi),h[1]=a[1]-u(this,qi),h[2]=a[2]-a[0]+2*u(this,qi),h[3]=a[3]-a[1]+2*u(this,qi),this.lastPoint=[o,l]};var zd,Bd,na,Pr,mn,kE,pp,RE,IE,wy;class yy{constructor(t,e=0,n=0,i=!0){k(this,mn);k(this,zd);k(this,Bd);k(this,na,[]);k(this,Pr,[]);const s=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:p,y:v,width:g,height:A}of t){const m=Math.floor((p-e)/a)*a,y=Math.ceil((p+g+e)/a)*a,w=Math.floor((v-e)/a)*a,b=Math.ceil((v+A+e)/a)*a,E=[m,w,b,!0],T=[y,w,b,!1];u(this,na).push(E,T),vt.rectBoundingBox(m,w,y,b,s)}const o=s[2]-s[0]+2*n,l=s[3]-s[1]+2*n,c=s[0]-n,h=s[1]-n,d=u(this,na).at(i?-1:-2),f=[d[0],d[2]];for(const p of u(this,na)){const[v,g,A]=p;p[0]=(v-c)/o,p[1]=(g-h)/l,p[2]=(A-h)/l}S(this,zd,new Float32Array([c,h,o,l])),S(this,Bd,f)}getOutlines(){u(this,na).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of u(this,na))e[3]?(t.push(...I(this,mn,wy).call(this,e)),I(this,mn,RE).call(this,e)):(I(this,mn,IE).call(this,e),t.push(...I(this,mn,wy).call(this,e)));return I(this,mn,kE).call(this,t)}}zd=new WeakMap,Bd=new WeakMap,na=new WeakMap,Pr=new WeakMap,mn=new WeakSet,kE=function(t){const e=[],n=new Set;for(const a of t){const[o,l,c]=a;e.push([o,l,a],[o,c,a])}e.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=e.length;a<o;a+=2){const l=e[a][2],c=e[a+1][2];l.push(c),c.push(l),n.add(l),n.add(c)}const i=[];let s;for(;n.size>0;){const a=n.values().next().value;let[o,l,c,h,d]=a;n.delete(a);let f=o,p=l;for(s=[o,c],i.push(s);;){let v;if(n.has(h))v=h;else if(n.has(d))v=d;else break;n.delete(v),[o,l,c,h,d]=v,f!==o&&(s.push(f,p,o,p===l?l:c),f=o),p=p===l?c:l}s.push(f,p)}return new Ek(i,u(this,zd),u(this,Bd))},pp=function(t){const e=u(this,Pr);let n=0,i=e.length-1;for(;n<=i;){const s=n+i>>1,a=e[s][0];if(a===t)return s;a<t?n=s+1:i=s-1}return i+1},RE=function([,t,e]){const n=I(this,mn,pp).call(this,t);u(this,Pr).splice(n,0,[t,e])},IE=function([,t,e]){const n=I(this,mn,pp).call(this,t);for(let i=n;i<u(this,Pr).length;i++){const[s,a]=u(this,Pr)[i];if(s!==t)break;if(s===t&&a===e){u(this,Pr).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[s,a]=u(this,Pr)[i];if(s!==t)break;if(s===t&&a===e){u(this,Pr).splice(i,1);return}}},wy=function(t){const[e,n,i]=t,s=[[e,n,i]],a=I(this,mn,pp).call(this,i);for(let o=0;o<a;o++){const[l,c]=u(this,Pr)[o];for(let h=0,d=s.length;h<d;h++){const[,f,p]=s[h];if(!(c<=f||p<=l)){if(f>=l){if(p>c)s[h][1]=c;else{if(d===1)return[];s.splice(h,1),h--,d--}continue}s[h][2]=l,p>c&&s.push([e,c,p])}}}return s};var jd,Fu;class Ek extends dt{constructor(e,n,i){super();k(this,jd);k(this,Fu);S(this,Fu,e),S(this,jd,n),this.lastPoint=i}toSVGPath(){const e=[];for(const n of u(this,Fu)){let[i,s]=n;e.push(`M${i} ${s}`);for(let a=2;a<n.length;a+=2){const o=n[a],l=n[a+1];o===i?(e.push(`V${l}`),s=l):l===s&&(e.push(`H${o}`),i=o)}e.push("Z")}return e.join(" ")}serialize([e,n,i,s],a){const o=[],l=i-e,c=s-n;for(const h of u(this,Fu)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=e+h[f]*l,d[f+1]=s-h[f+1]*c;o.push(d)}return o}get box(){return u(this,jd)}get classNamesForOutlining(){return["highlightOutline"]}}jd=new WeakMap,Fu=new WeakMap;class Ay extends rg{newFreeDrawOutline(t,e,n,i,s,a){return new xk(t,e,n,i,s,a)}}class xk extends CE{newOutliner(t,e,n,i,s,a=0){return new Ay(t,e,n,i,s,a)}}var zu,Ud,ts,No,Hd,En,$d,Wd,Do,ur,Un,je,Bu,es,en,ju,cr,Vd,xt,by,gp,_E,PE,OE,Sy,za,pr,yl,LE,mp,jc,NE,DE,ME,FE,zE;const zt=class zt extends Yt{constructor(e){super({...e,name:"highlightEditor"});k(this,xt);k(this,zu,null);k(this,Ud,0);k(this,ts);k(this,No,null);k(this,Hd,null);k(this,En,null);k(this,$d,null);k(this,Wd,0);k(this,Do,null);k(this,ur,null);k(this,Un,null);k(this,je,!1);k(this,Bu,null);k(this,es);k(this,en,null);k(this,ju,"");k(this,cr);k(this,Vd,"");this.color=e.color||zt._defaultColor,S(this,cr,e.thickness||zt._defaultThickness),S(this,es,e.opacity||zt._defaultOpacity),S(this,ts,e.boxes||null),S(this,Vd,e.methodOfCreation||""),S(this,ju,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(S(this,je,!0),I(this,xt,gp).call(this,e),I(this,xt,za).call(this)):u(this,ts)&&(S(this,zu,e.anchorNode),S(this,Ud,e.anchorOffset),S(this,$d,e.focusNode),S(this,Wd,e.focusOffset),I(this,xt,by).call(this),I(this,xt,za).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=zt.prototype;return kt(this,"_keyboardManager",new rf([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,je)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:u(this,cr),methodOfCreation:u(this,Vd)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var i;Yt.initialize(e,n),zt._defaultColor||(zt._defaultColor=((i=n.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case Pt.HIGHLIGHT_COLOR:zt._defaultColor=n;break;case Pt.HIGHLIGHT_THICKNESS:zt._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return u(this,Bu)}updateParams(e,n){switch(e){case Pt.HIGHLIGHT_COLOR:I(this,xt,_E).call(this,n);break;case Pt.HIGHLIGHT_THICKNESS:I(this,xt,PE).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Pt.HIGHLIGHT_COLOR,zt._defaultColor],[Pt.HIGHLIGHT_THICKNESS,zt._defaultThickness]]}get propertiesToUpdate(){return[[Pt.HIGHLIGHT_COLOR,this.color||zt._defaultColor],[Pt.HIGHLIGHT_THICKNESS,u(this,cr)||zt._defaultThickness],[Pt.HIGHLIGHT_FREE,u(this,je)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",S(this,Hd,new tg({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(I(this,xt,jc).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,I(this,xt,jc).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){I(this,xt,Sy).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(I(this,xt,za).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let n=!1;this.parent&&!e?I(this,xt,Sy).call(this):e&&(I(this,xt,za).call(this,e),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var s,a,o;const{drawLayer:n}=this.parent;let i;u(this,je)?(e=(e-this.rotation+360)%360,i=I(s=zt,pr,yl).call(s,u(this,ur).box,e)):i=I(a=zt,pr,yl).call(a,[this.x,this.y,this.width,this.height],e),n.updateProperties(u(this,Un),{bbox:i,root:{"data-main-rotation":e}}),n.updateProperties(u(this,en),{bbox:I(o=zt,pr,yl).call(o,u(this,En).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();u(this,ju)&&(e.setAttribute("aria-label",u(this,ju)),e.setAttribute("role","mark")),u(this,je)?e.classList.add("free"):this.div.addEventListener("keydown",I(this,xt,LE).bind(this),{signal:this._uiManager._signal});const n=S(this,Do,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=u(this,No);const[i,s]=this.parentDimensions;return this.setDims(this.width*i,this.height*s),iS(this,u(this,Do),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(u(this,en),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(u(this,en),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:I(this,xt,mp).call(this,!0);break;case 1:case 3:I(this,xt,mp).call(this,!1);break}}select(){var e;super.select(),u(this,en)&&((e=this.parent)==null||e.drawLayer.updateProperties(u(this,en),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),u(this,en)&&((e=this.parent)==null||e.drawLayer.updateProperties(u(this,en),{rootClass:{selected:!1}}),u(this,je)||I(this,xt,mp).call(this,!1))}get _mustFixPosition(){return!u(this,je)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(u(this,Un),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(u(this,en),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:i,x:s,y:a}){const{x:o,y:l,width:c,height:h}=i.getBoundingClientRect(),d=new AbortController,f=e.combinedSignal(d),p=v=>{d.abort(),I(this,pr,FE).call(this,e,v)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",me,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Ar,{signal:f}),i.addEventListener("pointermove",I(this,pr,ME).bind(this,e),{signal:f}),this._freeHighlight=new Ay({x:s,y:a},[o,l,c,h],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,i){var g,A,m,y;let s=null;if(e instanceof dE){const{data:{quadPoints:w,rect:b,rotation:E,id:T,color:R,opacity:P,popupRef:_,contentsObj:N},parent:{page:{pageNumber:B}}}=e;s=e={annotationType:Et.HIGHLIGHT,color:Array.from(R),opacity:P,quadPoints:w,boxes:null,pageIndex:B-1,rect:b.slice(0),rotation:E,annotationElementId:T,id:T,deleted:!1,popupRef:_,comment:(N==null?void 0:N.str)||null}}else if(e instanceof H0){const{data:{inkLists:w,rect:b,rotation:E,id:T,color:R,borderStyle:{rawWidth:P},popupRef:_,contentsObj:N},parent:{page:{pageNumber:B}}}=e;s=e={annotationType:Et.HIGHLIGHT,color:Array.from(R),thickness:P,inkLists:w,boxes:null,pageIndex:B-1,rect:b.slice(0),rotation:E,annotationElementId:T,id:T,deleted:!1,popupRef:_,comment:(N==null?void 0:N.str)||null}}const{color:a,quadPoints:o,inkLists:l,opacity:c}=e,h=await super.deserialize(e,n,i);h.color=vt.makeHexColor(...a),S(h,es,c||1),l&&S(h,cr,e.thickness),h._initialData=s,e.comment&&h.setCommentData(e.comment);const[d,f]=h.pageDimensions,[p,v]=h.pageTranslation;if(o){const w=S(h,ts,[]);for(let b=0;b<o.length;b+=8)w.push({x:(o[b]-p)/d,y:1-(o[b+1]-v)/f,width:(o[b+2]-o[b])/d,height:(o[b+1]-o[b+5])/f});I(g=h,xt,by).call(g),I(A=h,xt,za).call(A),h.rotate(h.rotation)}else if(l){S(h,je,!0);const w=l[0],b={x:w[0]-p,y:f-(w[1]-v)},E=new Ay(b,[0,0,d,f],1,u(h,cr)/2,!0,.001);for(let P=0,_=w.length;P<_;P+=2)b.x=w[P]-p,b.y=f-(w[P+1]-v),E.add(b);const{id:T,clipPathId:R}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);I(m=h,xt,gp).call(m,{highlightOutlines:E.getOutlines(),highlightId:T,clipPathId:R}),I(y=h,xt,za).call(y),h.rotate(h.parentRotation)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),i=Yt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s={annotationType:Et.HIGHLIGHT,color:i,opacity:u(this,es),thickness:u(this,cr),quadPoints:I(this,xt,NE).call(this),outlines:I(this,xt,DE).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:I(this,xt,jc).call(this),structTreeParentId:this._structTreeParentId};return this.addComment(s),this.annotationElementId&&!I(this,xt,zE).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(e){const n={rect:this.getRect(0,0)};return this.hasEditedComment&&(n.popup=this.comment),e.updateEdited(n),null}static canCreateNewEmptyEditor(){return!1}};zu=new WeakMap,Ud=new WeakMap,ts=new WeakMap,No=new WeakMap,Hd=new WeakMap,En=new WeakMap,$d=new WeakMap,Wd=new WeakMap,Do=new WeakMap,ur=new WeakMap,Un=new WeakMap,je=new WeakMap,Bu=new WeakMap,es=new WeakMap,en=new WeakMap,ju=new WeakMap,cr=new WeakMap,Vd=new WeakMap,xt=new WeakSet,by=function(){const e=new yy(u(this,ts),.001);S(this,ur,e.getOutlines()),[this.x,this.y,this.width,this.height]=u(this,ur).box;const n=new yy(u(this,ts),.0025,.001,this._uiManager.direction==="ltr");S(this,En,n.getOutlines());const{lastPoint:i}=u(this,En);S(this,Bu,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},gp=function({highlightOutlines:e,highlightId:n,clipPathId:i}){var d,f;if(S(this,ur,e),S(this,En,e.getNewOutline(u(this,cr)/2+1.5,.0025)),n>=0)S(this,Un,n),S(this,No,i),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),S(this,en,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:u(this,En).box,path:{d:u(this,En).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(u(this,Un),{bbox:I(d=zt,pr,yl).call(d,u(this,ur).box,(p-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(u(this,en),{bbox:I(f=zt,pr,yl).call(f,u(this,En).box,p),path:{d:u(this,En).toSVGPath()}})}const[a,o,l,c]=e.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=l,this.height=c;break;case 90:{const[p,v]=this.parentDimensions;this.x=o,this.y=1-a,this.width=l*v/p,this.height=c*p/v;break}case 180:this.x=1-a,this.y=1-o,this.width=l,this.height=c;break;case 270:{const[p,v]=this.parentDimensions;this.x=1-o,this.y=a,this.width=l*v/p,this.height=c*p/v;break}}const{lastPoint:h}=u(this,En);S(this,Bu,[(h[0]-a)/l,(h[1]-o)/c])},_E=function(e){const n=(a,o)=>{var l,c;this.color=a,S(this,es,o),(l=this.parent)==null||l.drawLayer.updateProperties(u(this,Un),{root:{fill:a,"fill-opacity":o}}),(c=u(this,Hd))==null||c.updateColor(a)},i=this.color,s=u(this,es);this.addCommands({cmd:n.bind(this,e,zt._defaultOpacity),undo:n.bind(this,i,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Pt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},PE=function(e){const n=u(this,cr),i=s=>{S(this,cr,s),I(this,xt,OE).call(this,s)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Pt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},OE=function(e){if(!u(this,je))return;I(this,xt,gp).call(this,{highlightOutlines:u(this,ur).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)},Sy=function(){u(this,Un)===null||!this.parent||(this.parent.drawLayer.remove(u(this,Un)),S(this,Un,null),this.parent.drawLayer.remove(u(this,en)),S(this,en,null))},za=function(e=this.parent){u(this,Un)===null&&({id:sn(this,Un)._,clipPathId:sn(this,No)._}=e.drawLayer.draw({bbox:u(this,ur).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":u(this,es)},rootClass:{highlight:!0,free:u(this,je)},path:{d:u(this,ur).toSVGPath()}},!1,!0),S(this,en,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:u(this,je)},bbox:u(this,En).box,path:{d:u(this,En).toSVGPath()}},u(this,je))),u(this,Do)&&(u(this,Do).style.clipPath=u(this,No)))},pr=new WeakSet,yl=function([e,n,i,s],a){switch(a){case 90:return[1-n-s,e,s,i];case 180:return[1-e-i,1-n-s,i,s];case 270:return[n,1-e-i,s,i]}return[e,n,i,s]},LE=function(e){zt._keyboardManager.exec(this,e)},mp=function(e){if(!u(this,zu))return;const n=window.getSelection();e?n.setPosition(u(this,zu),u(this,Ud)):n.setPosition(u(this,$d),u(this,Wd))},jc=function(){return u(this,je)?this.rotation:0},NE=function(){if(u(this,je))return null;const[e,n]=this.pageDimensions,[i,s]=this.pageTranslation,a=u(this,ts),o=new Float32Array(a.length*8);let l=0;for(const{x:c,y:h,width:d,height:f}of a){const p=c*e+i,v=(1-h)*n+s;o[l]=o[l+4]=p,o[l+1]=o[l+3]=v,o[l+2]=o[l+6]=p+d*e,o[l+5]=o[l+7]=v-f*n,l+=8}return o},DE=function(e){return u(this,ur).serialize(e,I(this,xt,jc).call(this))},ME=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},FE=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},zE=function(e){const{color:n}=this._initialData;return this.hasEditedComment||e.color.some((i,s)=>i!==n[s])},k(zt,pr),it(zt,"_defaultColor",null),it(zt,"_defaultOpacity",1),it(zt,"_defaultThickness",12),it(zt,"_type","highlight"),it(zt,"_editorType",Et.HIGHLIGHT),it(zt,"_freeHighlightId",-1),it(zt,"_freeHighlight",null),it(zt,"_freeHighlightClipId","");let ig=zt;var Mo;class BE{constructor(){k(this,Mo,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){u(this,Mo)[t]=e}toSVGProperties(){const t=u(this,Mo);return S(this,Mo,Object.create(null)),{root:t}}reset(){S(this,Mo,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Wt("Not implemented")}}Mo=new WeakMap;var Hn,Uu,Ie,Fo,zo,ra,ia,sa,Bo,Dt,Ey,xy,Cy,Uc,jE,vp,Hc,wl;const gt=class gt extends Yt{constructor(e){super(e);k(this,Dt);k(this,Hn,null);k(this,Uu);it(this,"_colorPicker",null);it(this,"_drawId",null);S(this,Uu,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(I(this,Dt,Ey).call(this,e),I(this,Dt,Uc).call(this))}static _mergeSVGProperties(e,n){const i=new Set(Object.keys(e));for(const[s,a]of Object.entries(n))i.has(s)?Object.assign(e[s],a):e[s]=a;return e}static getDefaultDrawingOptions(e){Wt("Not implemented")}static get typesMap(){Wt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(u(gt,Ie).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[i,s]of this.typesMap)e.push([i,n[s]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[i,s]of this.constructor.typesMap)e.push([i,n[s]]);return e}_updateProperty(e,n,i){const s=this._drawingOptions,a=s[n],o=l=>{var h,d;s.updateProperty(n,l);const c=u(this,Hn).updateProperty(n,l);c&&I(this,Dt,Hc).call(this,c),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),e===this.colorType&&((d=this._colorPicker)==null||d.update(l))};this.addCommands({cmd:o.bind(this,i),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,gt._mergeSVGProperties(u(this,Hn).getPathResizingSVGProperties(I(this,Dt,vp).call(this)),{bbox:I(this,Dt,wl).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,gt._mergeSVGProperties(u(this,Hn).getPathResizedSVGProperties(I(this,Dt,vp).call(this)),{bbox:I(this,Dt,wl).call(this)}))}_onTranslating(e,n){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:I(this,Dt,wl).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,gt._mergeSVGProperties(u(this,Hn).getPathTranslatedSVGProperties(I(this,Dt,vp).call(this),this.parentDimensions),{bbox:I(this,Dt,wl).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,u(this,Uu)&&(S(this,Uu,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){I(this,Dt,Cy).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(I(this,Dt,Uc).call(this),I(this,Dt,Hc).call(this,u(this,Hn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),I(this,Dt,Cy).call(this)):e&&(this._uiManager.addShouldRescale(this),I(this,Dt,Uc).call(this,e),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,gt._mergeSVGProperties({bbox:I(this,Dt,wl).call(this)},u(this,Hn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&I(this,Dt,Hc).call(this,u(this,Hn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const i=super.render();i.classList.add("draw");const s=document.createElement("div");i.append(s),s.setAttribute("aria-hidden","true"),s.className="internal";const[a,o]=this.parentDimensions;return this.setDims(this.width*a,this.height*o),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),i}static createDrawerInstance(e,n,i,s,a){Wt("Not implemented")}static startDrawing(e,n,i,s){var A;const{target:a,offsetX:o,offsetY:l,pointerId:c,pointerType:h}=s;if(u(gt,ia)&&u(gt,ia)!==h)return;const{viewport:{rotation:d}}=e,{width:f,height:p}=a.getBoundingClientRect(),v=S(gt,Fo,new AbortController),g=e.combinedSignal(v);if(u(gt,ra)||S(gt,ra,c),u(gt,ia)??S(gt,ia,h),window.addEventListener("pointerup",m=>{var y;u(gt,ra)===m.pointerId?this._endDraw(m):(y=u(gt,sa))==null||y.delete(m.pointerId)},{signal:g}),window.addEventListener("pointercancel",m=>{var y;u(gt,ra)===m.pointerId?this._currentParent.endDrawingSession():(y=u(gt,sa))==null||y.delete(m.pointerId)},{signal:g}),window.addEventListener("pointerdown",m=>{u(gt,ia)===m.pointerType&&((u(gt,sa)||S(gt,sa,new Set)).add(m.pointerId),u(gt,Ie).isCancellable()&&(u(gt,Ie).removeLastElement(),u(gt,Ie).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",Ar,{signal:g}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),a.addEventListener("touchmove",m=>{m.timeStamp===u(gt,Bo)&&me(m)},{signal:g}),e.toggleDrawing(),(A=n._editorUndoBar)==null||A.hide(),u(gt,Ie)){e.drawLayer.updateProperties(this._currentDrawId,u(gt,Ie).startNew(o,l,f,p,d));return}n.updateUIForDefaultProperties(this),S(gt,Ie,this.createDrawerInstance(o,l,f,p,d)),S(gt,zo,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(u(gt,zo).toSVGProperties(),u(gt,Ie).defaultSVGProperties),!0,!1)}static _drawMove(e){var a;if(S(gt,Bo,-1),!u(gt,Ie))return;const{offsetX:n,offsetY:i,pointerId:s}=e;if(u(gt,ra)===s){if(((a=u(gt,sa))==null?void 0:a.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,u(gt,Ie).add(n,i)),S(gt,Bo,e.timeStamp),me(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,S(gt,Ie,null),S(gt,zo,null),S(gt,ia,null),S(gt,Bo,NaN)),u(gt,Fo)&&(u(gt,Fo).abort(),S(gt,Fo,null),S(gt,ra,NaN),S(gt,sa,null))}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,u(gt,Ie).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const i=u(gt,Ie),s=this._currentDrawId,a=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(s,i.setLastElement(a))},undo:()=>{n.drawLayer.updateProperties(s,i.removeLastElement())},mustExec:!1,type:Pt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Pt.DRAW_STEP),!u(gt,Ie).isEmpty()){const{pageDimensions:[i,s],scale:a}=n,o=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:u(gt,Ie).getOutlines(i*a,s*a,a,this._INNER_MARGIN),drawingOptions:u(gt,zo),mustBeCommitted:!e});return this._cleanup(!0),o}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,i,s,a,o){Wt("Not implemented")}static async deserialize(e,n,i){var d,f;const{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}=n.viewport,c=this.deserializeDraw(o,l,s,a,this._INNER_MARGIN,e),h=await super.deserialize(e,n,i);return h.createDrawingOptions(e),I(d=h,Dt,Ey).call(d,{drawOutlines:c}),I(f=h,Dt,Uc).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(e){const[n,i]=this.pageTranslation,[s,a]=this.pageDimensions;return u(this,Hn).serialize([n,i,s,a],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Hn=new WeakMap,Uu=new WeakMap,Ie=new WeakMap,Fo=new WeakMap,zo=new WeakMap,ra=new WeakMap,ia=new WeakMap,sa=new WeakMap,Bo=new WeakMap,Dt=new WeakSet,Ey=function({drawOutlines:e,drawId:n,drawingOptions:i}){S(this,Hn,e),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=I(this,Dt,xy).call(this,e,this.parent),I(this,Dt,Hc).call(this,e.box)},xy=function(e,n){const{id:i}=n.drawLayer.draw(gt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i},Cy=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Uc=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=I(this,Dt,xy).call(this,u(this,Hn),e)}},jE=function([e,n,i,s]){const{parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[n,1-e,i*(o/a),s*(a/o)];case 180:return[1-e,1-n,i,s];case 270:return[1-n,e,i*(o/a),s*(a/o)];default:return[e,n,i,s]}},vp=function(){const{x:e,y:n,width:i,height:s,parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[1-n,e,i*(a/o),s*(o/a)];case 180:return[1-e,1-n,i,s];case 270:return[n,1-e,i*(a/o),s*(o/a)];default:return[e,n,i,s]}},Hc=function(e){if([this.x,this.y,this.width,this.height]=I(this,Dt,jE).call(this,e),this.div){this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)}this._onResized()},wl=function(){const{x:e,y:n,width:i,height:s,rotation:a,parentRotation:o,parentDimensions:[l,c]}=this;switch((a*4+o)/90){case 1:return[1-n-s,e,s,i];case 2:return[1-e-i,1-n-s,i,s];case 3:return[n,1-e-i,s,i];case 4:return[e,n-i*(l/c),s*(c/l),i*(l/c)];case 5:return[1-n,e,i*(l/c),s*(c/l)];case 6:return[1-e-s*(c/l),1-n,s*(c/l),i*(l/c)];case 7:return[n-i*(l/c),1-e-s*(c/l),i*(l/c),s*(c/l)];case 8:return[e-i,n-s,i,s];case 9:return[1-n,e-i,s,i];case 10:return[1-e,1-n,i,s];case 11:return[n-s,1-e,s,i];case 12:return[e-s*(c/l),n,s*(c/l),i*(l/c)];case 13:return[1-n-i*(l/c),e-s*(c/l),i*(l/c),s*(c/l)];case 14:return[1-e,1-n-i*(l/c),s*(c/l),i*(l/c)];case 15:return[n,1-e,i*(l/c),s*(c/l)];default:return[e,n,i,s]}},it(gt,"_currentDrawId",-1),it(gt,"_currentParent",null),k(gt,Ie,null),k(gt,Fo,null),k(gt,zo,null),k(gt,ra,NaN),k(gt,ia,null),k(gt,sa,null),k(gt,Bo,NaN),it(gt,"_INNER_MARGIN",3);let sg=gt;var ui,_e,Pe,jo,Hu,ln,Ue,hr,Uo,Ho,$o,$u,yp;class Ck{constructor(t,e,n,i,s,a){k(this,$u);k(this,ui,new Float64Array(6));k(this,_e);k(this,Pe);k(this,jo);k(this,Hu);k(this,ln);k(this,Ue,"");k(this,hr,0);k(this,Uo,new af);k(this,Ho);k(this,$o);S(this,Ho,n),S(this,$o,i),S(this,jo,s),S(this,Hu,a),[t,e]=I(this,$u,yp).call(this,t,e);const o=S(this,_e,[NaN,NaN,NaN,NaN,t,e]);S(this,ln,[t,e]),S(this,Pe,[{line:o,points:u(this,ln)}]),u(this,ui).set(o,0)}updateProperty(t,e){t==="stroke-width"&&S(this,Hu,e)}isEmpty(){return!u(this,Pe)||u(this,Pe).length===0}isCancellable(){return u(this,ln).length<=10}add(t,e){[t,e]=I(this,$u,yp).call(this,t,e);const[n,i,s,a]=u(this,ui).subarray(2,6),o=t-s,l=e-a;return Math.hypot(u(this,Ho)*o,u(this,$o)*l)<=2?null:(u(this,ln).push(t,e),isNaN(n)?(u(this,ui).set([s,a,t,e],2),u(this,_e).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(u(this,ui)[0])&&u(this,_e).splice(6,6),u(this,ui).set([n,i,s,a,t,e],0),u(this,_e).push(...dt.createBezierPoints(n,i,s,a,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(u(this,ln).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,i,s){S(this,Ho,n),S(this,$o,i),S(this,jo,s),[t,e]=I(this,$u,yp).call(this,t,e);const a=S(this,_e,[NaN,NaN,NaN,NaN,t,e]);S(this,ln,[t,e]);const o=u(this,Pe).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),u(this,Pe).push({line:a,points:u(this,ln)}),u(this,ui).set(a,0),S(this,hr,0),this.toSVGPath(),null}getLastElement(){return u(this,Pe).at(-1)}setLastElement(t){return u(this,Pe)?(u(this,Pe).push(t),S(this,_e,t.line),S(this,ln,t.points),S(this,hr,0),{path:{d:this.toSVGPath()}}):u(this,Uo).setLastElement(t)}removeLastElement(){if(!u(this,Pe))return u(this,Uo).removeLastElement();u(this,Pe).pop(),S(this,Ue,"");for(let t=0,e=u(this,Pe).length;t<e;t++){const{line:n,points:i}=u(this,Pe)[t];S(this,_e,n),S(this,ln,i),S(this,hr,0),this.toSVGPath()}return{path:{d:u(this,Ue)}}}toSVGPath(){const t=dt.svgRound(u(this,_e)[4]),e=dt.svgRound(u(this,_e)[5]);if(u(this,ln).length===2)return S(this,Ue,`${u(this,Ue)} M ${t} ${e} Z`),u(this,Ue);if(u(this,ln).length<=6){const i=u(this,Ue).lastIndexOf("M");S(this,Ue,`${u(this,Ue).slice(0,i)} M ${t} ${e}`),S(this,hr,6)}if(u(this,ln).length===4){const i=dt.svgRound(u(this,_e)[10]),s=dt.svgRound(u(this,_e)[11]);return S(this,Ue,`${u(this,Ue)} L ${i} ${s}`),S(this,hr,12),u(this,Ue)}const n=[];u(this,hr)===0&&(n.push(`M ${t} ${e}`),S(this,hr,6));for(let i=u(this,hr),s=u(this,_e).length;i<s;i+=6){const[a,o,l,c,h,d]=u(this,_e).slice(i,i+6).map(dt.svgRound);n.push(`C${a} ${o} ${l} ${c} ${h} ${d}`)}return S(this,Ue,u(this,Ue)+n.join(" ")),S(this,hr,u(this,_e).length),u(this,Ue)}getOutlines(t,e,n,i){const s=u(this,Pe).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),u(this,Uo).build(u(this,Pe),t,e,n,u(this,jo),u(this,Hu),i),S(this,ui,null),S(this,_e,null),S(this,Pe,null),S(this,Ue,null),u(this,Uo)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ui=new WeakMap,_e=new WeakMap,Pe=new WeakMap,jo=new WeakMap,Hu=new WeakMap,ln=new WeakMap,Ue=new WeakMap,hr=new WeakMap,Uo=new WeakMap,Ho=new WeakMap,$o=new WeakMap,$u=new WeakSet,yp=function(t,e){return dt._normalizePoint(t,e,u(this,Ho),u(this,$o),u(this,jo))};var un,Gd,Xd,$n,ci,hi,Wu,Vu,Wo,We,xi,UE,HE,$E;class af extends dt{constructor(){super(...arguments);k(this,We);k(this,un);k(this,Gd,0);k(this,Xd);k(this,$n);k(this,ci);k(this,hi);k(this,Wu);k(this,Vu);k(this,Wo)}build(e,n,i,s,a,o,l){S(this,ci,n),S(this,hi,i),S(this,Wu,s),S(this,Vu,a),S(this,Wo,o),S(this,Xd,l??0),S(this,$n,e),I(this,We,HE).call(this)}get thickness(){return u(this,Wo)}setLastElement(e){return u(this,$n).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return u(this,$n).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of u(this,$n)){if(e.push(`M${dt.svgRound(n[4])} ${dt.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${dt.svgRound(n[10])} ${dt.svgRound(n[11])}`);continue}for(let i=6,s=n.length;i<s;i+=6){const[a,o,l,c,h,d]=n.subarray(i,i+6).map(dt.svgRound);e.push(`C${a} ${o} ${l} ${c} ${h} ${d}`)}}return e.join("")}serialize([e,n,i,s],a){const o=[],l=[],[c,h,d,f]=I(this,We,UE).call(this);let p,v,g,A,m,y,w,b,E;switch(u(this,Vu)){case 0:E=dt._rescale,p=e,v=n+s,g=i,A=-s,m=e+c*i,y=n+(1-h-f)*s,w=e+(c+d)*i,b=n+(1-h)*s;break;case 90:E=dt._rescaleAndSwap,p=e,v=n,g=i,A=s,m=e+h*i,y=n+c*s,w=e+(h+f)*i,b=n+(c+d)*s;break;case 180:E=dt._rescale,p=e+i,v=n,g=-i,A=s,m=e+(1-c-d)*i,y=n+h*s,w=e+(1-c)*i,b=n+(h+f)*s;break;case 270:E=dt._rescaleAndSwap,p=e+i,v=n+s,g=-i,A=-s,m=e+(1-h-f)*i,y=n+(1-c-d)*s,w=e+(1-h)*i,b=n+(1-c)*s;break}for(const{line:T,points:R}of u(this,$n))o.push(E(T,p,v,g,A,a?new Array(T.length):null)),l.push(E(R,p,v,g,A,a?new Array(R.length):null));return{lines:o,points:l,rect:[m,y,w,b]}}static deserialize(e,n,i,s,a,{paths:{lines:o,points:l},rotation:c,thickness:h}){const d=[];let f,p,v,g,A;switch(c){case 0:A=dt._rescale,f=-e/i,p=n/s+1,v=1/i,g=-1/s;break;case 90:A=dt._rescaleAndSwap,f=-n/s,p=-e/i,v=1/s,g=1/i;break;case 180:A=dt._rescale,f=e/i+1,p=-n/s,v=-1/i,g=1/s;break;case 270:A=dt._rescaleAndSwap,f=n/s+1,p=e/i+1,v=-1/s,g=-1/i;break}if(!o){o=[];for(const y of l){const w=y.length;if(w===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1]]));continue}if(w===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1],NaN,NaN,NaN,NaN,y[2],y[3]]));continue}const b=new Float32Array(3*(w-2));o.push(b);let[E,T,R,P]=y.subarray(0,4);b.set([NaN,NaN,NaN,NaN,E,T],0);for(let _=4;_<w;_+=2){const N=y[_],B=y[_+1];b.set(dt.createBezierPoints(E,T,R,P,N,B),(_-2)*3),[E,T,R,P]=[R,P,N,B]}}}for(let y=0,w=o.length;y<w;y++)d.push({line:A(o[y].map(b=>b??NaN),f,p,v,g),points:A(l[y].map(b=>b??NaN),f,p,v,g)});const m=new this.prototype.constructor;return m.build(d,i,s,1,c,h,a),m}get box(){return u(this,un)}updateProperty(e,n){return e==="stroke-width"?I(this,We,$E).call(this,n):null}updateParentDimensions([e,n],i){const[s,a]=I(this,We,xi).call(this);S(this,ci,e),S(this,hi,n),S(this,Wu,i);const[o,l]=I(this,We,xi).call(this),c=o-s,h=l-a,d=u(this,un);return d[0]-=c,d[1]-=h,d[2]+=2*c,d[3]+=2*h,d}updateRotation(e){return S(this,Gd,e),{path:{transform:this.rotationTransform}}}get viewBox(){return u(this,un).map(dt.svgRound).join(" ")}get defaultProperties(){const[e,n]=u(this,un);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${dt.svgRound(e)} ${dt.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=u(this,un);let i=0,s=0,a=0,o=0,l=0,c=0;switch(u(this,Gd)){case 90:s=n/e,a=-e/n,l=e;break;case 180:i=-1,o=-1,l=e,c=n;break;case 270:s=-n/e,a=e/n,c=n;break;default:return""}return`matrix(${i} ${s} ${a} ${o} ${dt.svgRound(l)} ${dt.svgRound(c)})`}getPathResizingSVGProperties([e,n,i,s]){const[a,o]=I(this,We,xi).call(this),[l,c,h,d]=u(this,un);if(Math.abs(h-a)<=dt.PRECISION||Math.abs(d-o)<=dt.PRECISION){const A=e+i/2-(l+h/2),m=n+s/2-(c+d/2);return{path:{"transform-origin":`${dt.svgRound(e)} ${dt.svgRound(n)}`,transform:`${this.rotationTransform} translate(${A} ${m})`}}}const f=(i-2*a)/(h-2*a),p=(s-2*o)/(d-2*o),v=h/i,g=d/s;return{path:{"transform-origin":`${dt.svgRound(l)} ${dt.svgRound(c)}`,transform:`${this.rotationTransform} scale(${v} ${g}) translate(${dt.svgRound(a)} ${dt.svgRound(o)}) scale(${f} ${p}) translate(${dt.svgRound(-a)} ${dt.svgRound(-o)})`}}}getPathResizedSVGProperties([e,n,i,s]){const[a,o]=I(this,We,xi).call(this),l=u(this,un),[c,h,d,f]=l;if(l[0]=e,l[1]=n,l[2]=i,l[3]=s,Math.abs(d-a)<=dt.PRECISION||Math.abs(f-o)<=dt.PRECISION){const m=e+i/2-(c+d/2),y=n+s/2-(h+f/2);for(const{line:w,points:b}of u(this,$n))dt._translate(w,m,y,w),dt._translate(b,m,y,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${dt.svgRound(e)} ${dt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(i-2*a)/(d-2*a),v=(s-2*o)/(f-2*o),g=-p*(c+a)+e+a,A=-v*(h+o)+n+o;if(p!==1||v!==1||g!==0||A!==0)for(const{line:m,points:y}of u(this,$n))dt._rescale(m,g,A,p,v,m),dt._rescale(y,g,A,p,v,y);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${dt.svgRound(e)} ${dt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],i){const[s,a]=i,o=u(this,un),l=e-o[0],c=n-o[1];if(u(this,ci)===s&&u(this,hi)===a)for(const{line:h,points:d}of u(this,$n))dt._translate(h,l,c,h),dt._translate(d,l,c,d);else{const h=u(this,ci)/s,d=u(this,hi)/a;S(this,ci,s),S(this,hi,a);for(const{line:f,points:p}of u(this,$n))dt._rescale(f,l,c,h,d,f),dt._rescale(p,l,c,h,d,p);o[2]*=h,o[3]*=d}return o[0]=e,o[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${dt.svgRound(e)} ${dt.svgRound(n)}`}}}get defaultSVGProperties(){const e=u(this,un);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${dt.svgRound(e[0])} ${dt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}un=new WeakMap,Gd=new WeakMap,Xd=new WeakMap,$n=new WeakMap,ci=new WeakMap,hi=new WeakMap,Wu=new WeakMap,Vu=new WeakMap,Wo=new WeakMap,We=new WeakSet,xi=function(e=u(this,Wo)){const n=u(this,Xd)+e/2*u(this,Wu);return u(this,Vu)%180===0?[n/u(this,ci),n/u(this,hi)]:[n/u(this,hi),n/u(this,ci)]},UE=function(){const[e,n,i,s]=u(this,un),[a,o]=I(this,We,xi).call(this,0);return[e+a,n+o,i-2*a,s-2*o]},HE=function(){const e=S(this,un,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of u(this,$n)){if(s.length<=12){for(let l=4,c=s.length;l<c;l+=6)vt.pointBoundingBox(s[l],s[l+1],e);continue}let a=s[4],o=s[5];for(let l=6,c=s.length;l<c;l+=6){const[h,d,f,p,v,g]=s.subarray(l,l+6);vt.bezierBoundingBox(a,o,h,d,f,p,v,g,e),a=v,o=g}}const[n,i]=I(this,We,xi).call(this);e[0]=dn(e[0]-n,0,1),e[1]=dn(e[1]-i,0,1),e[2]=dn(e[2]+n,0,1),e[3]=dn(e[3]+i,0,1),e[2]-=e[0],e[3]-=e[1]},$E=function(e){const[n,i]=I(this,We,xi).call(this);S(this,Wo,e);const[s,a]=I(this,We,xi).call(this),[o,l]=[s-n,a-i],c=u(this,un);return c[0]-=o,c[1]-=l,c[2]+=2*o,c[3]+=2*l,c};class Xg extends BE{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Yt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Xg(this._viewParameters);return t.updateAll(this),t}}var Eg,WE;const Nl=class Nl extends sg{constructor(e){super({...e,name:"inkEditor"});k(this,Eg);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){Yt.initialize(e,n),this._defaultDrawingOptions=new Xg(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return kt(this,"typesMap",new Map([[Pt.INK_THICKNESS,"stroke-width"],[Pt.INK_COLOR,"stroke"],[Pt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,i,s,a){return new Ck(e,n,i,s,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,i,s,a,o){return af.deserialize(e,n,i,s,a,o)}static async deserialize(e,n,i){let s=null;if(e instanceof H0){const{data:{inkLists:o,rect:l,rotation:c,id:h,color:d,opacity:f,borderStyle:{rawWidth:p},popupRef:v,contentsObj:g},parent:{page:{pageNumber:A}}}=e;s=e={annotationType:Et.INK,color:Array.from(d),thickness:p,opacity:f,paths:{points:o},boxes:null,pageIndex:A-1,rect:l.slice(0),rotation:c,annotationElementId:h,id:h,deleted:!1,popupRef:v,comment:(g==null?void 0:g.str)||null}}const a=await super.deserialize(e,n,i);return a._initialData=s,e.comment&&a.setCommentData(e.comment),a}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new eg(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Pt.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:i}){this._drawingOptions=Nl.getDefaultDrawingOptions({stroke:vt.makeHexColor(...e),"stroke-width":n,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i,rect:s}=this.serializeDraw(e),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":l}}=this,c={annotationType:Et.INK,color:Yt._colorManager.convert(a),opacity:o,thickness:l,paths:{lines:n,points:i},pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(c),e?(c.isCopy=!0,c):this.annotationElementId&&!I(this,Eg,WE).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(e){const{points:n,rect:i}=this.serializeDraw(!1),s={rect:i,thickness:this._drawingOptions["stroke-width"],points:n};return this.hasEditedComment&&(s.popup=this.comment),e.updateEdited(s),null}};Eg=new WeakSet,WE=function(e){const{color:n,thickness:i,opacity:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((o,l)=>o!==n[l])||e.thickness!==i||e.opacity!==s||e.pageIndex!==a},it(Nl,"_type","ink"),it(Nl,"_editorType",Et.INK),it(Nl,"_defaultDrawingOptions",null);let Ty=Nl;class ky extends af{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Df=8,bc=3;var Vo,Bt,Ry,Or,VE,GE,Iy,wp,XE,YE,KE,_y,Py,ZE;class os{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:i},s,a,o,l){let c=new OffscreenCanvas(1,1),h=c.getContext("2d",{alpha:!1});const d=200,f=h.font=`${n} ${i} ${d}px ${e}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:v,actualBoundingBoxAscent:g,actualBoundingBoxDescent:A,fontBoundingBoxAscent:m,fontBoundingBoxDescent:y,width:w}=h.measureText(t),b=1.5,E=Math.ceil(Math.max(Math.abs(p)+Math.abs(v)||0,w)*b),T=Math.ceil(Math.max(Math.abs(g)+Math.abs(A)||d,Math.abs(m)+Math.abs(y)||d)*b);c=new OffscreenCanvas(E,T),h=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=f,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,E,T),h.fillStyle="black",h.fillText(t,E*(b-1)/2,T*(3-b)/2);const R=I(this,Bt,_y).call(this,h.getImageData(0,0,E,T).data),P=I(this,Bt,KE).call(this,R),_=I(this,Bt,Py).call(this,P),N=I(this,Bt,Iy).call(this,R,E,T,_);return this.processDrawnLines({lines:{curves:N,width:E,height:T},pageWidth:s,pageHeight:a,rotation:o,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(t,e,n,i,s){const[a,o,l]=I(this,Bt,ZE).call(this,t),[c,h]=I(this,Bt,YE).call(this,a,o,l,Math.hypot(o,l)*u(this,Vo).sigmaSFactor,u(this,Vo).sigmaR,u(this,Vo).kernelSize),d=I(this,Bt,Py).call(this,h),f=I(this,Bt,Iy).call(this,c,o,l,d);return this.processDrawnLines({lines:{curves:f,width:o,height:l},pageWidth:e,pageHeight:n,rotation:i,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:i,innerMargin:s,mustSmooth:a,areContours:o}){i%180!==0&&([e,n]=[n,e]);const{curves:l,width:c,height:h}=t,d=t.thickness??0,f=[],p=Math.min(e/c,n/h),v=p/e,g=p/n,A=[];for(const{points:y}of l){const w=a?I(this,Bt,XE).call(this,y):y;if(!w)continue;A.push(w);const b=w.length,E=new Float32Array(b),T=new Float32Array(3*(b===2?2:b-2));if(f.push({line:T,points:E}),b===2){E[0]=w[0]*v,E[1]=w[1]*g,T.set([NaN,NaN,NaN,NaN,E[0],E[1]],0);continue}let[R,P,_,N]=w;R*=v,P*=g,_*=v,N*=g,E.set([R,P,_,N],0),T.set([NaN,NaN,NaN,NaN,R,P],0);for(let B=4;B<b;B+=2){const O=E[B]=w[B]*v,M=E[B+1]=w[B+1]*g;T.set(dt.createBezierPoints(R,P,_,N,O,M),(B-2)*3),[R,P,_,N]=[_,N,O,M]}}if(f.length===0)return null;const m=o?new ky:new af;return m.build(f,e,n,1,i,o?0:d,s),{outline:m,newCurves:A,areContours:o,thickness:d,width:c,height:h}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:i,height:s}){let a=1/0,o=-1/0,l=0;for(const w of t){l+=w.length;for(let b=2,E=w.length;b<E;b++){const T=w[b]-w[b-2];a=Math.min(a,T),o=Math.max(o,T)}}let c;a>=-128&&o<=127?c=Int8Array:a>=-32768&&o<=32767?c=Int16Array:c=Int32Array;const h=t.length,d=Df+bc*h,f=new Uint32Array(d);let p=0;f[p++]=d*Uint32Array.BYTES_PER_ELEMENT+(l-2*h)*c.BYTES_PER_ELEMENT,f[p++]=0,f[p++]=i,f[p++]=s,f[p++]=e?0:1,f[p++]=Math.max(0,Math.floor(n??0)),f[p++]=h,f[p++]=c.BYTES_PER_ELEMENT;for(const w of t)f[p++]=w.length-2,f[p++]=w[0],f[p++]=w[1];const v=new CompressionStream("deflate-raw"),g=v.writable.getWriter();await g.ready,g.write(f);const A=c.prototype.constructor;for(const w of t){const b=new A(w.length-2);for(let E=2,T=w.length;E<T;E++)b[E-2]=w[E]-w[E-2];g.write(b)}g.close();const m=await new Response(v.readable).arrayBuffer(),y=new Uint8Array(m);return Qb(y)}static async decompressSignature(t){try{const e=YC(t),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),s=i.getWriter();await s.ready,s.write(e).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let a=null,o=0;for await(const w of n)a||(a=new Uint8Array(new Uint32Array(w.buffer,0,4)[0])),a.set(w,o),o+=w.length;const l=new Uint32Array(a.buffer,0,a.length>>2),c=l[1];if(c!==0)throw new Error(`Invalid version: ${c}`);const h=l[2],d=l[3],f=l[4]===0,p=l[5],v=l[6],g=l[7],A=[],m=(Df+bc*v)*Uint32Array.BYTES_PER_ELEMENT;let y;switch(g){case Int8Array.BYTES_PER_ELEMENT:y=new Int8Array(a.buffer,m);break;case Int16Array.BYTES_PER_ELEMENT:y=new Int16Array(a.buffer,m);break;case Int32Array.BYTES_PER_ELEMENT:y=new Int32Array(a.buffer,m);break}o=0;for(let w=0;w<v;w++){const b=l[bc*w+Df],E=new Float32Array(b+2);A.push(E);for(let T=0;T<bc-1;T++)E[T]=l[bc*w+Df+T+1];for(let T=0;T<b;T++)E[T+2]=E[T]+y[o++]}return{areContours:f,thickness:p,outlines:A,width:h,height:d}}catch(e){return At(`decompressSignature: ${e}`),null}}}Vo=new WeakMap,Bt=new WeakSet,Ry=function(t,e,n,i){return n-=t,i-=e,n===0?i>0?0:4:n===1?i+6:2-i},Or=new WeakMap,VE=function(t,e,n,i,s,a,o){const l=I(this,Bt,Ry).call(this,n,i,s,a);for(let c=0;c<8;c++){const h=(-c+l-o+16)%8,d=u(this,Or)[2*h],f=u(this,Or)[2*h+1];if(t[(n+d)*e+(i+f)]!==0)return h}return-1},GE=function(t,e,n,i,s,a,o){const l=I(this,Bt,Ry).call(this,n,i,s,a);for(let c=0;c<8;c++){const h=(c+l+o+16)%8,d=u(this,Or)[2*h],f=u(this,Or)[2*h+1];if(t[(n+d)*e+(i+f)]!==0)return h}return-1},Iy=function(t,e,n,i){const s=t.length,a=new Int32Array(s);for(let h=0;h<s;h++)a[h]=t[h]<=i?1:0;for(let h=1;h<n-1;h++)a[h*e]=a[h*e+e-1]=0;for(let h=0;h<e;h++)a[h]=a[e*n-1-h]=0;let o=1,l;const c=[];for(let h=1;h<n-1;h++){l=1;for(let d=1;d<e-1;d++){const f=h*e+d,p=a[f];if(p===0)continue;let v=h,g=d;if(p===1&&a[f-1]===0)o+=1,g-=1;else if(p>=1&&a[f+1]===0)o+=1,g+=1,p>1&&(l=p);else{p!==1&&(l=Math.abs(p));continue}const A=[d,h],m=g===d+1,y={isHole:m,points:A,id:o,parent:0};c.push(y);let w;for(const B of c)if(B.id===l){w=B;break}w?w.isHole?y.parent=m?w.parent:l:y.parent=m?l:w.parent:y.parent=m?l:0;const b=I(this,Bt,VE).call(this,a,e,h,d,v,g,0);if(b===-1){a[f]=-o,a[f]!==1&&(l=Math.abs(a[f]));continue}let E=u(this,Or)[2*b],T=u(this,Or)[2*b+1];const R=h+E,P=d+T;v=R,g=P;let _=h,N=d;for(;;){const B=I(this,Bt,GE).call(this,a,e,_,N,v,g,1);E=u(this,Or)[2*B],T=u(this,Or)[2*B+1];const O=_+E,M=N+T;A.push(M,O);const x=_*e+N;if(a[x+1]===0?a[x]=-o:a[x]===1&&(a[x]=o),O===h&&M===d&&_===R&&N===P){a[f]!==1&&(l=Math.abs(a[f]));break}else v=_,g=N,_=O,N=M}}}return c},wp=function(t,e,n,i){if(n-e<=4){for(let R=e;R<n-2;R+=2)i.push(t[R],t[R+1]);return}const s=t[e],a=t[e+1],o=t[n-4]-s,l=t[n-3]-a,c=Math.hypot(o,l),h=o/c,d=l/c,f=h*a-d*s,p=l/o,v=1/c,g=Math.atan(p),A=Math.cos(g),m=Math.sin(g),y=v*(Math.abs(A)+Math.abs(m)),w=v*(1-y+y**2),b=Math.max(Math.atan(Math.abs(m+A)*w),Math.atan(Math.abs(m-A)*w));let E=0,T=e;for(let R=e+2;R<n-2;R+=2){const P=Math.abs(f-h*t[R+1]+d*t[R]);P>E&&(T=R,E=P)}E>(c*b)**2?(I(this,Bt,wp).call(this,t,e,T+2,i),I(this,Bt,wp).call(this,t,T,n,i)):i.push(s,a)},XE=function(t){const e=[],n=t.length;return I(this,Bt,wp).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},YE=function(t,e,n,i,s,a){const o=new Float32Array(a**2),l=-2*i**2,c=a>>1;for(let g=0;g<a;g++){const A=(g-c)**2;for(let m=0;m<a;m++)o[g*a+m]=Math.exp((A+(m-c)**2)/l)}const h=new Float32Array(256),d=-2*s**2;for(let g=0;g<256;g++)h[g]=Math.exp(g**2/d);const f=t.length,p=new Uint8Array(f),v=new Uint32Array(256);for(let g=0;g<n;g++)for(let A=0;A<e;A++){const m=g*e+A,y=t[m];let w=0,b=0;for(let T=0;T<a;T++){const R=g+T-c;if(!(R<0||R>=n))for(let P=0;P<a;P++){const _=A+P-c;if(_<0||_>=e)continue;const N=t[R*e+_],B=o[T*a+P]*h[Math.abs(N-y)];w+=N*B,b+=B}}const E=p[m]=Math.round(w/b);v[E]++}return[p,v]},KE=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},_y=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let i=-1/0,s=1/0;for(let o=0,l=n.length;o<l;o++){const c=n[o]=t[o<<2];i=Math.max(i,c),s=Math.min(s,c)}const a=255/(i-s);for(let o=0,l=n.length;o<l;o++)n[o]=(n[o]-s)*a;return n},Py=function(t){let e,n=-1/0,i=-1/0;const s=t.findIndex(l=>l!==0);let a=s,o=s;for(e=s;e<256;e++){const l=t[e];l>n&&(e-a>i&&(i=e-a,o=e-1),n=l,a=e)}for(e=o-1;e>=0&&!(t[e]>t[e+1]);e--);return e},ZE=function(t){const e=t,{width:n,height:i}=t,{maxDim:s}=u(this,Vo);let a=n,o=i;if(n>s||i>s){let f=n,p=i,v=Math.log2(Math.max(n,i)/s);const g=Math.floor(v);v=v===g?g-1:g;for(let m=0;m<v;m++){a=Math.ceil(f/2),o=Math.ceil(p/2);const y=new OffscreenCanvas(a,o);y.getContext("2d").drawImage(t,0,0,f,p,0,0,a,o),f=a,p=o,t!==e&&t.close(),t=y.transferToImageBitmap()}const A=Math.min(s/a,s/o);a=Math.round(a*A),o=Math.round(o*A)}const c=new OffscreenCanvas(a,o).getContext("2d",{willReadFrequently:!0});c.fillStyle="white",c.fillRect(0,0,a,o),c.filter="grayscale(1)",c.drawImage(t,0,0,t.width,t.height,0,0,a,o);const h=c.getImageData(0,0,a,o).data;return[I(this,Bt,_y).call(this,h),a,o]},k(os,Bt),k(os,Vo,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),k(os,Or,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class $0 extends BE{constructor(){super(),super.updateProperties({fill:Yt._defaultLineColor,"stroke-width":0})}clone(){const t=new $0;return t.updateAll(this),t}}class W0 extends Xg{constructor(t){super(t),super.updateProperties({stroke:Yt._defaultLineColor,"stroke-width":1})}clone(){const t=new W0(this._viewParameters);return t.updateAll(this),t}}var aa,di,oa,Go;const _n=class _n extends sg{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});k(this,aa,!1);k(this,di,null);k(this,oa,null);k(this,Go,null);this._willKeepAspectRatio=!0,S(this,oa,e.signatureData||null),S(this,di,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){Yt.initialize(e,n),this._defaultDrawingOptions=new $0,this._defaultDrawnSignatureOptions=new W0(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return kt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!u(this,di)}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(u(this,oa)){const{lines:s,mustSmooth:a,areContours:o,description:l,uuid:c,heightInPage:h}=u(this,oa),{rawDims:{pageWidth:d,pageHeight:f},rotation:p}=this.parent.viewport,v=os.processDrawnLines({lines:s,pageWidth:d,pageHeight:f,rotation:p,innerMargin:_n._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(v,h,l,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:u(this,di)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){S(this,Go,e),this.addEditToolbar()}getUuid(){return u(this,Go)}get description(){return u(this,di)}set description(e){S(this,di,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:i,width:s,height:a}=u(this,oa),o=Math.max(s,a),l=os.processDrawnLines({lines:{curves:e.map(c=>({points:c})),thickness:i,width:s,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,n,i,s){const{x:a,y:o}=this,{outline:l}=S(this,oa,e);S(this,aa,l instanceof ky),this.description=i;let c;u(this,aa)?c=_n.getDefaultDrawingOptions():(c=_n._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:c});const[h,d]=this.parentDimensions,[,f]=this.pageDimensions;let p=n/f;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(h*this.width,d*this.height),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:s}=this.parent.viewport;return os.process(e,n,i,s,_n._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:i,pageHeight:s},rotation:a}=this.parent.viewport;return os.extractContoursFromText(e,n,i,s,a,_n._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:s}=this.parent.viewport;return os.processDrawnLines({lines:e,pageWidth:n,pageHeight:i,rotation:s,innerMargin:_n._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=_n.getDefaultDrawingOptions():(this._drawingOptions=_n._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:i,rect:s}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":a}}=this,o={annotationType:Et.SIGNATURE,isSignature:!0,areContours:u(this,aa),color:[0,0,0],thickness:u(this,aa)?0:a,pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(o),e?(o.paths={lines:n,points:i},o.uuid=u(this,Go),o.isCopy=!0):o.lines=n,u(this,di)&&(o.accessibilityData={type:"Figure",alt:u(this,di)}),o}static deserializeDraw(e,n,i,s,a,o){return o.areContours?ky.deserialize(e,n,i,s,a,o):af.deserialize(e,n,i,s,a,o)}static async deserialize(e,n,i){var a;const s=await super.deserialize(e,n,i);return S(s,aa,e.areContours),s.description=((a=e.accessibilityData)==null?void 0:a.alt)||"",S(s,Go,e.uuid),s}};aa=new WeakMap,di=new WeakMap,oa=new WeakMap,Go=new WeakMap,it(_n,"_type","signature"),it(_n,"_editorType",Et.SIGNATURE),it(_n,"_defaultDrawingOptions",null);let Oy=_n;var qt,Oe,la,ns,ua,Gu,rs,Xo,fi,Wn,Xu,Mt,$c,Wc,Ap,bp,Sp,Ny,Ep,QE;class Ly extends Yt{constructor(e){super({...e,name:"stampEditor"});k(this,Mt);k(this,qt,null);k(this,Oe,null);k(this,la,null);k(this,ns,null);k(this,ua,null);k(this,Gu,"");k(this,rs,null);k(this,Xo,!1);k(this,fi,null);k(this,Wn,!1);k(this,Xu,!1);S(this,ns,e.bitmapUrl),S(this,ua,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){Yt.initialize(e,n)}static isHandlingMimeForPasting(e){return Tv.includes(e)}static paste(e,n){n.pasteEditor({mode:Et.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:a,height:o}=e||this.copyCanvas(null,null,!0).imageData,l=await i.guess({name:"altText",request:{data:s,width:a,height:o,channels:s.length/(a*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),n&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var e;u(this,Oe)&&(S(this,qt,null),this._uiManager.imageManager.deleteId(u(this,Oe)),(e=u(this,rs))==null||e.remove(),S(this,rs,null),u(this,fi)&&(clearTimeout(u(this,fi)),S(this,fi,null))),super.remove()}rebuild(){if(!this.parent){u(this,Oe)&&I(this,Mt,Ap).call(this);return}super.rebuild(),this.div!==null&&(u(this,Oe)&&u(this,rs)===null&&I(this,Mt,Ap).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(u(this,la)||u(this,qt)||u(this,ns)||u(this,ua)||u(this,Oe)||u(this,Xo))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),u(this,Xo)||(u(this,qt)?I(this,Mt,bp).call(this):I(this,Mt,Ap).call(this)),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:i,bitmap:s}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(S(this,Oe,i),s&&S(this,qt,s),S(this,Xo,!1),I(this,Mt,bp).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;u(this,fi)!==null&&clearTimeout(u(this,fi)),S(this,fi,setTimeout(()=>{S(this,fi,null),I(this,Mt,Ny).call(this)},200))}copyCanvas(e,n,i=!1){var p;e||(e=224);const{width:s,height:a}=u(this,qt),o=new wi;let l=u(this,qt),c=s,h=a,d=null;if(n){if(s>n||a>n){const P=Math.min(n/s,n/a);c=Math.floor(s*P),h=Math.floor(a*P)}d=document.createElement("canvas");const v=d.width=Math.ceil(c*o.sx),g=d.height=Math.ceil(h*o.sy);u(this,Wn)||(l=I(this,Mt,Sp).call(this,v,g));const A=d.getContext("2d");A.filter=this._uiManager.hcmFilter;let m="white",y="#cfcfd8";this._uiManager.hcmFilter!=="none"?y="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(m="#8f8f9d",y="#42414d");const w=15,b=w*o.sx,E=w*o.sy,T=new OffscreenCanvas(b*2,E*2),R=T.getContext("2d");R.fillStyle=m,R.fillRect(0,0,b*2,E*2),R.fillStyle=y,R.fillRect(0,0,b,E),R.fillRect(b,E,b,E),A.fillStyle=A.createPattern(T,"repeat"),A.fillRect(0,0,v,g),A.drawImage(l,0,0,l.width,l.height,0,0,v,g)}let f=null;if(i){let v,g;if(o.symmetric&&l.width<e&&l.height<e)v=l.width,g=l.height;else if(l=u(this,qt),s>e||a>e){const y=Math.min(e/s,e/a);v=Math.floor(s*y),g=Math.floor(a*y),u(this,Wn)||(l=I(this,Mt,Sp).call(this,v,g))}const m=new OffscreenCanvas(v,g).getContext("2d",{willReadFrequently:!0});m.drawImage(l,0,0,l.width,l.height,0,0,v,g),f={width:v,height:g,data:m.getImageData(0,0,v,g).data}}return{canvas:d,width:c,height:h,imageData:f}}static async deserialize(e,n,i){var A;let s=null,a=!1;if(e instanceof fE){const{data:{rect:m,rotation:y,id:w,structParent:b,popupRef:E,contentsObj:T},container:R,parent:{page:{pageNumber:P}},canvas:_}=e;let N,B;_?(delete e.canvas,{id:N,bitmap:B}=i.imageManager.getFromCanvas(R.id,_),_.remove()):(a=!0,e._hasNoCanvas=!0);const O=((A=await n._structTree.getAriaAttributes(`${D0}${w}`))==null?void 0:A.get("aria-label"))||"";s=e={annotationType:Et.STAMP,bitmapId:N,bitmap:B,pageIndex:P-1,rect:m.slice(0),rotation:y,annotationElementId:w,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:O},isSvg:!1,structParent:b,popupRef:E,comment:(T==null?void 0:T.str)||null}}const o=await super.deserialize(e,n,i),{rect:l,bitmap:c,bitmapUrl:h,bitmapId:d,isSvg:f,accessibilityData:p}=e;a?(i.addMissingCanvas(e.id,o),S(o,Xo,!0)):d&&i.imageManager.isValidId(d)?(S(o,Oe,d),c&&S(o,qt,c)):S(o,ns,h),S(o,Wn,f);const[v,g]=o.pageDimensions;return o.width=(l[2]-l[0])/v,o.height=(l[3]-l[1])/g,p&&(o.altTextData=p),o._initialData=s,e.comment&&o.setCommentData(e.comment),S(o,Xu,!!s),o}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:Et.STAMP,bitmapId:u(this,Oe),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:u(this,Wn),structTreeParentId:this._structTreeParentId};if(this.addComment(i),e)return i.bitmapUrl=I(this,Mt,Ep).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:s,altText:a}=this.serializeAltText(!1);if(!s&&a&&(i.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const l=I(this,Mt,QE).call(this,i);if(l.isSame)return null;l.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,n===null)return i;n.stamps||(n.stamps=new Map);const o=u(this,Wn)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(u(this,Oe)))n.stamps.set(u(this,Oe),{area:o,serialized:i}),i.bitmap=I(this,Mt,Ep).call(this,!1);else if(u(this,Wn)){const l=n.stamps.get(u(this,Oe));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=I(this,Mt,Ep).call(this,!1))}return i}renderAnnotationElement(e){const n={rect:this.getRect(0,0)};return this.hasEditedComment&&(n.popup=this.comment),e.updateEdited(n),null}}qt=new WeakMap,Oe=new WeakMap,la=new WeakMap,ns=new WeakMap,ua=new WeakMap,Gu=new WeakMap,rs=new WeakMap,Xo=new WeakMap,fi=new WeakMap,Wn=new WeakMap,Xu=new WeakMap,Mt=new WeakSet,$c=function(e,n=!1){if(!e){this.remove();return}S(this,qt,e.bitmap),n||(S(this,Oe,e.id),S(this,Wn,e.isSvg)),e.file&&S(this,Gu,e.file.name),I(this,Mt,bp).call(this)},Wc=function(){if(S(this,la,null),this._uiManager.enableWaiting(!1),!!u(this,rs)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,qt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,qt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Ap=function(){if(u(this,Oe)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,Oe)).then(i=>I(this,Mt,$c).call(this,i,!0)).finally(()=>I(this,Mt,Wc).call(this));return}if(u(this,ns)){const i=u(this,ns);S(this,ns,null),this._uiManager.enableWaiting(!0),S(this,la,this._uiManager.imageManager.getFromUrl(i).then(s=>I(this,Mt,$c).call(this,s)).finally(()=>I(this,Mt,Wc).call(this)));return}if(u(this,ua)){const i=u(this,ua);S(this,ua,null),this._uiManager.enableWaiting(!0),S(this,la,this._uiManager.imageManager.getFromFile(i).then(s=>I(this,Mt,$c).call(this,s)).finally(()=>I(this,Mt,Wc).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Tv.join(",");const n=this._uiManager._signal;S(this,la,new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),I(this,Mt,$c).call(this,s)}i()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>I(this,Mt,Wc).call(this))),e.click()},bp=function(){var d;const{div:e}=this;let{width:n,height:i}=u(this,qt);const[s,a]=this.pageDimensions,o=.75;if(this.width)n=this.width*s,i=this.height*a;else if(n>o*s||i>o*a){const f=Math.min(o*s/n,o*a/i);n*=f,i*=f}const[l,c]=this.parentDimensions;this.setDims(n*l/s,i*c/a),this._uiManager.enableWaiting(!1);const h=S(this,rs,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=n/s,this.height=i/a,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),I(this,Mt,Ny).call(this),u(this,Xu)||(this.parent.addUndoableEditor(this),S(this,Xu,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,Gu)&&this.div.setAttribute("aria-description",u(this,Gu)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Sp=function(e,n){const{width:i,height:s}=u(this,qt);let a=i,o=s,l=u(this,qt);for(;a>2*e||o>2*n;){const c=a,h=o;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*n&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const d=new OffscreenCanvas(a,o);d.getContext("2d").drawImage(l,0,0,c,h,0,0,a,o),l=d.transferToImageBitmap()}return l},Ny=function(){const[e,n]=this.parentDimensions,{width:i,height:s}=this,a=new wi,o=Math.ceil(i*e*a.sx),l=Math.ceil(s*n*a.sy),c=u(this,rs);if(!c||c.width===o&&c.height===l)return;c.width=o,c.height=l;const h=u(this,Wn)?u(this,qt):I(this,Mt,Sp).call(this,o,l),d=c.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(h,0,0,h.width,h.height,0,0,o,l)},Ep=function(e){if(e){if(u(this,Wn)){const s=this._uiManager.imageManager.getSvgUrl(u(this,Oe));if(s)return s}const n=document.createElement("canvas");return{width:n.width,height:n.height}=u(this,qt),n.getContext("2d").drawImage(u(this,qt),0,0),n.toDataURL()}if(u(this,Wn)){const[n,i]=this.pageDimensions,s=Math.round(this.width*n*ka.PDF_TO_CSS_UNITS),a=Math.round(this.height*i*ka.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(s,a);return o.getContext("2d").drawImage(u(this,qt),0,0,u(this,qt).width,u(this,qt).height,0,0,s,a),o.transferToImageBitmap()}return structuredClone(u(this,qt))},QE=function(e){var o;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,s=e.pageIndex===n,a=(((o=e.accessibilityData)==null?void 0:o.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&a,isSameAltText:a}},it(Ly,"_type","stamp"),it(Ly,"_editorType",Et.STAMP);var Yo,Yu,pi,ca,is,Vn,ha,Ku,Ko,Lr,ss,Le,as,da,Zu,mt,fa,te,JE,Xr,My,Fy,xp;const Sr=class Sr{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:i,accessibilityManager:s,annotationLayer:a,drawLayer:o,textLayer:l,viewport:c,l10n:h}){k(this,te);k(this,Yo);k(this,Yu,!1);k(this,pi,null);k(this,ca,null);k(this,is,null);k(this,Vn,new Map);k(this,ha,!1);k(this,Ku,!1);k(this,Ko,!1);k(this,Lr,null);k(this,ss,null);k(this,Le,null);k(this,as,null);k(this,da,null);k(this,Zu,-1);k(this,mt);const d=[...u(Sr,fa).values()];if(!Sr._initialized){Sr._initialized=!0;for(const f of d)f.initialize(h,t)}t.registerEditorTypes(d),S(this,mt,t),this.pageIndex=e,this.div=n,S(this,Yo,s),S(this,pi,a),this.viewport=c,S(this,Le,l),this.drawLayer=o,this._structTree=i,u(this,mt).addLayer(this)}get isEmpty(){return u(this,Vn).size===0}get isInvisible(){return this.isEmpty&&u(this,mt).getMode()===Et.NONE}updateToolbar(t){u(this,mt).updateToolbar(t)}updateMode(t=u(this,mt).getMode()){switch(I(this,te,xp).call(this),t){case Et.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Et.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Et.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of u(Sr,fa).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=u(this,Le))==null?void 0:e.div)}setEditingState(t){u(this,mt).setEditingState(t)}addCommands(t){u(this,mt).addCommands(t)}cleanUndoStack(t){u(this,mt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=u(this,pi))==null||e.div.classList.toggle("disabled",!t)}async enable(){var n;S(this,Ko,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(n=u(this,da))==null||n.abort(),S(this,da,null);const t=new Set;for(const i of u(this,Vn).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(u(this,mt).removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!u(this,pi)){S(this,Ko,!1);return}const e=u(this,pi).getEditableAnnotations();for(const i of e){if(i.hide(),u(this,mt).isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}S(this,Ko,!1)}disable(){var i;if(S(this,Ku,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),u(this,Le)&&!u(this,da)){S(this,da,new AbortController);const s=u(this,mt).combinedSignal(u(this,da));u(this,Le).div.addEventListener("pointerdown",a=>{const{clientX:l,clientY:c,timeStamp:h}=a,d=u(this,Zu);if(h-d>500){S(this,Zu,h);return}S(this,Zu,-1);const{classList:f}=this.div;f.toggle("getElements",!0);const p=document.elementsFromPoint(l,c);if(f.toggle("getElements",!1),!this.div.contains(p[0]))return;let v;const g=new RegExp(`^${Gb}[0-9]+$`);for(const m of p)if(g.test(m.id)){v=m.id;break}if(!v)return;const A=u(this,Vn).get(v);(A==null?void 0:A.annotationElementId)===null&&(a.stopPropagation(),a.preventDefault(),A.dblclick())},{signal:s,capture:!0})}const t=new Map,e=new Map;for(const s of u(this,Vn).values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){t.set(s.annotationElementId,s);continue}else e.set(s.annotationElementId,s);(i=this.getEditableAnnotation(s.annotationElementId))==null||i.show(),s.remove()}if(u(this,pi)){const s=u(this,pi).getEditableAnnotations();for(const a of s){const{id:o}=a.data;if(u(this,mt).isDeletedAnnotationElement(o)){a.updateEdited({deleted:!0});continue}let l=e.get(o);if(l){l.resetAnnotationElement(a),l.show(!1),a.show();continue}l=t.get(o),l&&(u(this,mt).addChangedExistingAnnotation(l),l.renderAnnotationElement(a)&&l.show(!1)),a.show()}}I(this,te,xp).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const s of u(Sr,fa).values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),S(this,Ku,!1)}getEditableAnnotation(t){var e;return((e=u(this,pi))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){u(this,mt).getActive()!==t&&u(this,mt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=u(this,Le))!=null&&t.div&&!u(this,as)){S(this,as,new AbortController);const e=u(this,mt).combinedSignal(u(this,as));u(this,Le).div.addEventListener("pointerdown",I(this,te,JE).bind(this),{signal:e}),u(this,Le).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=u(this,Le))!=null&&t.div&&u(this,as)&&(u(this,as).abort(),S(this,as,null),u(this,Le).div.classList.remove("highlighting"))}enableClick(){if(u(this,ca))return;S(this,ca,new AbortController);const t=u(this,mt).combinedSignal(u(this,ca));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=u(this,ca))==null||t.abort(),S(this,ca,null)}attach(t){u(this,Vn).set(t.id,t);const{annotationElementId:e}=t;e&&u(this,mt).isDeletedAnnotationElement(e)&&u(this,mt).removeDeletedAnnotationElement(t)}detach(t){var e;u(this,Vn).delete(t.id),(e=u(this,Yo))==null||e.removePointerInTextLayer(t.contentDiv),!u(this,Ku)&&t.annotationElementId&&u(this,mt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),u(this,mt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(u(this,mt).addDeletedAnnotationElement(t.annotationElementId),Yt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),u(this,mt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!u(this,Ko)),u(this,mt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!u(this,is)&&(t._focusEventsAllowed=!1,S(this,is,setTimeout(()=>{S(this,is,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:u(this,mt)._signal}),e.focus())},0))),t._structTreeParentId=(n=u(this,Yo))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return u(this,mt).getId()}combinedSignal(t){return u(this,mt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=u(this,te,Xr))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await u(this,mt).updateMode(t.mode);const{offsetX:n,offsetY:i}=I(this,te,Fy).call(this),s=this.getNextId(),a=I(this,te,My).call(this,{parent:this,id:s,x:n,y:i,uiManager:u(this,mt),isCentered:!0,...e});a&&this.add(a)}async deserialize(t){var e;return await((e=u(Sr,fa).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,u(this,mt)))||null}createAndAddNewEditor(t,e,n={}){const i=this.getNextId(),s=I(this,te,My).call(this,{parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:u(this,mt),isCentered:e,...n});return s&&this.add(s),s}addNewEditor(t={}){this.createAndAddNewEditor(I(this,te,Fy).call(this),!0,t)}setSelected(t){u(this,mt).setSelected(t)}toggleSelected(t){u(this,mt).toggleSelected(t)}unselect(t){u(this,mt).unselect(t)}pointerup(t){var i;const{isMac:e}=Xe.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!u(this,ha)||(S(this,ha,!1),(i=u(this,te,Xr))!=null&&i.isDrawer&&u(this,te,Xr).supportMultipleDrawings))return;if(!u(this,Yu)){S(this,Yu,!0);return}const n=u(this,mt).getMode();if(n===Et.STAMP||n===Et.SIGNATURE){u(this,mt).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var i;if(u(this,mt).getMode()===Et.HIGHLIGHT&&this.enableTextSelection(),u(this,ha)){S(this,ha,!1);return}const{isMac:e}=Xe.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(S(this,ha,!0),(i=u(this,te,Xr))!=null&&i.isDrawer){this.startDrawingSession(t);return}const n=u(this,mt).getActive();S(this,Yu,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),u(this,Lr)){u(this,te,Xr).startDrawing(this,u(this,mt),!1,t);return}u(this,mt).setCurrentDrawingSession(this),S(this,Lr,new AbortController);const e=u(this,mt).combinedSignal(u(this,Lr));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(S(this,ss,null),this.commitOrRemove())},{signal:e}),u(this,te,Xr).startDrawing(this,u(this,mt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&S(this,ss,e);return}u(this,ss)&&setTimeout(()=>{var e;(e=u(this,ss))==null||e.focus(),S(this,ss,null)},0)}endDrawingSession(t=!1){return u(this,Lr)?(u(this,mt).setCurrentDrawingSession(null),u(this,Lr).abort(),S(this,Lr,null),S(this,ss,null),u(this,te,Xr).endDrawing(t)):null}findNewParent(t,e,n){const i=u(this,mt).findParent(e,n);return i===null||i===this?!1:(i.changeParent(t),!0)}commitOrRemove(){return u(this,Lr)?(this.endDrawingSession(),!0):!1}onScaleChanging(){u(this,Lr)&&u(this,te,Xr).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=u(this,mt).getActive())==null?void 0:t.parent)===this&&(u(this,mt).commitOrRemove(),u(this,mt).setActiveEditor(null)),u(this,is)&&(clearTimeout(u(this,is)),S(this,is,null));for(const n of u(this,Vn).values())(e=u(this,Yo))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,u(this,Vn).clear(),u(this,mt).removeLayer(this)}render({viewport:t}){this.viewport=t,il(this.div,t);for(const e of u(this,mt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){u(this,mt).commitOrRemove(),I(this,te,xp).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,il(this.div,{rotation:n}),e!==n)for(const i of u(this,Vn).values())i.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return u(this,mt).viewParameters.realScale}};Yo=new WeakMap,Yu=new WeakMap,pi=new WeakMap,ca=new WeakMap,is=new WeakMap,Vn=new WeakMap,ha=new WeakMap,Ku=new WeakMap,Ko=new WeakMap,Lr=new WeakMap,ss=new WeakMap,Le=new WeakMap,as=new WeakMap,da=new WeakMap,Zu=new WeakMap,mt=new WeakMap,fa=new WeakMap,te=new WeakSet,JE=function(t){u(this,mt).unselectAll();const{target:e}=t;if(e===u(this,Le).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&u(this,Le).div.contains(e)){const{isMac:n}=Xe.platform;if(t.button!==0||t.ctrlKey&&n)return;u(this,mt).showAllEditors("highlight",!0,!0),u(this,Le).div.classList.add("free"),this.toggleDrawing(),ig.startHighlighting(this,u(this,mt).direction==="ltr",{target:u(this,Le).div,x:t.x,y:t.y}),u(this,Le).div.addEventListener("pointerup",()=>{u(this,Le).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,mt)._signal}),t.preventDefault()}},Xr=function(){return u(Sr,fa).get(u(this,mt).getMode())},My=function(t){const e=u(this,te,Xr);return e?new e.prototype.constructor(t):null},Fy=function(){const{x:t,y:e,width:n,height:i}=this.div.getBoundingClientRect(),s=Math.max(0,t),a=Math.max(0,e),o=Math.min(window.innerWidth,t+n),l=Math.min(window.innerHeight,e+i),c=(s+o)/2-t,h=(a+l)/2-e,[d,f]=this.viewport.rotation%180===0?[c,h]:[h,c];return{offsetX:d,offsetY:f}},xp=function(){for(const t of u(this,Vn).values())t.isEmpty()&&t.remove()},it(Sr,"_initialized",!1),k(Sr,fa,new Map([my,Ty,Ly,ig,Oy].map(t=>[t._editorType,t])));let Dy=Sr;var Nr,cn,Zo,Yd,xg,qE,Ai,By,tx,jy;const be=class be{constructor({pageIndex:t}){k(this,Ai);k(this,Nr,null);k(this,cn,new Map);k(this,Zo,new Map);this.pageIndex=t}setParent(t){if(!u(this,Nr)){S(this,Nr,t);return}if(u(this,Nr)!==t){if(u(this,cn).size>0)for(const e of u(this,cn).values())e.remove(),t.append(e);S(this,Nr,t)}}static get _svgFactory(){return kt(this,"_svgFactory",new ng)}draw(t,e=!1,n=!1){const i=sn(be,Yd)._++,s=I(this,Ai,By).call(this),a=be._svgFactory.createElement("defs");s.append(a);const o=be._svgFactory.createElement("path");a.append(o);const l=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),e&&u(this,Zo).set(i,o);const c=n?I(this,Ai,tx).call(this,a,l):null,h=be._svgFactory.createElement("use");return s.append(h),h.setAttribute("href",`#${l}`),this.updateProperties(s,t),u(this,cn).set(i,s),{id:i,clipPathId:`url(#${c})`}}drawOutline(t,e){const n=sn(be,Yd)._++,i=I(this,Ai,By).call(this),s=be._svgFactory.createElement("defs");i.append(s);const a=be._svgFactory.createElement("path");s.append(a);const o=`path_p${this.pageIndex}_${n}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let l;if(e){const d=be._svgFactory.createElement("mask");s.append(d),l=`mask_p${this.pageIndex}_${n}`,d.setAttribute("id",l),d.setAttribute("maskUnits","objectBoundingBox");const f=be._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=be._svgFactory.createElement("use");d.append(p),p.setAttribute("href",`#${o}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const c=be._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${o}`),l&&c.setAttribute("mask",`url(#${l})`);const h=c.cloneNode();return i.append(h),c.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(i,t),u(this,cn).set(n,i),n}finalizeDraw(t,e){u(this,Zo).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var l;if(!e)return;const{root:n,bbox:i,rootClass:s,path:a}=e,o=typeof t=="number"?u(this,cn).get(t):t;if(o){if(n&&I(this,Ai,jy).call(this,o,n),i&&I(l=be,xg,qE).call(l,o,i),s){const{classList:c}=o;for(const[h,d]of Object.entries(s))c.toggle(h,d)}if(a){const h=o.firstChild.firstChild;I(this,Ai,jy).call(this,h,a)}}}updateParent(t,e){if(e===this)return;const n=u(this,cn).get(t);n&&(u(e,Nr).append(n),u(this,cn).delete(t),u(e,cn).set(t,n))}remove(t){u(this,Zo).delete(t),u(this,Nr)!==null&&(u(this,cn).get(t).remove(),u(this,cn).delete(t))}destroy(){S(this,Nr,null);for(const t of u(this,cn).values())t.remove();u(this,cn).clear(),u(this,Zo).clear()}};Nr=new WeakMap,cn=new WeakMap,Zo=new WeakMap,Yd=new WeakMap,xg=new WeakSet,qE=function(t,[e,n,i,s]){const{style:a}=t;a.top=`${100*n}%`,a.left=`${100*e}%`,a.width=`${100*i}%`,a.height=`${100*s}%`},Ai=new WeakSet,By=function(){const t=be._svgFactory.create(1,1,!0);return u(this,Nr).append(t),t.setAttribute("aria-hidden",!0),t},tx=function(t,e){const n=be._svgFactory.createElement("clipPath");t.append(n);const i=`clip_${e}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const s=be._svgFactory.createElement("use");return n.append(s),s.setAttribute("href",`#${e}`),s.classList.add("clip"),i},jy=function(t,e){for(const[n,i]of Object.entries(e))i===null?t.removeAttribute(n):t.setAttribute(n,i)},k(be,xg),k(be,Yd,0);let zy=be;globalThis._pdfjsTestingUtils={HighlightOutliner:yy};globalThis.pdfjsLib={AbortException:Ta,AnnotationEditorLayer:Dy,AnnotationEditorParamsType:Pt,AnnotationEditorType:Et,AnnotationEditorUIManager:sl,AnnotationLayer:fy,AnnotationMode:Cs,AnnotationType:ge,build:rk,ColorPicker:tg,createValidAbsoluteUrl:Xb,DOMSVGFactory:ng,DrawLayer:zy,FeatureTest:Xe,fetchData:ef,getDocument:QS,getFilenameFromUrl:KC,getPdfFilenameFromUrl:ZC,getRGB:Vg,getUuid:Zb,getXfaPageViewport:JC,GlobalWorkerOptions:mi,ImageKind:Yf,InvalidPDFException:xv,isDataScheme:Wg,isPdfFile:F0,isValidExplicitDest:uT,MathClamp:dn,noContextMenu:Ar,normalizeUnicode:GC,OPS:Kp,OutputScale:wi,PasswordResponses:FC,PDFDataRangeTransport:JS,PDFDateString:Qp,PDFWorker:wh,PermissionFlag:MC,PixelsPerInch:ka,RenderingCancelledException:M0,ResponseException:Zp,setLayerDimensions:il,shadow:kt,SignatureExtractor:os,stopEvent:me,SupportedImageMimeTypes:Tv,TextLayer:vh,TouchManager:qp,updateUrlHash:Yb,Util:vt,VerbosityLevel:Ug,version:nk,XfaLayer:nE};mi.workerSrc="/pdf.worker.min.mjs";const Tk=({onFiles:r})=>{const[t,e]=Dr.useState(!1);return St.jsxs("div",{onDragOver:n=>{n.preventDefault(),e(!0)},onDragLeave:()=>e(!1),onDrop:n=>{var i,s;n.preventDefault(),e(!1),(s=(i=n.dataTransfer)==null?void 0:i.files)!=null&&s.length&&r(n.dataTransfer.files)},className:"mt-4 flex flex-col items-center justify-center rounded-2xl border-2 border-dashed p-10 text-center transition "+(t?"border-blue-500 bg-blue-50":"border-gray-300 bg-white"),children:[St.jsx("p",{className:"text-lg font-medium",children:"Drag & drop your PDF here"}),St.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"or click the button below to choose a file"})]})};function kk(){const[r,t]=Dr.useState(!1),[e,n]=Dr.useState(null),[i,s]=Dr.useState([]),[a,o]=Dr.useState(null),l=Dr.useRef(null),c=()=>{s([]),o(null),n(null)},h=Dr.useCallback(async v=>{const g=Array.from(v).find(A=>A.type==="application/pdf"||A.name.toLowerCase().endsWith(".pdf"));if(!g){n("Please select a PDF file.");return}c(),t(!0);try{const A=await g.arrayBuffer(),y=await QS({data:A}).promise;o({pages:y.numPages,filename:g.name});const w=[];for(let T=1;T<=y.numPages;T++){const R=await y.getPage(T),P=R.getViewport({scale:1}),_=document.createElement("canvas"),N=_.getContext("2d",{willReadFrequently:!1});if(!N)throw new Error("Canvas 2D not available");_.width=Math.max(1,Math.floor(P.width)),_.height=Math.max(1,Math.floor(P.height)),await R.render({canvasContext:N,viewport:P}).promise;const B=R.objs&&R.objs._objs?R.objs._objs:{};console.log(`PDF page ${T} object keys:`,Object.keys(B));for(const[M,x]of Object.entries(B))x&&typeof x=="object"&&console.log(`  [${M}] keys:`,Object.keys(x));const O=Object.entries(B).filter(([M,x])=>x&&typeof x=="object"&&"data"in x&&"width"in x&&"height"in x);for(const[M,x]of O)try{const{width:$,height:X,data:F}=x;if(!$||!X||!F)continue;const W=document.createElement("canvas");W.width=$,W.height=X;const H=W.getContext("2d");if(!H)continue;const Z=new ImageData(new Uint8ClampedArray(F),$,X);H.putImageData(Z,0,0);const j=await new Promise(st=>W.toBlob(tt=>st(tt),"image/png")),z=URL.createObjectURL(j);w.push({id:`${T}-${M}`,pageIndex:T,width:$,height:X,blob:j,url:z,format:"png"})}catch($){console.warn("Skip candidate image:",$)}}const b=[],E=new Set;for(const T of w){const R=`${T.pageIndex}:${T.width}x${T.height}`;E.has(R)||(E.add(R),b.push(T))}if(b.length===0){for(let T=1;T<=y.numPages;T++){const R=await y.getPage(T),P=R.getViewport({scale:2}),_=document.createElement("canvas"),N=_.getContext("2d");if(!N)continue;_.width=Math.max(1,Math.floor(P.width)),_.height=Math.max(1,Math.floor(P.height)),await R.render({canvasContext:N,viewport:P}).promise;const B=await new Promise(M=>_.toBlob(x=>M(x),"image/png")),O=URL.createObjectURL(B);b.push({id:`raster-page-${T}`,pageIndex:T,width:_.width,height:_.height,blob:B,url:O,format:"png"})}b.length===0?n("No embedded images or rasterized pages could be extracted. (Some PDFs only have vector graphics or are encrypted.)"):n("No embedded images were found. Fallback: rasterized each page as a PNG. This is not perfect extractionvector graphics, text, and image quality may differ from the originals.")}s(b)}catch(A){console.error(A),n((A==null?void 0:A.message)||"Failed to process PDF")}finally{t(!1)}},[c]),d=i.length,f=Dr.useCallback(async()=>{var m;const v=new NC;i.forEach((y,w)=>{const b=`page-${y.pageIndex}_img-${w+1}_${y.width}x${y.height}.${y.format}`;v.file(b,y.blob)});const g=await v.generateAsync({type:"blob"}),A=document.createElement("a");A.href=URL.createObjectURL(g),A.download=(((m=a==null?void 0:a.filename)==null?void 0:m.replace(/\.pdf$/i,""))||"images")+".zip",A.click()},[i,a==null?void 0:a.filename]),p=()=>{var v;return(v=l.current)==null?void 0:v.click()};return St.jsx("div",{className:"bg-gradient-to-br from-yellow-50 via-blue-50 to-pink-100",children:St.jsxs("div",{className:"mx-auto max-w-5xl p-6 min-h-screen",children:[St.jsxs("header",{className:"mb-8 flex flex-col items-center text-center",children:[St.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[St.jsx("span",{className:"inline-block text-4xl md:text-5xl font-extrabold text-blue-700 drop-shadow-sm retro-outline",children:"Picturific"}),St.jsx("span",{className:"inline-block rotate-6 text-3xl md:text-4xl",children:""})]}),St.jsx("div",{className:"text-lg md:text-xl font-mono text-gray-700 mb-1",children:"PDF Image Extraction, with Style"}),St.jsx("div",{className:"text-sm text-blue-600 italic",children:"Runs 100% in your browser. No uploads."})]}),St.jsxs("div",{className:"rounded-2xl bg-white/90 p-5 shadow-xl border-2 border-blue-200",children:[St.jsxs("div",{className:"flex items-center gap-3",children:[St.jsx("input",{ref:l,type:"file",accept:"application/pdf",className:"hidden",onChange:v=>v.target.files&&h(v.target.files)}),St.jsx("button",{onClick:p,className:"rounded-xl border bg-gray-900 px-4 py-2 text-white shadow hover:bg-black",children:"Choose PDF"}),St.jsx("span",{className:"text-sm text-gray-500",children:"or drop a file below"})]}),St.jsx(Tk,{onFiles:h}),r&&St.jsxs("div",{className:"mt-6",children:[St.jsxs("div",{className:"rounded-xl bg-gray-100 p-4 text-sm mb-4 animate-pulse",children:[St.jsx("div",{className:"h-4 w-1/3 bg-gray-300 rounded mb-2"}),St.jsx("div",{className:"h-3 w-1/2 bg-gray-200 rounded mb-1"}),St.jsx("div",{className:"h-3 w-1/4 bg-gray-200 rounded"})]}),St.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:Array.from({length:6}).map((v,g)=>St.jsxs("div",{className:"rounded-xl bg-white p-3 shadow border animate-pulse",children:[St.jsx("div",{className:"w-full h-40 bg-gray-200 rounded-md mb-2 shimmer"}),St.jsx("div",{className:"h-3 w-2/3 bg-gray-200 rounded mb-1"}),St.jsx("div",{className:"h-3 w-1/3 bg-gray-100 rounded"})]},g))})]}),e&&!r&&St.jsx("div",{className:"mt-6 rounded-xl bg-red-50 p-4 text-sm text-red-700 border border-red-200",children:e}),a&&!r&&St.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[St.jsxs("div",{className:"text-sm text-gray-600",children:[St.jsx("strong",{children:a.filename}),"  ",a.pages," page",a.pages!==1?"s":"","  ",d," image",d!==1?"s":""," found"]}),i.length>0&&St.jsx("button",{onClick:f,className:"rounded-xl border bg-blue-600 px-4 py-2 text-white shadow hover:bg-blue-700",children:"Download all as ZIP"})]})]}),i.length>0&&St.jsx("section",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:i.map((v,g)=>St.jsxs("figure",{className:"rounded-xl bg-white p-3 shadow border",children:[St.jsx("img",{src:v.url,alt:`Extracted ${g+1}`,className:"w-full h-auto rounded-md"}),St.jsxs("figcaption",{className:"mt-2 text-xs text-gray-600 flex items-center justify-between",children:[St.jsxs("span",{children:["Page ",v.pageIndex,"  ",v.width,"",v.height]}),St.jsx("a",{href:v.url,download:`page-${v.pageIndex}_img-${g+1}_${v.width}x${v.height}.${v.format}`,className:"underline hover:no-underline",children:"Download"})]})]},v.id))}),St.jsx("footer",{className:"mt-10 text-xs text-gray-700 text-center font-mono",children:St.jsxs("p",{children:[St.jsx("span",{className:"font-bold text-blue-700",children:"Picturific"}),"  2025  Extracting images so good, youll want to frame them.",St.jsx("br",{}),St.jsx("span",{className:"text-gray-400",children:"Tip: If a PDF only contains vector art or the images were flattened during creation, nothing may be extracted. You can still rasterize pages via your PDF tool if needed."})]})})]})})}_m.createRoot(document.getElementById("root")).render(St.jsx(bx.StrictMode,{children:St.jsx(kk,{})}));
